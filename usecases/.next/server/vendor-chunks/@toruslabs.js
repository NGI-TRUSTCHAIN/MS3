"use strict";
/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
exports.id = "vendor-chunks/@toruslabs";
exports.ids = ["vendor-chunks/@toruslabs"];
exports.modules = {

/***/ "(ssr)/./node_modules/@toruslabs/base-controllers/dist/lib.esm/BaseController.js":
/*!*********************************************************************************!*\
  !*** ./node_modules/@toruslabs/base-controllers/dist/lib.esm/BaseController.js ***!
  \*********************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   BaseController: () => (/* binding */ BaseController)\n/* harmony export */ });\n/* harmony import */ var _babel_runtime_helpers_objectSpread2__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @babel/runtime/helpers/objectSpread2 */ \"(ssr)/./node_modules/@babel/runtime/helpers/objectSpread2.js\");\n/* harmony import */ var _babel_runtime_helpers_objectSpread2__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_helpers_objectSpread2__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var _babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @babel/runtime/helpers/defineProperty */ \"(ssr)/./node_modules/@babel/runtime/helpers/defineProperty.js\");\n/* harmony import */ var _babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_1__);\n/* harmony import */ var _web3auth_auth__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @web3auth/auth */ \"(ssr)/./node_modules/@web3auth/auth/dist/lib.esm/jrpc/safeEventEmitter.js\");\n\n\n\n\n/**\n * Controller class that provides configuration, state management, and subscriptions\n */\nclass BaseController extends _web3auth_auth__WEBPACK_IMPORTED_MODULE_2__.SafeEventEmitter {\n  /**\n   * Creates a BaseController instance. Both initial state and initial\n   * configuration options are merged with defaults upon initialization.\n   *\n   * @param config - Initial options used to configure this controller\n   * @param state - Initial state to set on this controller\n   */\n  constructor({\n    config = {},\n    state = {}\n  }) {\n    super();\n    // Use assign since generics can't be spread: https://git.io/vpRhY\n    /**\n     * Default options used to configure this controller\n     */\n    _babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_1___default()(this, \"defaultConfig\", {});\n    /**\n     * Default state set on this controller\n     */\n    _babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_1___default()(this, \"defaultState\", {});\n    /**\n     * Determines if listeners are notified of state changes\n     */\n    _babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_1___default()(this, \"disabled\", false);\n    /**\n     * Name of this controller used during composition\n     */\n    _babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_1___default()(this, \"name\", \"BaseController\");\n    _babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_1___default()(this, \"initialConfig\", void 0);\n    _babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_1___default()(this, \"initialState\", void 0);\n    _babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_1___default()(this, \"internalConfig\", this.defaultConfig);\n    _babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_1___default()(this, \"internalState\", this.defaultState);\n    this.initialState = state;\n    this.initialConfig = config;\n  }\n\n  /**\n   * Retrieves current controller configuration options\n   *\n   * @returns - Current configuration\n   */\n  get config() {\n    return this.internalConfig;\n  }\n\n  /**\n   * Retrieves current controller state\n   *\n   * @returns - Current state\n   */\n  get state() {\n    return this.internalState;\n  }\n\n  /**\n   * Updates controller configuration\n   *\n   * @param config - New configuration options\n   * @param overwrite - Overwrite config instead of merging\n   * @param fullUpdate - Boolean that defines if the update is partial or not\n   */\n  configure(config, overwrite = false, fullUpdate = true) {\n    if (fullUpdate) {\n      this.internalConfig = overwrite ? config : Object.assign(this.internalConfig, config);\n      for (const key in this.internalConfig) {\n        if (typeof this.internalConfig[key] !== \"undefined\") {\n          // eslint-disable-next-line @typescript-eslint/no-explicit-any\n          this[key] = this.internalConfig[key];\n        }\n      }\n    } else {\n      for (const key in config) {\n        /* istanbul ignore else */\n        if (typeof this.internalConfig[key] !== \"undefined\") {\n          this.internalConfig[key] = config[key];\n          // eslint-disable-next-line @typescript-eslint/no-explicit-any\n          this[key] = config[key];\n        }\n      }\n    }\n  }\n\n  /**\n   * Updates controller state\n   *\n   * @param state - New state\n   * @param overwrite - Overwrite state instead of merging\n   */\n  update(state, overwrite = false) {\n    this.internalState = overwrite ? _babel_runtime_helpers_objectSpread2__WEBPACK_IMPORTED_MODULE_0___default()({}, state) : _babel_runtime_helpers_objectSpread2__WEBPACK_IMPORTED_MODULE_0___default()(_babel_runtime_helpers_objectSpread2__WEBPACK_IMPORTED_MODULE_0___default()({}, this.internalState), state);\n    this.emit(\"store\", this.internalState);\n  }\n\n  /**\n   * Enables the controller. This sets each config option as a member\n   * variable on this instance and triggers any defined setters. This\n   * also sets initial state and triggers any listeners.\n   *\n   * @returns - This controller instance\n   */\n  initialize() {\n    this.internalState = this.defaultState;\n    this.internalConfig = this.defaultConfig;\n    this.configure(this.initialConfig);\n    this.update(this.initialState);\n    return this;\n  }\n}\n\n\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvQHRvcnVzbGFicy9iYXNlLWNvbnRyb2xsZXJzL2Rpc3QvbGliLmVzbS9CYXNlQ29udHJvbGxlci5qcyIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7QUFBaUU7QUFDRztBQUNsQjs7QUFFbEQ7QUFDQTtBQUNBO0FBQ0EsNkJBQTZCLDREQUFnQjtBQUM3QztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsZUFBZTtBQUNmO0FBQ0EsR0FBRztBQUNIO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxJQUFJLDRFQUFlLDBCQUEwQjtBQUM3QztBQUNBO0FBQ0E7QUFDQSxJQUFJLDRFQUFlLHlCQUF5QjtBQUM1QztBQUNBO0FBQ0E7QUFDQSxJQUFJLDRFQUFlO0FBQ25CO0FBQ0E7QUFDQTtBQUNBLElBQUksNEVBQWU7QUFDbkIsSUFBSSw0RUFBZTtBQUNuQixJQUFJLDRFQUFlO0FBQ25CLElBQUksNEVBQWU7QUFDbkIsSUFBSSw0RUFBZTtBQUNuQjtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsTUFBTTtBQUNOO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EscUNBQXFDLDJFQUFhLEdBQUcsV0FBVywyRUFBYSxDQUFDLDJFQUFhLEdBQUc7QUFDOUY7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRTBCIiwic291cmNlcyI6WyIvVXNlcnMvYW5nZWxhaGVycmFkb3Jsb3Blei9EZXNrdG9wL0NUQi9NUzMvdXNlY2FzZXMvbm9kZV9tb2R1bGVzL0B0b3J1c2xhYnMvYmFzZS1jb250cm9sbGVycy9kaXN0L2xpYi5lc20vQmFzZUNvbnRyb2xsZXIuanMiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IF9vYmplY3RTcHJlYWQgZnJvbSAnQGJhYmVsL3J1bnRpbWUvaGVscGVycy9vYmplY3RTcHJlYWQyJztcbmltcG9ydCBfZGVmaW5lUHJvcGVydHkgZnJvbSAnQGJhYmVsL3J1bnRpbWUvaGVscGVycy9kZWZpbmVQcm9wZXJ0eSc7XG5pbXBvcnQgeyBTYWZlRXZlbnRFbWl0dGVyIH0gZnJvbSAnQHdlYjNhdXRoL2F1dGgnO1xuXG4vKipcbiAqIENvbnRyb2xsZXIgY2xhc3MgdGhhdCBwcm92aWRlcyBjb25maWd1cmF0aW9uLCBzdGF0ZSBtYW5hZ2VtZW50LCBhbmQgc3Vic2NyaXB0aW9uc1xuICovXG5jbGFzcyBCYXNlQ29udHJvbGxlciBleHRlbmRzIFNhZmVFdmVudEVtaXR0ZXIge1xuICAvKipcbiAgICogQ3JlYXRlcyBhIEJhc2VDb250cm9sbGVyIGluc3RhbmNlLiBCb3RoIGluaXRpYWwgc3RhdGUgYW5kIGluaXRpYWxcbiAgICogY29uZmlndXJhdGlvbiBvcHRpb25zIGFyZSBtZXJnZWQgd2l0aCBkZWZhdWx0cyB1cG9uIGluaXRpYWxpemF0aW9uLlxuICAgKlxuICAgKiBAcGFyYW0gY29uZmlnIC0gSW5pdGlhbCBvcHRpb25zIHVzZWQgdG8gY29uZmlndXJlIHRoaXMgY29udHJvbGxlclxuICAgKiBAcGFyYW0gc3RhdGUgLSBJbml0aWFsIHN0YXRlIHRvIHNldCBvbiB0aGlzIGNvbnRyb2xsZXJcbiAgICovXG4gIGNvbnN0cnVjdG9yKHtcbiAgICBjb25maWcgPSB7fSxcbiAgICBzdGF0ZSA9IHt9XG4gIH0pIHtcbiAgICBzdXBlcigpO1xuICAgIC8vIFVzZSBhc3NpZ24gc2luY2UgZ2VuZXJpY3MgY2FuJ3QgYmUgc3ByZWFkOiBodHRwczovL2dpdC5pby92cFJoWVxuICAgIC8qKlxuICAgICAqIERlZmF1bHQgb3B0aW9ucyB1c2VkIHRvIGNvbmZpZ3VyZSB0aGlzIGNvbnRyb2xsZXJcbiAgICAgKi9cbiAgICBfZGVmaW5lUHJvcGVydHkodGhpcywgXCJkZWZhdWx0Q29uZmlnXCIsIHt9KTtcbiAgICAvKipcbiAgICAgKiBEZWZhdWx0IHN0YXRlIHNldCBvbiB0aGlzIGNvbnRyb2xsZXJcbiAgICAgKi9cbiAgICBfZGVmaW5lUHJvcGVydHkodGhpcywgXCJkZWZhdWx0U3RhdGVcIiwge30pO1xuICAgIC8qKlxuICAgICAqIERldGVybWluZXMgaWYgbGlzdGVuZXJzIGFyZSBub3RpZmllZCBvZiBzdGF0ZSBjaGFuZ2VzXG4gICAgICovXG4gICAgX2RlZmluZVByb3BlcnR5KHRoaXMsIFwiZGlzYWJsZWRcIiwgZmFsc2UpO1xuICAgIC8qKlxuICAgICAqIE5hbWUgb2YgdGhpcyBjb250cm9sbGVyIHVzZWQgZHVyaW5nIGNvbXBvc2l0aW9uXG4gICAgICovXG4gICAgX2RlZmluZVByb3BlcnR5KHRoaXMsIFwibmFtZVwiLCBcIkJhc2VDb250cm9sbGVyXCIpO1xuICAgIF9kZWZpbmVQcm9wZXJ0eSh0aGlzLCBcImluaXRpYWxDb25maWdcIiwgdm9pZCAwKTtcbiAgICBfZGVmaW5lUHJvcGVydHkodGhpcywgXCJpbml0aWFsU3RhdGVcIiwgdm9pZCAwKTtcbiAgICBfZGVmaW5lUHJvcGVydHkodGhpcywgXCJpbnRlcm5hbENvbmZpZ1wiLCB0aGlzLmRlZmF1bHRDb25maWcpO1xuICAgIF9kZWZpbmVQcm9wZXJ0eSh0aGlzLCBcImludGVybmFsU3RhdGVcIiwgdGhpcy5kZWZhdWx0U3RhdGUpO1xuICAgIHRoaXMuaW5pdGlhbFN0YXRlID0gc3RhdGU7XG4gICAgdGhpcy5pbml0aWFsQ29uZmlnID0gY29uZmlnO1xuICB9XG5cbiAgLyoqXG4gICAqIFJldHJpZXZlcyBjdXJyZW50IGNvbnRyb2xsZXIgY29uZmlndXJhdGlvbiBvcHRpb25zXG4gICAqXG4gICAqIEByZXR1cm5zIC0gQ3VycmVudCBjb25maWd1cmF0aW9uXG4gICAqL1xuICBnZXQgY29uZmlnKCkge1xuICAgIHJldHVybiB0aGlzLmludGVybmFsQ29uZmlnO1xuICB9XG5cbiAgLyoqXG4gICAqIFJldHJpZXZlcyBjdXJyZW50IGNvbnRyb2xsZXIgc3RhdGVcbiAgICpcbiAgICogQHJldHVybnMgLSBDdXJyZW50IHN0YXRlXG4gICAqL1xuICBnZXQgc3RhdGUoKSB7XG4gICAgcmV0dXJuIHRoaXMuaW50ZXJuYWxTdGF0ZTtcbiAgfVxuXG4gIC8qKlxuICAgKiBVcGRhdGVzIGNvbnRyb2xsZXIgY29uZmlndXJhdGlvblxuICAgKlxuICAgKiBAcGFyYW0gY29uZmlnIC0gTmV3IGNvbmZpZ3VyYXRpb24gb3B0aW9uc1xuICAgKiBAcGFyYW0gb3ZlcndyaXRlIC0gT3ZlcndyaXRlIGNvbmZpZyBpbnN0ZWFkIG9mIG1lcmdpbmdcbiAgICogQHBhcmFtIGZ1bGxVcGRhdGUgLSBCb29sZWFuIHRoYXQgZGVmaW5lcyBpZiB0aGUgdXBkYXRlIGlzIHBhcnRpYWwgb3Igbm90XG4gICAqL1xuICBjb25maWd1cmUoY29uZmlnLCBvdmVyd3JpdGUgPSBmYWxzZSwgZnVsbFVwZGF0ZSA9IHRydWUpIHtcbiAgICBpZiAoZnVsbFVwZGF0ZSkge1xuICAgICAgdGhpcy5pbnRlcm5hbENvbmZpZyA9IG92ZXJ3cml0ZSA/IGNvbmZpZyA6IE9iamVjdC5hc3NpZ24odGhpcy5pbnRlcm5hbENvbmZpZywgY29uZmlnKTtcbiAgICAgIGZvciAoY29uc3Qga2V5IGluIHRoaXMuaW50ZXJuYWxDb25maWcpIHtcbiAgICAgICAgaWYgKHR5cGVvZiB0aGlzLmludGVybmFsQ29uZmlnW2tleV0gIT09IFwidW5kZWZpbmVkXCIpIHtcbiAgICAgICAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgQHR5cGVzY3JpcHQtZXNsaW50L25vLWV4cGxpY2l0LWFueVxuICAgICAgICAgIHRoaXNba2V5XSA9IHRoaXMuaW50ZXJuYWxDb25maWdba2V5XTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH0gZWxzZSB7XG4gICAgICBmb3IgKGNvbnN0IGtleSBpbiBjb25maWcpIHtcbiAgICAgICAgLyogaXN0YW5idWwgaWdub3JlIGVsc2UgKi9cbiAgICAgICAgaWYgKHR5cGVvZiB0aGlzLmludGVybmFsQ29uZmlnW2tleV0gIT09IFwidW5kZWZpbmVkXCIpIHtcbiAgICAgICAgICB0aGlzLmludGVybmFsQ29uZmlnW2tleV0gPSBjb25maWdba2V5XTtcbiAgICAgICAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgQHR5cGVzY3JpcHQtZXNsaW50L25vLWV4cGxpY2l0LWFueVxuICAgICAgICAgIHRoaXNba2V5XSA9IGNvbmZpZ1trZXldO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuICB9XG5cbiAgLyoqXG4gICAqIFVwZGF0ZXMgY29udHJvbGxlciBzdGF0ZVxuICAgKlxuICAgKiBAcGFyYW0gc3RhdGUgLSBOZXcgc3RhdGVcbiAgICogQHBhcmFtIG92ZXJ3cml0ZSAtIE92ZXJ3cml0ZSBzdGF0ZSBpbnN0ZWFkIG9mIG1lcmdpbmdcbiAgICovXG4gIHVwZGF0ZShzdGF0ZSwgb3ZlcndyaXRlID0gZmFsc2UpIHtcbiAgICB0aGlzLmludGVybmFsU3RhdGUgPSBvdmVyd3JpdGUgPyBfb2JqZWN0U3ByZWFkKHt9LCBzdGF0ZSkgOiBfb2JqZWN0U3ByZWFkKF9vYmplY3RTcHJlYWQoe30sIHRoaXMuaW50ZXJuYWxTdGF0ZSksIHN0YXRlKTtcbiAgICB0aGlzLmVtaXQoXCJzdG9yZVwiLCB0aGlzLmludGVybmFsU3RhdGUpO1xuICB9XG5cbiAgLyoqXG4gICAqIEVuYWJsZXMgdGhlIGNvbnRyb2xsZXIuIFRoaXMgc2V0cyBlYWNoIGNvbmZpZyBvcHRpb24gYXMgYSBtZW1iZXJcbiAgICogdmFyaWFibGUgb24gdGhpcyBpbnN0YW5jZSBhbmQgdHJpZ2dlcnMgYW55IGRlZmluZWQgc2V0dGVycy4gVGhpc1xuICAgKiBhbHNvIHNldHMgaW5pdGlhbCBzdGF0ZSBhbmQgdHJpZ2dlcnMgYW55IGxpc3RlbmVycy5cbiAgICpcbiAgICogQHJldHVybnMgLSBUaGlzIGNvbnRyb2xsZXIgaW5zdGFuY2VcbiAgICovXG4gIGluaXRpYWxpemUoKSB7XG4gICAgdGhpcy5pbnRlcm5hbFN0YXRlID0gdGhpcy5kZWZhdWx0U3RhdGU7XG4gICAgdGhpcy5pbnRlcm5hbENvbmZpZyA9IHRoaXMuZGVmYXVsdENvbmZpZztcbiAgICB0aGlzLmNvbmZpZ3VyZSh0aGlzLmluaXRpYWxDb25maWcpO1xuICAgIHRoaXMudXBkYXRlKHRoaXMuaW5pdGlhbFN0YXRlKTtcbiAgICByZXR1cm4gdGhpcztcbiAgfVxufVxuXG5leHBvcnQgeyBCYXNlQ29udHJvbGxlciB9O1xuIl0sIm5hbWVzIjpbXSwiaWdub3JlTGlzdCI6WzBdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/@toruslabs/base-controllers/dist/lib.esm/BaseController.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/@toruslabs/base-controllers/dist/lib.esm/Network/createFetchMiddleware.js":
/*!************************************************************************************************!*\
  !*** ./node_modules/@toruslabs/base-controllers/dist/lib.esm/Network/createFetchMiddleware.js ***!
  \************************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   createFetchConfigFromReq: () => (/* binding */ createFetchConfigFromReq),\n/* harmony export */   createFetchMiddleware: () => (/* binding */ createFetchMiddleware)\n/* harmony export */ });\n/* harmony import */ var _web3auth_auth__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @web3auth/auth */ \"(ssr)/./node_modules/@web3auth/auth/dist/lib.esm/jrpc/errors/errors.js\");\n/* harmony import */ var _web3auth_auth__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @web3auth/auth */ \"(ssr)/./node_modules/@web3auth/auth/dist/lib.esm/jrpc/jrpc.js\");\n\n\nconst RETRIABLE_ERRORS = [\n// ignore server overload errors\n\"Gateway timeout\", \"ETIMEDOUT\",\n// ignore server sent html error pages\n// or truncated json responses\n\"failed to parse response body\",\n// ignore errors where http req failed to establish\n\"Failed to fetch\"];\nfunction checkForHttpErrors(fetchRes) {\n  // check for errors\n  switch (fetchRes.status) {\n    case 405:\n      throw _web3auth_auth__WEBPACK_IMPORTED_MODULE_0__.rpcErrors.methodNotFound();\n    case 418:\n      throw _web3auth_auth__WEBPACK_IMPORTED_MODULE_0__.rpcErrors.internal({\n        message: `Request is being rate limited.`,\n        data: {\n          cause: fetchRes\n        }\n      });\n    case 503:\n    case 504:\n      throw _web3auth_auth__WEBPACK_IMPORTED_MODULE_0__.rpcErrors.internal({\n        message: `Gateway timeout. The request took too long to process.` + `This can happen when querying over too wide a block range.`,\n        data: {\n          cause: fetchRes\n        }\n      });\n  }\n}\nfunction timeout(duration) {\n  return new Promise(resolve => {\n    setTimeout(resolve, duration);\n  });\n}\nfunction parseResponse(fetchRes, body) {\n  // check for error code\n  if (fetchRes.status !== 200) {\n    throw _web3auth_auth__WEBPACK_IMPORTED_MODULE_0__.rpcErrors.internal({\n      message: `Non-200 status code: '${fetchRes.status}'`,\n      data: body\n    });\n  }\n  // check for rpc error\n  if (body.error) {\n    var _body$error;\n    throw _web3auth_auth__WEBPACK_IMPORTED_MODULE_0__.rpcErrors.internal({\n      data: body.error,\n      message: (_body$error = body.error) === null || _body$error === void 0 ? void 0 : _body$error.message\n    });\n  }\n  // return successful result\n  return body.result;\n}\nfunction createFetchConfigFromReq({\n  req,\n  rpcTarget,\n  originHttpHeaderKey\n}) {\n  const parsedUrl = new URL(rpcTarget);\n\n  // prepare payload\n  // copy only canonical json rpc properties\n  const payload = {\n    id: req.id,\n    jsonrpc: req.jsonrpc,\n    method: req.method,\n    params: req.params\n  };\n\n  // extract 'origin' parameter from request\n  const originDomain = req.origin;\n\n  // serialize request body\n  const serializedPayload = JSON.stringify(payload);\n\n  // configure fetch params\n  const fetchParams = {\n    method: \"POST\",\n    headers: {\n      Accept: \"application/json\",\n      \"Content-Type\": \"application/json\"\n    },\n    body: serializedPayload\n  };\n\n  // optional: add request origin as header\n  if (originHttpHeaderKey && originDomain) {\n    fetchParams.headers[originHttpHeaderKey] = originDomain;\n  }\n  return {\n    fetchUrl: parsedUrl.href,\n    fetchParams\n  };\n}\nfunction createFetchMiddleware({\n  rpcTarget,\n  originHttpHeaderKey\n}) {\n  return (0,_web3auth_auth__WEBPACK_IMPORTED_MODULE_1__.createAsyncMiddleware)(async (req, res, _next) => {\n    const {\n      fetchUrl,\n      fetchParams\n    } = createFetchConfigFromReq({\n      req,\n      rpcTarget,\n      originHttpHeaderKey\n    });\n\n    // attempt request multiple times\n    const maxAttempts = 5;\n    const retryInterval = 1000;\n    for (let attempt = 0; attempt < maxAttempts; attempt++) {\n      try {\n        const fetchRes = await fetch(fetchUrl, fetchParams);\n        // check for http errrors\n        checkForHttpErrors(fetchRes);\n        // parse response body\n        const fetchBody = await fetchRes.json();\n        const result = parseResponse(fetchRes, fetchBody);\n        // set result and exit retry loop\n        res.result = result;\n        return;\n      } catch (err) {\n        const errMsg = (err.message || err).toString();\n        const isRetriable = RETRIABLE_ERRORS.some(phrase => errMsg.includes(phrase));\n        // re-throw error if not retriable\n        if (!isRetriable) {\n          throw err;\n        }\n      }\n      // delay before retrying\n      await timeout(retryInterval);\n    }\n  });\n}\n\n\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvQHRvcnVzbGFicy9iYXNlLWNvbnRyb2xsZXJzL2Rpc3QvbGliLmVzbS9OZXR3b3JrL2NyZWF0ZUZldGNoTWlkZGxld2FyZS5qcyIsIm1hcHBpbmdzIjoiOzs7Ozs7O0FBQWtFOztBQUVsRTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxZQUFZLHFEQUFTO0FBQ3JCO0FBQ0EsWUFBWSxxREFBUztBQUNyQjtBQUNBO0FBQ0E7QUFDQTtBQUNBLE9BQU87QUFDUDtBQUNBO0FBQ0EsWUFBWSxxREFBUztBQUNyQjtBQUNBO0FBQ0E7QUFDQTtBQUNBLE9BQU87QUFDUDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsR0FBRztBQUNIO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsVUFBVSxxREFBUztBQUNuQix3Q0FBd0MsZ0JBQWdCO0FBQ3hEO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsVUFBVSxxREFBUztBQUNuQjtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxDQUFDO0FBQ0Q7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsQ0FBQztBQUNELFNBQVMscUVBQXFCO0FBQzlCO0FBQ0E7QUFDQTtBQUNBLE1BQU07QUFDTjtBQUNBO0FBQ0E7QUFDQSxLQUFLOztBQUVMO0FBQ0E7QUFDQTtBQUNBLDBCQUEwQix1QkFBdUI7QUFDakQ7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxRQUFRO0FBQ1I7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7O0FBRTJEIiwic291cmNlcyI6WyIvVXNlcnMvYW5nZWxhaGVycmFkb3Jsb3Blei9EZXNrdG9wL0NUQi9NUzMvdXNlY2FzZXMvbm9kZV9tb2R1bGVzL0B0b3J1c2xhYnMvYmFzZS1jb250cm9sbGVycy9kaXN0L2xpYi5lc20vTmV0d29yay9jcmVhdGVGZXRjaE1pZGRsZXdhcmUuanMiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgY3JlYXRlQXN5bmNNaWRkbGV3YXJlLCBycGNFcnJvcnMgfSBmcm9tICdAd2ViM2F1dGgvYXV0aCc7XG5cbmNvbnN0IFJFVFJJQUJMRV9FUlJPUlMgPSBbXG4vLyBpZ25vcmUgc2VydmVyIG92ZXJsb2FkIGVycm9yc1xuXCJHYXRld2F5IHRpbWVvdXRcIiwgXCJFVElNRURPVVRcIixcbi8vIGlnbm9yZSBzZXJ2ZXIgc2VudCBodG1sIGVycm9yIHBhZ2VzXG4vLyBvciB0cnVuY2F0ZWQganNvbiByZXNwb25zZXNcblwiZmFpbGVkIHRvIHBhcnNlIHJlc3BvbnNlIGJvZHlcIixcbi8vIGlnbm9yZSBlcnJvcnMgd2hlcmUgaHR0cCByZXEgZmFpbGVkIHRvIGVzdGFibGlzaFxuXCJGYWlsZWQgdG8gZmV0Y2hcIl07XG5mdW5jdGlvbiBjaGVja0Zvckh0dHBFcnJvcnMoZmV0Y2hSZXMpIHtcbiAgLy8gY2hlY2sgZm9yIGVycm9yc1xuICBzd2l0Y2ggKGZldGNoUmVzLnN0YXR1cykge1xuICAgIGNhc2UgNDA1OlxuICAgICAgdGhyb3cgcnBjRXJyb3JzLm1ldGhvZE5vdEZvdW5kKCk7XG4gICAgY2FzZSA0MTg6XG4gICAgICB0aHJvdyBycGNFcnJvcnMuaW50ZXJuYWwoe1xuICAgICAgICBtZXNzYWdlOiBgUmVxdWVzdCBpcyBiZWluZyByYXRlIGxpbWl0ZWQuYCxcbiAgICAgICAgZGF0YToge1xuICAgICAgICAgIGNhdXNlOiBmZXRjaFJlc1xuICAgICAgICB9XG4gICAgICB9KTtcbiAgICBjYXNlIDUwMzpcbiAgICBjYXNlIDUwNDpcbiAgICAgIHRocm93IHJwY0Vycm9ycy5pbnRlcm5hbCh7XG4gICAgICAgIG1lc3NhZ2U6IGBHYXRld2F5IHRpbWVvdXQuIFRoZSByZXF1ZXN0IHRvb2sgdG9vIGxvbmcgdG8gcHJvY2Vzcy5gICsgYFRoaXMgY2FuIGhhcHBlbiB3aGVuIHF1ZXJ5aW5nIG92ZXIgdG9vIHdpZGUgYSBibG9jayByYW5nZS5gLFxuICAgICAgICBkYXRhOiB7XG4gICAgICAgICAgY2F1c2U6IGZldGNoUmVzXG4gICAgICAgIH1cbiAgICAgIH0pO1xuICB9XG59XG5mdW5jdGlvbiB0aW1lb3V0KGR1cmF0aW9uKSB7XG4gIHJldHVybiBuZXcgUHJvbWlzZShyZXNvbHZlID0+IHtcbiAgICBzZXRUaW1lb3V0KHJlc29sdmUsIGR1cmF0aW9uKTtcbiAgfSk7XG59XG5mdW5jdGlvbiBwYXJzZVJlc3BvbnNlKGZldGNoUmVzLCBib2R5KSB7XG4gIC8vIGNoZWNrIGZvciBlcnJvciBjb2RlXG4gIGlmIChmZXRjaFJlcy5zdGF0dXMgIT09IDIwMCkge1xuICAgIHRocm93IHJwY0Vycm9ycy5pbnRlcm5hbCh7XG4gICAgICBtZXNzYWdlOiBgTm9uLTIwMCBzdGF0dXMgY29kZTogJyR7ZmV0Y2hSZXMuc3RhdHVzfSdgLFxuICAgICAgZGF0YTogYm9keVxuICAgIH0pO1xuICB9XG4gIC8vIGNoZWNrIGZvciBycGMgZXJyb3JcbiAgaWYgKGJvZHkuZXJyb3IpIHtcbiAgICB2YXIgX2JvZHkkZXJyb3I7XG4gICAgdGhyb3cgcnBjRXJyb3JzLmludGVybmFsKHtcbiAgICAgIGRhdGE6IGJvZHkuZXJyb3IsXG4gICAgICBtZXNzYWdlOiAoX2JvZHkkZXJyb3IgPSBib2R5LmVycm9yKSA9PT0gbnVsbCB8fCBfYm9keSRlcnJvciA9PT0gdm9pZCAwID8gdm9pZCAwIDogX2JvZHkkZXJyb3IubWVzc2FnZVxuICAgIH0pO1xuICB9XG4gIC8vIHJldHVybiBzdWNjZXNzZnVsIHJlc3VsdFxuICByZXR1cm4gYm9keS5yZXN1bHQ7XG59XG5mdW5jdGlvbiBjcmVhdGVGZXRjaENvbmZpZ0Zyb21SZXEoe1xuICByZXEsXG4gIHJwY1RhcmdldCxcbiAgb3JpZ2luSHR0cEhlYWRlcktleVxufSkge1xuICBjb25zdCBwYXJzZWRVcmwgPSBuZXcgVVJMKHJwY1RhcmdldCk7XG5cbiAgLy8gcHJlcGFyZSBwYXlsb2FkXG4gIC8vIGNvcHkgb25seSBjYW5vbmljYWwganNvbiBycGMgcHJvcGVydGllc1xuICBjb25zdCBwYXlsb2FkID0ge1xuICAgIGlkOiByZXEuaWQsXG4gICAganNvbnJwYzogcmVxLmpzb25ycGMsXG4gICAgbWV0aG9kOiByZXEubWV0aG9kLFxuICAgIHBhcmFtczogcmVxLnBhcmFtc1xuICB9O1xuXG4gIC8vIGV4dHJhY3QgJ29yaWdpbicgcGFyYW1ldGVyIGZyb20gcmVxdWVzdFxuICBjb25zdCBvcmlnaW5Eb21haW4gPSByZXEub3JpZ2luO1xuXG4gIC8vIHNlcmlhbGl6ZSByZXF1ZXN0IGJvZHlcbiAgY29uc3Qgc2VyaWFsaXplZFBheWxvYWQgPSBKU09OLnN0cmluZ2lmeShwYXlsb2FkKTtcblxuICAvLyBjb25maWd1cmUgZmV0Y2ggcGFyYW1zXG4gIGNvbnN0IGZldGNoUGFyYW1zID0ge1xuICAgIG1ldGhvZDogXCJQT1NUXCIsXG4gICAgaGVhZGVyczoge1xuICAgICAgQWNjZXB0OiBcImFwcGxpY2F0aW9uL2pzb25cIixcbiAgICAgIFwiQ29udGVudC1UeXBlXCI6IFwiYXBwbGljYXRpb24vanNvblwiXG4gICAgfSxcbiAgICBib2R5OiBzZXJpYWxpemVkUGF5bG9hZFxuICB9O1xuXG4gIC8vIG9wdGlvbmFsOiBhZGQgcmVxdWVzdCBvcmlnaW4gYXMgaGVhZGVyXG4gIGlmIChvcmlnaW5IdHRwSGVhZGVyS2V5ICYmIG9yaWdpbkRvbWFpbikge1xuICAgIGZldGNoUGFyYW1zLmhlYWRlcnNbb3JpZ2luSHR0cEhlYWRlcktleV0gPSBvcmlnaW5Eb21haW47XG4gIH1cbiAgcmV0dXJuIHtcbiAgICBmZXRjaFVybDogcGFyc2VkVXJsLmhyZWYsXG4gICAgZmV0Y2hQYXJhbXNcbiAgfTtcbn1cbmZ1bmN0aW9uIGNyZWF0ZUZldGNoTWlkZGxld2FyZSh7XG4gIHJwY1RhcmdldCxcbiAgb3JpZ2luSHR0cEhlYWRlcktleVxufSkge1xuICByZXR1cm4gY3JlYXRlQXN5bmNNaWRkbGV3YXJlKGFzeW5jIChyZXEsIHJlcywgX25leHQpID0+IHtcbiAgICBjb25zdCB7XG4gICAgICBmZXRjaFVybCxcbiAgICAgIGZldGNoUGFyYW1zXG4gICAgfSA9IGNyZWF0ZUZldGNoQ29uZmlnRnJvbVJlcSh7XG4gICAgICByZXEsXG4gICAgICBycGNUYXJnZXQsXG4gICAgICBvcmlnaW5IdHRwSGVhZGVyS2V5XG4gICAgfSk7XG5cbiAgICAvLyBhdHRlbXB0IHJlcXVlc3QgbXVsdGlwbGUgdGltZXNcbiAgICBjb25zdCBtYXhBdHRlbXB0cyA9IDU7XG4gICAgY29uc3QgcmV0cnlJbnRlcnZhbCA9IDEwMDA7XG4gICAgZm9yIChsZXQgYXR0ZW1wdCA9IDA7IGF0dGVtcHQgPCBtYXhBdHRlbXB0czsgYXR0ZW1wdCsrKSB7XG4gICAgICB0cnkge1xuICAgICAgICBjb25zdCBmZXRjaFJlcyA9IGF3YWl0IGZldGNoKGZldGNoVXJsLCBmZXRjaFBhcmFtcyk7XG4gICAgICAgIC8vIGNoZWNrIGZvciBodHRwIGVycnJvcnNcbiAgICAgICAgY2hlY2tGb3JIdHRwRXJyb3JzKGZldGNoUmVzKTtcbiAgICAgICAgLy8gcGFyc2UgcmVzcG9uc2UgYm9keVxuICAgICAgICBjb25zdCBmZXRjaEJvZHkgPSBhd2FpdCBmZXRjaFJlcy5qc29uKCk7XG4gICAgICAgIGNvbnN0IHJlc3VsdCA9IHBhcnNlUmVzcG9uc2UoZmV0Y2hSZXMsIGZldGNoQm9keSk7XG4gICAgICAgIC8vIHNldCByZXN1bHQgYW5kIGV4aXQgcmV0cnkgbG9vcFxuICAgICAgICByZXMucmVzdWx0ID0gcmVzdWx0O1xuICAgICAgICByZXR1cm47XG4gICAgICB9IGNhdGNoIChlcnIpIHtcbiAgICAgICAgY29uc3QgZXJyTXNnID0gKGVyci5tZXNzYWdlIHx8IGVycikudG9TdHJpbmcoKTtcbiAgICAgICAgY29uc3QgaXNSZXRyaWFibGUgPSBSRVRSSUFCTEVfRVJST1JTLnNvbWUocGhyYXNlID0+IGVyck1zZy5pbmNsdWRlcyhwaHJhc2UpKTtcbiAgICAgICAgLy8gcmUtdGhyb3cgZXJyb3IgaWYgbm90IHJldHJpYWJsZVxuICAgICAgICBpZiAoIWlzUmV0cmlhYmxlKSB7XG4gICAgICAgICAgdGhyb3cgZXJyO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgICAvLyBkZWxheSBiZWZvcmUgcmV0cnlpbmdcbiAgICAgIGF3YWl0IHRpbWVvdXQocmV0cnlJbnRlcnZhbCk7XG4gICAgfVxuICB9KTtcbn1cblxuZXhwb3J0IHsgY3JlYXRlRmV0Y2hDb25maWdGcm9tUmVxLCBjcmVhdGVGZXRjaE1pZGRsZXdhcmUgfTtcbiJdLCJuYW1lcyI6W10sImlnbm9yZUxpc3QiOlswXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/@toruslabs/base-controllers/dist/lib.esm/Network/createFetchMiddleware.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/@toruslabs/base-controllers/dist/lib.esm/createEventEmitterProxy.js":
/*!******************************************************************************************!*\
  !*** ./node_modules/@toruslabs/base-controllers/dist/lib.esm/createEventEmitterProxy.js ***!
  \******************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   createEventEmitterProxy: () => (/* binding */ createEventEmitterProxy)\n/* harmony export */ });\nconst filterNoop = () => true;\nconst internalEvents = [\"newListener\", \"removeListener\"];\nconst externalEventFilter = name => !internalEvents.includes(name);\nfunction getRawListeners(eventEmitter, name) {\n  // prefer native\n  return typeof eventEmitter.rawListeners !== \"undefined\" ? eventEmitter.rawListeners(name) : eventEmitter.listeners(name);\n}\nfunction createEventEmitterProxy(initialTarget, opts) {\n  // parse options\n  const finalOpts = opts || {};\n  let eventFilter = finalOpts.eventFilter || filterNoop;\n  if (typeof eventFilter === \"string\" && eventFilter === \"skipInternal\") eventFilter = externalEventFilter;\n  if (typeof eventFilter !== \"function\") throw new Error(\"createEventEmitterProxy - Invalid eventFilter\");\n  let target = initialTarget;\n  let setTarget = newTarget => {\n    if (target === newTarget) return;\n    const oldTarget = target;\n    target = newTarget;\n    const eventNames = oldTarget.eventNames();\n    eventNames.filter(eventFilter).forEach(name => {\n      getRawListeners(oldTarget, name).forEach(handler => {\n        newTarget.on(name, handler);\n      });\n    });\n\n    // remove old listeners\n    oldTarget.removeAllListeners();\n  };\n  const proxy = new Proxy({}, {\n    get: (_, name) => {\n      // override `setTarget` access\n      if (name === \"setTarget\") return setTarget;\n      return target[name];\n    },\n    set: (_, name, value) => {\n      // allow `setTarget` overrides\n      if (name === \"setTarget\") {\n        setTarget = value;\n        return true;\n      }\n      target[name] = value;\n      return true;\n    },\n    has: (_, key) => {\n      if (key[0] === \"_\") {\n        return false;\n      }\n      return key in target;\n    }\n  });\n  return proxy;\n}\n\n\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvQHRvcnVzbGFicy9iYXNlLWNvbnRyb2xsZXJzL2Rpc3QvbGliLmVzbS9jcmVhdGVFdmVudEVtaXR0ZXJQcm94eS5qcyIsIm1hcHBpbmdzIjoiOzs7O0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxPQUFPO0FBQ1AsS0FBSzs7QUFFTDtBQUNBO0FBQ0E7QUFDQSw0QkFBNEI7QUFDNUI7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7QUFDQTs7QUFFbUMiLCJzb3VyY2VzIjpbIi9Vc2Vycy9hbmdlbGFoZXJyYWRvcmxvcGV6L0Rlc2t0b3AvQ1RCL01TMy91c2VjYXNlcy9ub2RlX21vZHVsZXMvQHRvcnVzbGFicy9iYXNlLWNvbnRyb2xsZXJzL2Rpc3QvbGliLmVzbS9jcmVhdGVFdmVudEVtaXR0ZXJQcm94eS5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyJjb25zdCBmaWx0ZXJOb29wID0gKCkgPT4gdHJ1ZTtcbmNvbnN0IGludGVybmFsRXZlbnRzID0gW1wibmV3TGlzdGVuZXJcIiwgXCJyZW1vdmVMaXN0ZW5lclwiXTtcbmNvbnN0IGV4dGVybmFsRXZlbnRGaWx0ZXIgPSBuYW1lID0+ICFpbnRlcm5hbEV2ZW50cy5pbmNsdWRlcyhuYW1lKTtcbmZ1bmN0aW9uIGdldFJhd0xpc3RlbmVycyhldmVudEVtaXR0ZXIsIG5hbWUpIHtcbiAgLy8gcHJlZmVyIG5hdGl2ZVxuICByZXR1cm4gdHlwZW9mIGV2ZW50RW1pdHRlci5yYXdMaXN0ZW5lcnMgIT09IFwidW5kZWZpbmVkXCIgPyBldmVudEVtaXR0ZXIucmF3TGlzdGVuZXJzKG5hbWUpIDogZXZlbnRFbWl0dGVyLmxpc3RlbmVycyhuYW1lKTtcbn1cbmZ1bmN0aW9uIGNyZWF0ZUV2ZW50RW1pdHRlclByb3h5KGluaXRpYWxUYXJnZXQsIG9wdHMpIHtcbiAgLy8gcGFyc2Ugb3B0aW9uc1xuICBjb25zdCBmaW5hbE9wdHMgPSBvcHRzIHx8IHt9O1xuICBsZXQgZXZlbnRGaWx0ZXIgPSBmaW5hbE9wdHMuZXZlbnRGaWx0ZXIgfHwgZmlsdGVyTm9vcDtcbiAgaWYgKHR5cGVvZiBldmVudEZpbHRlciA9PT0gXCJzdHJpbmdcIiAmJiBldmVudEZpbHRlciA9PT0gXCJza2lwSW50ZXJuYWxcIikgZXZlbnRGaWx0ZXIgPSBleHRlcm5hbEV2ZW50RmlsdGVyO1xuICBpZiAodHlwZW9mIGV2ZW50RmlsdGVyICE9PSBcImZ1bmN0aW9uXCIpIHRocm93IG5ldyBFcnJvcihcImNyZWF0ZUV2ZW50RW1pdHRlclByb3h5IC0gSW52YWxpZCBldmVudEZpbHRlclwiKTtcbiAgbGV0IHRhcmdldCA9IGluaXRpYWxUYXJnZXQ7XG4gIGxldCBzZXRUYXJnZXQgPSBuZXdUYXJnZXQgPT4ge1xuICAgIGlmICh0YXJnZXQgPT09IG5ld1RhcmdldCkgcmV0dXJuO1xuICAgIGNvbnN0IG9sZFRhcmdldCA9IHRhcmdldDtcbiAgICB0YXJnZXQgPSBuZXdUYXJnZXQ7XG4gICAgY29uc3QgZXZlbnROYW1lcyA9IG9sZFRhcmdldC5ldmVudE5hbWVzKCk7XG4gICAgZXZlbnROYW1lcy5maWx0ZXIoZXZlbnRGaWx0ZXIpLmZvckVhY2gobmFtZSA9PiB7XG4gICAgICBnZXRSYXdMaXN0ZW5lcnMob2xkVGFyZ2V0LCBuYW1lKS5mb3JFYWNoKGhhbmRsZXIgPT4ge1xuICAgICAgICBuZXdUYXJnZXQub24obmFtZSwgaGFuZGxlcik7XG4gICAgICB9KTtcbiAgICB9KTtcblxuICAgIC8vIHJlbW92ZSBvbGQgbGlzdGVuZXJzXG4gICAgb2xkVGFyZ2V0LnJlbW92ZUFsbExpc3RlbmVycygpO1xuICB9O1xuICBjb25zdCBwcm94eSA9IG5ldyBQcm94eSh7fSwge1xuICAgIGdldDogKF8sIG5hbWUpID0+IHtcbiAgICAgIC8vIG92ZXJyaWRlIGBzZXRUYXJnZXRgIGFjY2Vzc1xuICAgICAgaWYgKG5hbWUgPT09IFwic2V0VGFyZ2V0XCIpIHJldHVybiBzZXRUYXJnZXQ7XG4gICAgICByZXR1cm4gdGFyZ2V0W25hbWVdO1xuICAgIH0sXG4gICAgc2V0OiAoXywgbmFtZSwgdmFsdWUpID0+IHtcbiAgICAgIC8vIGFsbG93IGBzZXRUYXJnZXRgIG92ZXJyaWRlc1xuICAgICAgaWYgKG5hbWUgPT09IFwic2V0VGFyZ2V0XCIpIHtcbiAgICAgICAgc2V0VGFyZ2V0ID0gdmFsdWU7XG4gICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgfVxuICAgICAgdGFyZ2V0W25hbWVdID0gdmFsdWU7XG4gICAgICByZXR1cm4gdHJ1ZTtcbiAgICB9LFxuICAgIGhhczogKF8sIGtleSkgPT4ge1xuICAgICAgaWYgKGtleVswXSA9PT0gXCJfXCIpIHtcbiAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgfVxuICAgICAgcmV0dXJuIGtleSBpbiB0YXJnZXQ7XG4gICAgfVxuICB9KTtcbiAgcmV0dXJuIHByb3h5O1xufVxuXG5leHBvcnQgeyBjcmVhdGVFdmVudEVtaXR0ZXJQcm94eSB9O1xuIl0sIm5hbWVzIjpbXSwiaWdub3JlTGlzdCI6WzBdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/@toruslabs/base-controllers/dist/lib.esm/createEventEmitterProxy.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/@toruslabs/base-controllers/dist/lib.esm/utils/lodashUtils.js":
/*!************************************************************************************!*\
  !*** ./node_modules/@toruslabs/base-controllers/dist/lib.esm/utils/lodashUtils.js ***!
  \************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   cloneDeep: () => (/* binding */ cloneDeep),\n/* harmony export */   omitBy: () => (/* binding */ omitBy),\n/* harmony export */   pickBy: () => (/* binding */ pickBy)\n/* harmony export */ });\nfunction omitBy(object, predicate) {\n  // Create a new object to store the results\n  const result = {};\n\n  // Iterate over all own properties of the object\n  for (const [key, value] of Object.entries(object)) {\n    if (!predicate(value, key)) {\n      result[key] = value;\n    }\n  }\n  return result;\n}\nfunction pickBy(object, predicate) {\n  // Create a new object to store the results\n  const result = {};\n  for (const [key, value] of Object.entries(object)) {\n    if (predicate(value, key)) {\n      result[key] = value;\n    }\n  }\n  return result;\n}\nfunction cloneDeep(object) {\n  try {\n    return structuredClone(object);\n  } catch (error) {\n    return JSON.parse(JSON.stringify(object, (_, v) => typeof v === \"bigint\" ? v.toString() : v));\n  }\n}\n\n\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvQHRvcnVzbGFicy9iYXNlLWNvbnRyb2xsZXJzL2Rpc3QvbGliLmVzbS91dGlscy9sb2Rhc2hVdGlscy5qcyIsIm1hcHBpbmdzIjoiOzs7Ozs7QUFBQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsSUFBSTtBQUNKO0FBQ0E7QUFDQTs7QUFFcUMiLCJzb3VyY2VzIjpbIi9Vc2Vycy9hbmdlbGFoZXJyYWRvcmxvcGV6L0Rlc2t0b3AvQ1RCL01TMy91c2VjYXNlcy9ub2RlX21vZHVsZXMvQHRvcnVzbGFicy9iYXNlLWNvbnRyb2xsZXJzL2Rpc3QvbGliLmVzbS91dGlscy9sb2Rhc2hVdGlscy5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyJmdW5jdGlvbiBvbWl0Qnkob2JqZWN0LCBwcmVkaWNhdGUpIHtcbiAgLy8gQ3JlYXRlIGEgbmV3IG9iamVjdCB0byBzdG9yZSB0aGUgcmVzdWx0c1xuICBjb25zdCByZXN1bHQgPSB7fTtcblxuICAvLyBJdGVyYXRlIG92ZXIgYWxsIG93biBwcm9wZXJ0aWVzIG9mIHRoZSBvYmplY3RcbiAgZm9yIChjb25zdCBba2V5LCB2YWx1ZV0gb2YgT2JqZWN0LmVudHJpZXMob2JqZWN0KSkge1xuICAgIGlmICghcHJlZGljYXRlKHZhbHVlLCBrZXkpKSB7XG4gICAgICByZXN1bHRba2V5XSA9IHZhbHVlO1xuICAgIH1cbiAgfVxuICByZXR1cm4gcmVzdWx0O1xufVxuZnVuY3Rpb24gcGlja0J5KG9iamVjdCwgcHJlZGljYXRlKSB7XG4gIC8vIENyZWF0ZSBhIG5ldyBvYmplY3QgdG8gc3RvcmUgdGhlIHJlc3VsdHNcbiAgY29uc3QgcmVzdWx0ID0ge307XG4gIGZvciAoY29uc3QgW2tleSwgdmFsdWVdIG9mIE9iamVjdC5lbnRyaWVzKG9iamVjdCkpIHtcbiAgICBpZiAocHJlZGljYXRlKHZhbHVlLCBrZXkpKSB7XG4gICAgICByZXN1bHRba2V5XSA9IHZhbHVlO1xuICAgIH1cbiAgfVxuICByZXR1cm4gcmVzdWx0O1xufVxuZnVuY3Rpb24gY2xvbmVEZWVwKG9iamVjdCkge1xuICB0cnkge1xuICAgIHJldHVybiBzdHJ1Y3R1cmVkQ2xvbmUob2JqZWN0KTtcbiAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICByZXR1cm4gSlNPTi5wYXJzZShKU09OLnN0cmluZ2lmeShvYmplY3QsIChfLCB2KSA9PiB0eXBlb2YgdiA9PT0gXCJiaWdpbnRcIiA/IHYudG9TdHJpbmcoKSA6IHYpKTtcbiAgfVxufVxuXG5leHBvcnQgeyBjbG9uZURlZXAsIG9taXRCeSwgcGlja0J5IH07XG4iXSwibmFtZXMiOltdLCJpZ25vcmVMaXN0IjpbMF0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/@toruslabs/base-controllers/dist/lib.esm/utils/lodashUtils.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/@toruslabs/base-controllers/dist/lib.esm/utils/utils.js":
/*!******************************************************************************!*\
  !*** ./node_modules/@toruslabs/base-controllers/dist/lib.esm/utils/utils.js ***!
  \******************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   UserError: () => (/* binding */ UserError),\n/* harmony export */   addressSlicer: () => (/* binding */ addressSlicer),\n/* harmony export */   broadcastChannelOptions: () => (/* binding */ broadcastChannelOptions),\n/* harmony export */   concatSig: () => (/* binding */ concatSig),\n/* harmony export */   formatDate: () => (/* binding */ formatDate),\n/* harmony export */   formatSmallNumbers: () => (/* binding */ formatSmallNumbers),\n/* harmony export */   formatTime: () => (/* binding */ formatTime),\n/* harmony export */   getCustomDeviceInfo: () => (/* binding */ getCustomDeviceInfo),\n/* harmony export */   getHeaders: () => (/* binding */ getHeaders),\n/* harmony export */   getPopupFeatures: () => (/* binding */ getPopupFeatures),\n/* harmony export */   handleRedirectParameters: () => (/* binding */ handleRedirectParameters),\n/* harmony export */   hashMessage: () => (/* binding */ hashMessage),\n/* harmony export */   intToHex: () => (/* binding */ intToHex),\n/* harmony export */   isUnauthorizedError: () => (/* binding */ isUnauthorizedError),\n/* harmony export */   padWithZeroes: () => (/* binding */ padWithZeroes),\n/* harmony export */   randomId: () => (/* binding */ randomId),\n/* harmony export */   signMessage: () => (/* binding */ signMessage),\n/* harmony export */   significantDigits: () => (/* binding */ significantDigits),\n/* harmony export */   sleep: () => (/* binding */ sleep),\n/* harmony export */   timeout: () => (/* binding */ timeout),\n/* harmony export */   transactionMatchesNetwork: () => (/* binding */ transactionMatchesNetwork)\n/* harmony export */ });\n/* harmony import */ var _ethereumjs_util__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @ethereumjs/util */ \"(ssr)/./node_modules/@ethereumjs/util/dist/esm/index.js\");\n/* harmony import */ var _web3auth_auth__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @web3auth/auth */ \"(ssr)/./node_modules/@web3auth/auth/dist/lib.esm/utils/utils.js\");\n/* harmony import */ var bignumber_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! bignumber.js */ \"(ssr)/./node_modules/bignumber.js/bignumber.mjs\");\n\n\n\n\n/**\n * General utility functions\n */\n\nfunction intToHex(i) {\n  const hex = i.toString(16);\n  return `0x${hex}`;\n}\n\n/**\n * Returns a random number. Don't use for cryptographic purposes.\n * @returns a random number\n */\nconst randomId = () => Math.random().toString(36).slice(2);\n\n/**\n * Pads the front of the given hex string with zeroes until it reaches the\n * target length. If the input string is already longer than or equal to the\n * target length, it is returned unmodified.\n *\n * If the input string is \"0x\"-prefixed or not a hex string, an error will be\n * thrown.\n *\n * @param hexString - The hexadecimal string to pad with zeroes.\n * @param targetLength - The target length of the hexadecimal string.\n * @returns The input string front-padded with zeroes, or the original string\n * if it was already greater than or equal to to the target length.\n */\nfunction padWithZeroes(hexString, targetLength) {\n  if (hexString !== \"\" && !/^[a-f0-9]+$/iu.test(hexString)) {\n    throw new Error(`Expected an unprefixed hex string. Received: ${hexString}`);\n  }\n  if (targetLength < 0) {\n    throw new Error(`Expected a non-negative integer target length. Received: ${targetLength}`);\n  }\n  return String.prototype.padStart.call(hexString, targetLength, \"0\");\n}\n/**\n * Concatenate an extended ECDSA signature into a hex string.\n *\n * @param v - The 'v' portion of the signature.\n * @param r - The 'r' portion of the signature.\n * @param s - The 's' portion of the signature.\n * @returns The concatenated ECDSA signature.\n */\nfunction concatSig(v, r, s) {\n  const rSig = (0,_ethereumjs_util__WEBPACK_IMPORTED_MODULE_0__.fromSigned)(r);\n  const sSig = (0,_ethereumjs_util__WEBPACK_IMPORTED_MODULE_0__.fromSigned)(s);\n  const vSig = (0,_ethereumjs_util__WEBPACK_IMPORTED_MODULE_0__.bytesToBigInt)(v);\n  const rStr = padWithZeroes(Buffer.from((0,_ethereumjs_util__WEBPACK_IMPORTED_MODULE_0__.toUnsigned)(rSig)).toString(\"hex\"), 64);\n  const sStr = padWithZeroes(Buffer.from((0,_ethereumjs_util__WEBPACK_IMPORTED_MODULE_0__.toUnsigned)(sSig)).toString(\"hex\"), 64);\n  const vStr = (0,_ethereumjs_util__WEBPACK_IMPORTED_MODULE_0__.stripHexPrefix)((0,_ethereumjs_util__WEBPACK_IMPORTED_MODULE_0__.bigIntToHex)(vSig));\n  return (0,_ethereumjs_util__WEBPACK_IMPORTED_MODULE_0__.addHexPrefix)(rStr.concat(sStr, vStr));\n}\nfunction timeout(duration) {\n  return new Promise(resolve => {\n    const timeoutRef = window.setTimeout(() => {\n      resolve();\n      window.clearTimeout(timeoutRef);\n    }, duration);\n  });\n}\nconst getHeaders = (jwt, publicAddress) => {\n  return {\n    headers: {\n      Authorization: `Bearer ${jwt}`,\n      \"Content-Type\": \"application/json; charset=utf-8\",\n      \"public-address\": publicAddress\n    }\n  };\n};\n\n/**\n * Text/number formatting utilities\n */\nconst formatSmallNumbers = (number, currency = \"usd\", noTilde = false) => {\n  const finalNumber = bignumber_js__WEBPACK_IMPORTED_MODULE_1__[\"default\"].isBigNumber(number) ? number.toNumber() : number;\n  if (!Number.isFinite(finalNumber)) return \"\";\n  const value = currency.toLowerCase() === \"usd\" ? parseFloat(Number(finalNumber).toFixed(2)) : parseFloat(Number(finalNumber).toFixed(5));\n  const tilde = value > 0 ? \"~ \" : \"\";\n  return `${currency.toLowerCase() === \"usd\" || noTilde ? \"\" : tilde}${Number(value)} ${currency.toUpperCase()}`;\n};\nconst addressSlicer = (address, sliceLength = 5) => {\n  if (!address) return \"\";\n  if (address.length < 11) {\n    return address;\n  }\n  if (typeof address !== \"string\") return \"\";\n  return `${address.slice(0, sliceLength)}...${address.slice(-sliceLength)}`;\n};\nconst significantDigits = (number, perc = false, length_ = 2) => {\n  let input = !bignumber_js__WEBPACK_IMPORTED_MODULE_1__[\"default\"].isBigNumber(number) ? new bignumber_js__WEBPACK_IMPORTED_MODULE_1__[\"default\"](number) : number;\n  if (input.isZero()) return input;\n  if (perc) {\n    input = input.times(new bignumber_js__WEBPACK_IMPORTED_MODULE_1__[\"default\"](100));\n  }\n  let depth;\n  if (input.gte(new bignumber_js__WEBPACK_IMPORTED_MODULE_1__[\"default\"](1))) {\n    depth = length_;\n  } else {\n    depth = length_ - 1 + Math.ceil(Math.log10(new bignumber_js__WEBPACK_IMPORTED_MODULE_1__[\"default\"](\"1\").div(input).toNumber()));\n  }\n  const shift = new bignumber_js__WEBPACK_IMPORTED_MODULE_1__[\"default\"](10).pow(new bignumber_js__WEBPACK_IMPORTED_MODULE_1__[\"default\"](depth));\n  const roundedNumber = Math.round(shift.times(input).toNumber()) / shift.toNumber();\n  return roundedNumber;\n};\nconst formatDate = inputDate => {\n  const monthList = [\"Jan\", \"Feb\", \"Mar\", \"Apr\", \"May\", \"Jun\", \"Jul\", \"Aug\", \"Sep\", \"Oct\", \"Nov\", \"Dec\"];\n  const date = new Date(inputDate);\n  const day = date.getDate();\n  const month = monthList[date.getMonth()];\n  const year = date.getFullYear();\n  return `${day} ${month} ${year}`;\n};\nconst formatTime = time => {\n  return new Date(time).toTimeString().slice(0, 8);\n};\n\n/**\n * Network utilities\n */\nconst transactionMatchesNetwork = (transaction, chainId) => {\n  if (typeof transaction.chainId !== \"undefined\") {\n    return transaction.chainId === chainId;\n  }\n  return false;\n};\n\n/**\n * Signing utils\n */\nconst hashMessage = message => {\n  const bufferedMessage = Buffer.from(message, \"utf8\");\n  const el = (0,_ethereumjs_util__WEBPACK_IMPORTED_MODULE_0__.hashPersonalMessage)(bufferedMessage);\n  return Buffer.from(el);\n};\nconst signMessage = async (privateKey, data) => {\n  const privKey = Buffer.from(privateKey, \"hex\");\n  const message = (0,_ethereumjs_util__WEBPACK_IMPORTED_MODULE_0__.stripHexPrefix)(data);\n  const msgSig = (0,_ethereumjs_util__WEBPACK_IMPORTED_MODULE_0__.ecsign)(Buffer.from(message, \"hex\"), privKey);\n  const rawMsgSig = concatSig(Buffer.from((0,_ethereumjs_util__WEBPACK_IMPORTED_MODULE_0__.bigIntToBytes)(msgSig.v)), Buffer.from(msgSig.r), Buffer.from(msgSig.s));\n  return rawMsgSig;\n};\n\n/**\n * popup handler utils\n */\nfunction getPopupFeatures({\n  width: w,\n  height: h\n}) {\n  // Fixes dual-screen position                             Most browsers      Firefox\n  const dualScreenLeft = window.screenLeft !== undefined ? window.screenLeft : window.screenX;\n  const dualScreenTop = window.screenTop !== undefined ? window.screenTop : window.screenY;\n  const width = window.innerWidth ? window.innerWidth : document.documentElement.clientWidth ? document.documentElement.clientWidth : window.screen.width;\n  const height = window.innerHeight ? window.innerHeight : document.documentElement.clientHeight ? document.documentElement.clientHeight : window.screen.height;\n  const systemZoom = 1; // No reliable estimate\n\n  const left = Math.abs((width - w) / 2 / systemZoom + dualScreenLeft);\n  const top = Math.abs((height - h) / 2 / systemZoom + dualScreenTop);\n  const features = `titlebar=0,toolbar=0,status=0,location=0,menubar=0,height=${h / systemZoom},width=${w / systemZoom},top=${top},left=${left}`;\n  return features;\n}\nconst broadcastChannelOptions = {\n  type: \"server\",\n  // type: 'localstorage', // (optional) enforce a type, oneOf['native', 'idb', 'localstorage', 'node']\n  webWorkerSupport: false // (optional) set this to false if you know that your channel will never be used in a WebWorker (increases performance)\n};\nfunction getCustomDeviceInfo() {\n  var _navigator;\n  // eslint-disable-next-line @typescript-eslint/no-explicit-any\n  if ((_navigator = navigator) !== null && _navigator !== void 0 && _navigator.brave) {\n    return {\n      browser: \"Brave\"\n    };\n  }\n}\nclass UserError extends Error {}\nconst handleRedirectParameters = (hash, queryParameters) => {\n  const hashParameters = {};\n  const hashUrl = new URL(`${window.location.origin}/?${hash.slice(1)}`);\n  hashUrl.searchParams.forEach((value, key) => {\n    hashParameters[key] = value;\n  });\n  let instanceParameters = {};\n  let error = \"\";\n  if (!queryParameters.windowId) {\n    if (Object.keys(hashParameters).length > 0 && hashParameters.state) {\n      instanceParameters = JSON.parse((0,_web3auth_auth__WEBPACK_IMPORTED_MODULE_2__.safeatob)(decodeURIComponent(decodeURIComponent(hashParameters.state)))) || {};\n      error = hashParameters.error_description || hashParameters.error || error;\n    } else if (Object.keys(queryParameters).length > 0 && queryParameters.state) {\n      instanceParameters = JSON.parse((0,_web3auth_auth__WEBPACK_IMPORTED_MODULE_2__.safeatob)(decodeURIComponent(decodeURIComponent(queryParameters.state)))) || {};\n      if (queryParameters.error) error = queryParameters.error;\n    }\n  }\n  return {\n    error,\n    instanceParameters,\n    hashParameters\n  };\n};\nfunction sleep(ms) {\n  return new Promise(resolve => {\n    setTimeout(resolve, ms);\n  });\n}\nconst isUnauthorizedError = error => {\n  return error instanceof Response && error.status === 401;\n};\n\n\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvQHRvcnVzbGFicy9iYXNlLWNvbnRyb2xsZXJzL2Rpc3QvbGliLmVzbS91dGlscy91dGlscy5qcyIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7QUFBZ0s7QUFDdEg7QUFDTDs7QUFFckM7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQSxjQUFjLElBQUk7QUFDbEI7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxvRUFBb0UsVUFBVTtBQUM5RTtBQUNBO0FBQ0EsZ0ZBQWdGLGFBQWE7QUFDN0Y7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsZUFBZSw0REFBVTtBQUN6QixlQUFlLDREQUFVO0FBQ3pCLGVBQWUsK0RBQWE7QUFDNUIseUNBQXlDLDREQUFVO0FBQ25ELHlDQUF5Qyw0REFBVTtBQUNuRCxlQUFlLGdFQUFjLENBQUMsNkRBQVc7QUFDekMsU0FBUyw4REFBWTtBQUNyQjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0wsR0FBRztBQUNIO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsK0JBQStCLElBQUk7QUFDbkMseUNBQXlDO0FBQ3pDO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esc0JBQXNCLG9EQUFTO0FBQy9CO0FBQ0E7QUFDQTtBQUNBLFlBQVkseURBQXlELEVBQUUsZUFBZSxFQUFFLHVCQUF1QjtBQUMvRztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFlBQVksOEJBQThCLEtBQUssNEJBQTRCO0FBQzNFO0FBQ0E7QUFDQSxlQUFlLG9EQUFTLDJCQUEyQixvREFBUztBQUM1RDtBQUNBO0FBQ0EsNEJBQTRCLG9EQUFTO0FBQ3JDO0FBQ0E7QUFDQSxvQkFBb0Isb0RBQVM7QUFDN0I7QUFDQSxJQUFJO0FBQ0osbURBQW1ELG9EQUFTO0FBQzVEO0FBQ0Esb0JBQW9CLG9EQUFTLGFBQWEsb0RBQVM7QUFDbkQ7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsWUFBWSxLQUFLLEVBQUUsT0FBTyxFQUFFLEtBQUs7QUFDakM7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxhQUFhLHFFQUFtQjtBQUNoQztBQUNBO0FBQ0E7QUFDQTtBQUNBLGtCQUFrQixnRUFBYztBQUNoQyxpQkFBaUIsd0RBQU07QUFDdkIsMENBQTBDLCtEQUFhO0FBQ3ZEO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsQ0FBQztBQUNEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSx3QkFBd0I7O0FBRXhCO0FBQ0E7QUFDQSxnRkFBZ0YsZUFBZSxTQUFTLGVBQWUsT0FBTyxJQUFJLFFBQVEsS0FBSztBQUMvSTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLDZCQUE2Qix1QkFBdUIsSUFBSSxjQUFjO0FBQ3RFO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7QUFDQTtBQUNBO0FBQ0E7QUFDQSxzQ0FBc0Msd0RBQVE7QUFDOUM7QUFDQSxNQUFNO0FBQ04sc0NBQXNDLHdEQUFRO0FBQzlDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEdBQUc7QUFDSDtBQUNBO0FBQ0E7QUFDQTs7QUFFaVYiLCJzb3VyY2VzIjpbIi9Vc2Vycy9hbmdlbGFoZXJyYWRvcmxvcGV6L0Rlc2t0b3AvQ1RCL01TMy91c2VjYXNlcy9ub2RlX21vZHVsZXMvQHRvcnVzbGFicy9iYXNlLWNvbnRyb2xsZXJzL2Rpc3QvbGliLmVzbS91dGlscy91dGlscy5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBmcm9tU2lnbmVkLCBieXRlc1RvQmlnSW50LCB0b1Vuc2lnbmVkLCBzdHJpcEhleFByZWZpeCwgYmlnSW50VG9IZXgsIGFkZEhleFByZWZpeCwgaGFzaFBlcnNvbmFsTWVzc2FnZSwgZWNzaWduLCBiaWdJbnRUb0J5dGVzIH0gZnJvbSAnQGV0aGVyZXVtanMvdXRpbCc7XG5pbXBvcnQgeyBzYWZlYXRvYiB9IGZyb20gJ0B3ZWIzYXV0aC9hdXRoJztcbmltcG9ydCBCaWdOdW1iZXIgZnJvbSAnYmlnbnVtYmVyLmpzJztcblxuLyoqXG4gKiBHZW5lcmFsIHV0aWxpdHkgZnVuY3Rpb25zXG4gKi9cblxuZnVuY3Rpb24gaW50VG9IZXgoaSkge1xuICBjb25zdCBoZXggPSBpLnRvU3RyaW5nKDE2KTtcbiAgcmV0dXJuIGAweCR7aGV4fWA7XG59XG5cbi8qKlxuICogUmV0dXJucyBhIHJhbmRvbSBudW1iZXIuIERvbid0IHVzZSBmb3IgY3J5cHRvZ3JhcGhpYyBwdXJwb3Nlcy5cbiAqIEByZXR1cm5zIGEgcmFuZG9tIG51bWJlclxuICovXG5jb25zdCByYW5kb21JZCA9ICgpID0+IE1hdGgucmFuZG9tKCkudG9TdHJpbmcoMzYpLnNsaWNlKDIpO1xuXG4vKipcbiAqIFBhZHMgdGhlIGZyb250IG9mIHRoZSBnaXZlbiBoZXggc3RyaW5nIHdpdGggemVyb2VzIHVudGlsIGl0IHJlYWNoZXMgdGhlXG4gKiB0YXJnZXQgbGVuZ3RoLiBJZiB0aGUgaW5wdXQgc3RyaW5nIGlzIGFscmVhZHkgbG9uZ2VyIHRoYW4gb3IgZXF1YWwgdG8gdGhlXG4gKiB0YXJnZXQgbGVuZ3RoLCBpdCBpcyByZXR1cm5lZCB1bm1vZGlmaWVkLlxuICpcbiAqIElmIHRoZSBpbnB1dCBzdHJpbmcgaXMgXCIweFwiLXByZWZpeGVkIG9yIG5vdCBhIGhleCBzdHJpbmcsIGFuIGVycm9yIHdpbGwgYmVcbiAqIHRocm93bi5cbiAqXG4gKiBAcGFyYW0gaGV4U3RyaW5nIC0gVGhlIGhleGFkZWNpbWFsIHN0cmluZyB0byBwYWQgd2l0aCB6ZXJvZXMuXG4gKiBAcGFyYW0gdGFyZ2V0TGVuZ3RoIC0gVGhlIHRhcmdldCBsZW5ndGggb2YgdGhlIGhleGFkZWNpbWFsIHN0cmluZy5cbiAqIEByZXR1cm5zIFRoZSBpbnB1dCBzdHJpbmcgZnJvbnQtcGFkZGVkIHdpdGggemVyb2VzLCBvciB0aGUgb3JpZ2luYWwgc3RyaW5nXG4gKiBpZiBpdCB3YXMgYWxyZWFkeSBncmVhdGVyIHRoYW4gb3IgZXF1YWwgdG8gdG8gdGhlIHRhcmdldCBsZW5ndGguXG4gKi9cbmZ1bmN0aW9uIHBhZFdpdGhaZXJvZXMoaGV4U3RyaW5nLCB0YXJnZXRMZW5ndGgpIHtcbiAgaWYgKGhleFN0cmluZyAhPT0gXCJcIiAmJiAhL15bYS1mMC05XSskL2l1LnRlc3QoaGV4U3RyaW5nKSkge1xuICAgIHRocm93IG5ldyBFcnJvcihgRXhwZWN0ZWQgYW4gdW5wcmVmaXhlZCBoZXggc3RyaW5nLiBSZWNlaXZlZDogJHtoZXhTdHJpbmd9YCk7XG4gIH1cbiAgaWYgKHRhcmdldExlbmd0aCA8IDApIHtcbiAgICB0aHJvdyBuZXcgRXJyb3IoYEV4cGVjdGVkIGEgbm9uLW5lZ2F0aXZlIGludGVnZXIgdGFyZ2V0IGxlbmd0aC4gUmVjZWl2ZWQ6ICR7dGFyZ2V0TGVuZ3RofWApO1xuICB9XG4gIHJldHVybiBTdHJpbmcucHJvdG90eXBlLnBhZFN0YXJ0LmNhbGwoaGV4U3RyaW5nLCB0YXJnZXRMZW5ndGgsIFwiMFwiKTtcbn1cbi8qKlxuICogQ29uY2F0ZW5hdGUgYW4gZXh0ZW5kZWQgRUNEU0Egc2lnbmF0dXJlIGludG8gYSBoZXggc3RyaW5nLlxuICpcbiAqIEBwYXJhbSB2IC0gVGhlICd2JyBwb3J0aW9uIG9mIHRoZSBzaWduYXR1cmUuXG4gKiBAcGFyYW0gciAtIFRoZSAncicgcG9ydGlvbiBvZiB0aGUgc2lnbmF0dXJlLlxuICogQHBhcmFtIHMgLSBUaGUgJ3MnIHBvcnRpb24gb2YgdGhlIHNpZ25hdHVyZS5cbiAqIEByZXR1cm5zIFRoZSBjb25jYXRlbmF0ZWQgRUNEU0Egc2lnbmF0dXJlLlxuICovXG5mdW5jdGlvbiBjb25jYXRTaWcodiwgciwgcykge1xuICBjb25zdCByU2lnID0gZnJvbVNpZ25lZChyKTtcbiAgY29uc3Qgc1NpZyA9IGZyb21TaWduZWQocyk7XG4gIGNvbnN0IHZTaWcgPSBieXRlc1RvQmlnSW50KHYpO1xuICBjb25zdCByU3RyID0gcGFkV2l0aFplcm9lcyhCdWZmZXIuZnJvbSh0b1Vuc2lnbmVkKHJTaWcpKS50b1N0cmluZyhcImhleFwiKSwgNjQpO1xuICBjb25zdCBzU3RyID0gcGFkV2l0aFplcm9lcyhCdWZmZXIuZnJvbSh0b1Vuc2lnbmVkKHNTaWcpKS50b1N0cmluZyhcImhleFwiKSwgNjQpO1xuICBjb25zdCB2U3RyID0gc3RyaXBIZXhQcmVmaXgoYmlnSW50VG9IZXgodlNpZykpO1xuICByZXR1cm4gYWRkSGV4UHJlZml4KHJTdHIuY29uY2F0KHNTdHIsIHZTdHIpKTtcbn1cbmZ1bmN0aW9uIHRpbWVvdXQoZHVyYXRpb24pIHtcbiAgcmV0dXJuIG5ldyBQcm9taXNlKHJlc29sdmUgPT4ge1xuICAgIGNvbnN0IHRpbWVvdXRSZWYgPSB3aW5kb3cuc2V0VGltZW91dCgoKSA9PiB7XG4gICAgICByZXNvbHZlKCk7XG4gICAgICB3aW5kb3cuY2xlYXJUaW1lb3V0KHRpbWVvdXRSZWYpO1xuICAgIH0sIGR1cmF0aW9uKTtcbiAgfSk7XG59XG5jb25zdCBnZXRIZWFkZXJzID0gKGp3dCwgcHVibGljQWRkcmVzcykgPT4ge1xuICByZXR1cm4ge1xuICAgIGhlYWRlcnM6IHtcbiAgICAgIEF1dGhvcml6YXRpb246IGBCZWFyZXIgJHtqd3R9YCxcbiAgICAgIFwiQ29udGVudC1UeXBlXCI6IFwiYXBwbGljYXRpb24vanNvbjsgY2hhcnNldD11dGYtOFwiLFxuICAgICAgXCJwdWJsaWMtYWRkcmVzc1wiOiBwdWJsaWNBZGRyZXNzXG4gICAgfVxuICB9O1xufTtcblxuLyoqXG4gKiBUZXh0L251bWJlciBmb3JtYXR0aW5nIHV0aWxpdGllc1xuICovXG5jb25zdCBmb3JtYXRTbWFsbE51bWJlcnMgPSAobnVtYmVyLCBjdXJyZW5jeSA9IFwidXNkXCIsIG5vVGlsZGUgPSBmYWxzZSkgPT4ge1xuICBjb25zdCBmaW5hbE51bWJlciA9IEJpZ051bWJlci5pc0JpZ051bWJlcihudW1iZXIpID8gbnVtYmVyLnRvTnVtYmVyKCkgOiBudW1iZXI7XG4gIGlmICghTnVtYmVyLmlzRmluaXRlKGZpbmFsTnVtYmVyKSkgcmV0dXJuIFwiXCI7XG4gIGNvbnN0IHZhbHVlID0gY3VycmVuY3kudG9Mb3dlckNhc2UoKSA9PT0gXCJ1c2RcIiA/IHBhcnNlRmxvYXQoTnVtYmVyKGZpbmFsTnVtYmVyKS50b0ZpeGVkKDIpKSA6IHBhcnNlRmxvYXQoTnVtYmVyKGZpbmFsTnVtYmVyKS50b0ZpeGVkKDUpKTtcbiAgY29uc3QgdGlsZGUgPSB2YWx1ZSA+IDAgPyBcIn4gXCIgOiBcIlwiO1xuICByZXR1cm4gYCR7Y3VycmVuY3kudG9Mb3dlckNhc2UoKSA9PT0gXCJ1c2RcIiB8fCBub1RpbGRlID8gXCJcIiA6IHRpbGRlfSR7TnVtYmVyKHZhbHVlKX0gJHtjdXJyZW5jeS50b1VwcGVyQ2FzZSgpfWA7XG59O1xuY29uc3QgYWRkcmVzc1NsaWNlciA9IChhZGRyZXNzLCBzbGljZUxlbmd0aCA9IDUpID0+IHtcbiAgaWYgKCFhZGRyZXNzKSByZXR1cm4gXCJcIjtcbiAgaWYgKGFkZHJlc3MubGVuZ3RoIDwgMTEpIHtcbiAgICByZXR1cm4gYWRkcmVzcztcbiAgfVxuICBpZiAodHlwZW9mIGFkZHJlc3MgIT09IFwic3RyaW5nXCIpIHJldHVybiBcIlwiO1xuICByZXR1cm4gYCR7YWRkcmVzcy5zbGljZSgwLCBzbGljZUxlbmd0aCl9Li4uJHthZGRyZXNzLnNsaWNlKC1zbGljZUxlbmd0aCl9YDtcbn07XG5jb25zdCBzaWduaWZpY2FudERpZ2l0cyA9IChudW1iZXIsIHBlcmMgPSBmYWxzZSwgbGVuZ3RoXyA9IDIpID0+IHtcbiAgbGV0IGlucHV0ID0gIUJpZ051bWJlci5pc0JpZ051bWJlcihudW1iZXIpID8gbmV3IEJpZ051bWJlcihudW1iZXIpIDogbnVtYmVyO1xuICBpZiAoaW5wdXQuaXNaZXJvKCkpIHJldHVybiBpbnB1dDtcbiAgaWYgKHBlcmMpIHtcbiAgICBpbnB1dCA9IGlucHV0LnRpbWVzKG5ldyBCaWdOdW1iZXIoMTAwKSk7XG4gIH1cbiAgbGV0IGRlcHRoO1xuICBpZiAoaW5wdXQuZ3RlKG5ldyBCaWdOdW1iZXIoMSkpKSB7XG4gICAgZGVwdGggPSBsZW5ndGhfO1xuICB9IGVsc2Uge1xuICAgIGRlcHRoID0gbGVuZ3RoXyAtIDEgKyBNYXRoLmNlaWwoTWF0aC5sb2cxMChuZXcgQmlnTnVtYmVyKFwiMVwiKS5kaXYoaW5wdXQpLnRvTnVtYmVyKCkpKTtcbiAgfVxuICBjb25zdCBzaGlmdCA9IG5ldyBCaWdOdW1iZXIoMTApLnBvdyhuZXcgQmlnTnVtYmVyKGRlcHRoKSk7XG4gIGNvbnN0IHJvdW5kZWROdW1iZXIgPSBNYXRoLnJvdW5kKHNoaWZ0LnRpbWVzKGlucHV0KS50b051bWJlcigpKSAvIHNoaWZ0LnRvTnVtYmVyKCk7XG4gIHJldHVybiByb3VuZGVkTnVtYmVyO1xufTtcbmNvbnN0IGZvcm1hdERhdGUgPSBpbnB1dERhdGUgPT4ge1xuICBjb25zdCBtb250aExpc3QgPSBbXCJKYW5cIiwgXCJGZWJcIiwgXCJNYXJcIiwgXCJBcHJcIiwgXCJNYXlcIiwgXCJKdW5cIiwgXCJKdWxcIiwgXCJBdWdcIiwgXCJTZXBcIiwgXCJPY3RcIiwgXCJOb3ZcIiwgXCJEZWNcIl07XG4gIGNvbnN0IGRhdGUgPSBuZXcgRGF0ZShpbnB1dERhdGUpO1xuICBjb25zdCBkYXkgPSBkYXRlLmdldERhdGUoKTtcbiAgY29uc3QgbW9udGggPSBtb250aExpc3RbZGF0ZS5nZXRNb250aCgpXTtcbiAgY29uc3QgeWVhciA9IGRhdGUuZ2V0RnVsbFllYXIoKTtcbiAgcmV0dXJuIGAke2RheX0gJHttb250aH0gJHt5ZWFyfWA7XG59O1xuY29uc3QgZm9ybWF0VGltZSA9IHRpbWUgPT4ge1xuICByZXR1cm4gbmV3IERhdGUodGltZSkudG9UaW1lU3RyaW5nKCkuc2xpY2UoMCwgOCk7XG59O1xuXG4vKipcbiAqIE5ldHdvcmsgdXRpbGl0aWVzXG4gKi9cbmNvbnN0IHRyYW5zYWN0aW9uTWF0Y2hlc05ldHdvcmsgPSAodHJhbnNhY3Rpb24sIGNoYWluSWQpID0+IHtcbiAgaWYgKHR5cGVvZiB0cmFuc2FjdGlvbi5jaGFpbklkICE9PSBcInVuZGVmaW5lZFwiKSB7XG4gICAgcmV0dXJuIHRyYW5zYWN0aW9uLmNoYWluSWQgPT09IGNoYWluSWQ7XG4gIH1cbiAgcmV0dXJuIGZhbHNlO1xufTtcblxuLyoqXG4gKiBTaWduaW5nIHV0aWxzXG4gKi9cbmNvbnN0IGhhc2hNZXNzYWdlID0gbWVzc2FnZSA9PiB7XG4gIGNvbnN0IGJ1ZmZlcmVkTWVzc2FnZSA9IEJ1ZmZlci5mcm9tKG1lc3NhZ2UsIFwidXRmOFwiKTtcbiAgY29uc3QgZWwgPSBoYXNoUGVyc29uYWxNZXNzYWdlKGJ1ZmZlcmVkTWVzc2FnZSk7XG4gIHJldHVybiBCdWZmZXIuZnJvbShlbCk7XG59O1xuY29uc3Qgc2lnbk1lc3NhZ2UgPSBhc3luYyAocHJpdmF0ZUtleSwgZGF0YSkgPT4ge1xuICBjb25zdCBwcml2S2V5ID0gQnVmZmVyLmZyb20ocHJpdmF0ZUtleSwgXCJoZXhcIik7XG4gIGNvbnN0IG1lc3NhZ2UgPSBzdHJpcEhleFByZWZpeChkYXRhKTtcbiAgY29uc3QgbXNnU2lnID0gZWNzaWduKEJ1ZmZlci5mcm9tKG1lc3NhZ2UsIFwiaGV4XCIpLCBwcml2S2V5KTtcbiAgY29uc3QgcmF3TXNnU2lnID0gY29uY2F0U2lnKEJ1ZmZlci5mcm9tKGJpZ0ludFRvQnl0ZXMobXNnU2lnLnYpKSwgQnVmZmVyLmZyb20obXNnU2lnLnIpLCBCdWZmZXIuZnJvbShtc2dTaWcucykpO1xuICByZXR1cm4gcmF3TXNnU2lnO1xufTtcblxuLyoqXG4gKiBwb3B1cCBoYW5kbGVyIHV0aWxzXG4gKi9cbmZ1bmN0aW9uIGdldFBvcHVwRmVhdHVyZXMoe1xuICB3aWR0aDogdyxcbiAgaGVpZ2h0OiBoXG59KSB7XG4gIC8vIEZpeGVzIGR1YWwtc2NyZWVuIHBvc2l0aW9uICAgICAgICAgICAgICAgICAgICAgICAgICAgICBNb3N0IGJyb3dzZXJzICAgICAgRmlyZWZveFxuICBjb25zdCBkdWFsU2NyZWVuTGVmdCA9IHdpbmRvdy5zY3JlZW5MZWZ0ICE9PSB1bmRlZmluZWQgPyB3aW5kb3cuc2NyZWVuTGVmdCA6IHdpbmRvdy5zY3JlZW5YO1xuICBjb25zdCBkdWFsU2NyZWVuVG9wID0gd2luZG93LnNjcmVlblRvcCAhPT0gdW5kZWZpbmVkID8gd2luZG93LnNjcmVlblRvcCA6IHdpbmRvdy5zY3JlZW5ZO1xuICBjb25zdCB3aWR0aCA9IHdpbmRvdy5pbm5lcldpZHRoID8gd2luZG93LmlubmVyV2lkdGggOiBkb2N1bWVudC5kb2N1bWVudEVsZW1lbnQuY2xpZW50V2lkdGggPyBkb2N1bWVudC5kb2N1bWVudEVsZW1lbnQuY2xpZW50V2lkdGggOiB3aW5kb3cuc2NyZWVuLndpZHRoO1xuICBjb25zdCBoZWlnaHQgPSB3aW5kb3cuaW5uZXJIZWlnaHQgPyB3aW5kb3cuaW5uZXJIZWlnaHQgOiBkb2N1bWVudC5kb2N1bWVudEVsZW1lbnQuY2xpZW50SGVpZ2h0ID8gZG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50LmNsaWVudEhlaWdodCA6IHdpbmRvdy5zY3JlZW4uaGVpZ2h0O1xuICBjb25zdCBzeXN0ZW1ab29tID0gMTsgLy8gTm8gcmVsaWFibGUgZXN0aW1hdGVcblxuICBjb25zdCBsZWZ0ID0gTWF0aC5hYnMoKHdpZHRoIC0gdykgLyAyIC8gc3lzdGVtWm9vbSArIGR1YWxTY3JlZW5MZWZ0KTtcbiAgY29uc3QgdG9wID0gTWF0aC5hYnMoKGhlaWdodCAtIGgpIC8gMiAvIHN5c3RlbVpvb20gKyBkdWFsU2NyZWVuVG9wKTtcbiAgY29uc3QgZmVhdHVyZXMgPSBgdGl0bGViYXI9MCx0b29sYmFyPTAsc3RhdHVzPTAsbG9jYXRpb249MCxtZW51YmFyPTAsaGVpZ2h0PSR7aCAvIHN5c3RlbVpvb219LHdpZHRoPSR7dyAvIHN5c3RlbVpvb219LHRvcD0ke3RvcH0sbGVmdD0ke2xlZnR9YDtcbiAgcmV0dXJuIGZlYXR1cmVzO1xufVxuY29uc3QgYnJvYWRjYXN0Q2hhbm5lbE9wdGlvbnMgPSB7XG4gIHR5cGU6IFwic2VydmVyXCIsXG4gIC8vIHR5cGU6ICdsb2NhbHN0b3JhZ2UnLCAvLyAob3B0aW9uYWwpIGVuZm9yY2UgYSB0eXBlLCBvbmVPZlsnbmF0aXZlJywgJ2lkYicsICdsb2NhbHN0b3JhZ2UnLCAnbm9kZSddXG4gIHdlYldvcmtlclN1cHBvcnQ6IGZhbHNlIC8vIChvcHRpb25hbCkgc2V0IHRoaXMgdG8gZmFsc2UgaWYgeW91IGtub3cgdGhhdCB5b3VyIGNoYW5uZWwgd2lsbCBuZXZlciBiZSB1c2VkIGluIGEgV2ViV29ya2VyIChpbmNyZWFzZXMgcGVyZm9ybWFuY2UpXG59O1xuZnVuY3Rpb24gZ2V0Q3VzdG9tRGV2aWNlSW5mbygpIHtcbiAgdmFyIF9uYXZpZ2F0b3I7XG4gIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBAdHlwZXNjcmlwdC1lc2xpbnQvbm8tZXhwbGljaXQtYW55XG4gIGlmICgoX25hdmlnYXRvciA9IG5hdmlnYXRvcikgIT09IG51bGwgJiYgX25hdmlnYXRvciAhPT0gdm9pZCAwICYmIF9uYXZpZ2F0b3IuYnJhdmUpIHtcbiAgICByZXR1cm4ge1xuICAgICAgYnJvd3NlcjogXCJCcmF2ZVwiXG4gICAgfTtcbiAgfVxufVxuY2xhc3MgVXNlckVycm9yIGV4dGVuZHMgRXJyb3Ige31cbmNvbnN0IGhhbmRsZVJlZGlyZWN0UGFyYW1ldGVycyA9IChoYXNoLCBxdWVyeVBhcmFtZXRlcnMpID0+IHtcbiAgY29uc3QgaGFzaFBhcmFtZXRlcnMgPSB7fTtcbiAgY29uc3QgaGFzaFVybCA9IG5ldyBVUkwoYCR7d2luZG93LmxvY2F0aW9uLm9yaWdpbn0vPyR7aGFzaC5zbGljZSgxKX1gKTtcbiAgaGFzaFVybC5zZWFyY2hQYXJhbXMuZm9yRWFjaCgodmFsdWUsIGtleSkgPT4ge1xuICAgIGhhc2hQYXJhbWV0ZXJzW2tleV0gPSB2YWx1ZTtcbiAgfSk7XG4gIGxldCBpbnN0YW5jZVBhcmFtZXRlcnMgPSB7fTtcbiAgbGV0IGVycm9yID0gXCJcIjtcbiAgaWYgKCFxdWVyeVBhcmFtZXRlcnMud2luZG93SWQpIHtcbiAgICBpZiAoT2JqZWN0LmtleXMoaGFzaFBhcmFtZXRlcnMpLmxlbmd0aCA+IDAgJiYgaGFzaFBhcmFtZXRlcnMuc3RhdGUpIHtcbiAgICAgIGluc3RhbmNlUGFyYW1ldGVycyA9IEpTT04ucGFyc2Uoc2FmZWF0b2IoZGVjb2RlVVJJQ29tcG9uZW50KGRlY29kZVVSSUNvbXBvbmVudChoYXNoUGFyYW1ldGVycy5zdGF0ZSkpKSkgfHwge307XG4gICAgICBlcnJvciA9IGhhc2hQYXJhbWV0ZXJzLmVycm9yX2Rlc2NyaXB0aW9uIHx8IGhhc2hQYXJhbWV0ZXJzLmVycm9yIHx8IGVycm9yO1xuICAgIH0gZWxzZSBpZiAoT2JqZWN0LmtleXMocXVlcnlQYXJhbWV0ZXJzKS5sZW5ndGggPiAwICYmIHF1ZXJ5UGFyYW1ldGVycy5zdGF0ZSkge1xuICAgICAgaW5zdGFuY2VQYXJhbWV0ZXJzID0gSlNPTi5wYXJzZShzYWZlYXRvYihkZWNvZGVVUklDb21wb25lbnQoZGVjb2RlVVJJQ29tcG9uZW50KHF1ZXJ5UGFyYW1ldGVycy5zdGF0ZSkpKSkgfHwge307XG4gICAgICBpZiAocXVlcnlQYXJhbWV0ZXJzLmVycm9yKSBlcnJvciA9IHF1ZXJ5UGFyYW1ldGVycy5lcnJvcjtcbiAgICB9XG4gIH1cbiAgcmV0dXJuIHtcbiAgICBlcnJvcixcbiAgICBpbnN0YW5jZVBhcmFtZXRlcnMsXG4gICAgaGFzaFBhcmFtZXRlcnNcbiAgfTtcbn07XG5mdW5jdGlvbiBzbGVlcChtcykge1xuICByZXR1cm4gbmV3IFByb21pc2UocmVzb2x2ZSA9PiB7XG4gICAgc2V0VGltZW91dChyZXNvbHZlLCBtcyk7XG4gIH0pO1xufVxuY29uc3QgaXNVbmF1dGhvcml6ZWRFcnJvciA9IGVycm9yID0+IHtcbiAgcmV0dXJuIGVycm9yIGluc3RhbmNlb2YgUmVzcG9uc2UgJiYgZXJyb3Iuc3RhdHVzID09PSA0MDE7XG59O1xuXG5leHBvcnQgeyBVc2VyRXJyb3IsIGFkZHJlc3NTbGljZXIsIGJyb2FkY2FzdENoYW5uZWxPcHRpb25zLCBjb25jYXRTaWcsIGZvcm1hdERhdGUsIGZvcm1hdFNtYWxsTnVtYmVycywgZm9ybWF0VGltZSwgZ2V0Q3VzdG9tRGV2aWNlSW5mbywgZ2V0SGVhZGVycywgZ2V0UG9wdXBGZWF0dXJlcywgaGFuZGxlUmVkaXJlY3RQYXJhbWV0ZXJzLCBoYXNoTWVzc2FnZSwgaW50VG9IZXgsIGlzVW5hdXRob3JpemVkRXJyb3IsIHBhZFdpdGhaZXJvZXMsIHJhbmRvbUlkLCBzaWduTWVzc2FnZSwgc2lnbmlmaWNhbnREaWdpdHMsIHNsZWVwLCB0aW1lb3V0LCB0cmFuc2FjdGlvbk1hdGNoZXNOZXR3b3JrIH07XG4iXSwibmFtZXMiOltdLCJpZ25vcmVMaXN0IjpbMF0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/@toruslabs/base-controllers/dist/lib.esm/utils/utils.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/@toruslabs/constants/dist/lib.esm/constants.js":
/*!*********************************************************************!*\
  !*** ./node_modules/@toruslabs/constants/dist/lib.esm/constants.js ***!
  \*********************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   AUTHJS_SERVER_URL: () => (/* binding */ AUTHJS_SERVER_URL),\n/* harmony export */   FND_SERVER: () => (/* binding */ FND_SERVER),\n/* harmony export */   KEY_TYPE: () => (/* binding */ KEY_TYPE),\n/* harmony export */   LEGACY_NETWORKS_ROUTE_MAP: () => (/* binding */ LEGACY_NETWORKS_ROUTE_MAP),\n/* harmony export */   METADATA_MAP: () => (/* binding */ METADATA_MAP),\n/* harmony export */   MULTI_CLUSTER_NETWORKS: () => (/* binding */ MULTI_CLUSTER_NETWORKS),\n/* harmony export */   NETWORK_MAP: () => (/* binding */ NETWORK_MAP),\n/* harmony export */   PROXY_CONTRACT_ADDRESS: () => (/* binding */ PROXY_CONTRACT_ADDRESS),\n/* harmony export */   SESSION_SERVER_API_URL: () => (/* binding */ SESSION_SERVER_API_URL),\n/* harmony export */   SESSION_SERVER_SOCKET_URL: () => (/* binding */ SESSION_SERVER_SOCKET_URL),\n/* harmony export */   SIGNER_MAP: () => (/* binding */ SIGNER_MAP),\n/* harmony export */   SIG_TYPE: () => (/* binding */ SIG_TYPE),\n/* harmony export */   TORUS_LEGACY_NETWORK: () => (/* binding */ TORUS_LEGACY_NETWORK),\n/* harmony export */   TORUS_SAPPHIRE_NETWORK: () => (/* binding */ TORUS_SAPPHIRE_NETWORK)\n/* harmony export */ });\nconst TORUS_LEGACY_NETWORK = {\n  MAINNET: \"mainnet\",\n  TESTNET: \"testnet\",\n  CYAN: \"cyan\",\n  AQUA: \"aqua\",\n  CELESTE: \"celeste\"\n};\nconst TORUS_SAPPHIRE_NETWORK = {\n  SAPPHIRE_DEVNET: \"sapphire_devnet\",\n  SAPPHIRE_MAINNET: \"sapphire_mainnet\"\n};\nconst PROXY_CONTRACT_ADDRESS = {\n  [TORUS_LEGACY_NETWORK.MAINNET]: \"0xf20336e16B5182637f09821c27BDe29b0AFcfe80\",\n  [TORUS_LEGACY_NETWORK.TESTNET]: \"0xd084604e5FA387FbC2Da8bAab07fDD6aDED4614A\",\n  [TORUS_LEGACY_NETWORK.CYAN]: \"0x9f072ba19b3370e512aa1b4bfcdaf97283168005\",\n  [TORUS_LEGACY_NETWORK.AQUA]: \"0x29Dea82a0509153b91040ee13cDBba0f03efb625\",\n  [TORUS_LEGACY_NETWORK.CELESTE]: \"0x6Bffb4e89453069E7487f0fa5c9f4a2D771cce6c\"\n};\nconst MULTI_CLUSTER_NETWORKS = [\n  // TORUS_LEGACY_NETWORK.AQUA,\n  // TORUS_LEGACY_NETWORK.CELESTE,\n  // TORUS_LEGACY_NETWORK.CYAN,\n];\nconst LEGACY_NETWORKS_ROUTE_MAP = {\n  [TORUS_LEGACY_NETWORK.AQUA]: {\n    migrationCompleted: true,\n    networkIdentifier: \"aqua\",\n    networkMigratedTo: TORUS_SAPPHIRE_NETWORK.SAPPHIRE_MAINNET\n  },\n  [TORUS_LEGACY_NETWORK.CELESTE]: {\n    migrationCompleted: true,\n    networkIdentifier: \"celeste\",\n    networkMigratedTo: TORUS_SAPPHIRE_NETWORK.SAPPHIRE_MAINNET\n  },\n  [TORUS_LEGACY_NETWORK.CYAN]: {\n    migrationCompleted: true,\n    networkIdentifier: \"cyan\",\n    networkMigratedTo: TORUS_SAPPHIRE_NETWORK.SAPPHIRE_MAINNET\n  },\n  [TORUS_LEGACY_NETWORK.MAINNET]: {\n    migrationCompleted: true,\n    networkIdentifier: \"mainnet\",\n    networkMigratedTo: TORUS_SAPPHIRE_NETWORK.SAPPHIRE_MAINNET\n  },\n  [TORUS_LEGACY_NETWORK.TESTNET]: {\n    migrationCompleted: true,\n    networkIdentifier: \"teal\",\n    networkMigratedTo: TORUS_SAPPHIRE_NETWORK.SAPPHIRE_DEVNET\n  }\n};\nconst NETWORK_MAP = {\n  [TORUS_LEGACY_NETWORK.MAINNET]: \"mainnet\",\n  [TORUS_LEGACY_NETWORK.TESTNET]: \"goerli\",\n  [TORUS_LEGACY_NETWORK.CYAN]: \"polygon-mainnet\",\n  [TORUS_LEGACY_NETWORK.AQUA]: \"polygon-mainnet\",\n  [TORUS_LEGACY_NETWORK.CELESTE]: \"polygon-mainnet\"\n};\nconst SIGNER_MAP = {\n  [TORUS_SAPPHIRE_NETWORK.SAPPHIRE_MAINNET]: \"https://api.web3auth.io/signer-service\",\n  [TORUS_SAPPHIRE_NETWORK.SAPPHIRE_DEVNET]: \"https://api.web3auth.io/signer-service\",\n  [TORUS_LEGACY_NETWORK.MAINNET]: \"https://api.web3auth.io/signer-service\",\n  [TORUS_LEGACY_NETWORK.TESTNET]: \"https://api.web3auth.io/signer-service\",\n  [TORUS_LEGACY_NETWORK.CYAN]: \"https://api.web3auth.io/signer-polygon-service\",\n  [TORUS_LEGACY_NETWORK.AQUA]: \"https://api.web3auth.io/signer-polygon-service\",\n  [TORUS_LEGACY_NETWORK.CELESTE]: \"https://api.web3auth.io/signer-polygon-service\"\n};\nconst METADATA_MAP = {\n  [TORUS_LEGACY_NETWORK.MAINNET]: \"https://api.web3auth.io/metadata-service\",\n  [TORUS_LEGACY_NETWORK.TESTNET]: \"https://api.web3auth.io/metadata-service\",\n  [TORUS_LEGACY_NETWORK.CYAN]: \"https://api.web3auth.io/metadata-service\",\n  [TORUS_LEGACY_NETWORK.AQUA]: \"https://api.web3auth.io/metadata-service\",\n  [TORUS_LEGACY_NETWORK.CELESTE]: \"https://api.web3auth.io/metadata-service\"\n};\n\n// FND backend service\nconst FND_SERVER = \"https://api.web3auth.io/fnd-service\";\n\n// Session backend service\nconst SESSION_SERVER_API_URL = \"https://api.web3auth.io/session-service\";\nconst SESSION_SERVER_SOCKET_URL = \"https://session.web3auth.io\";\n\n// Authjs backend service\nconst AUTHJS_SERVER_URL = \"https://api.web3auth.io/authjs-service\";\nconst KEY_TYPE = {\n  SECP256K1: \"secp256k1\",\n  ED25519: \"ed25519\"\n};\nconst SIG_TYPE = {\n  ECDSA_SECP256K1: \"ecdsa-secp256k1\",\n  ED25519: \"ed25519\",\n  BIP340: \"bip340\"\n};\n\n\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvQHRvcnVzbGFicy9jb25zdGFudHMvZGlzdC9saWIuZXNtL2NvbnN0YW50cy5qcyIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7Ozs7Ozs7OztBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsR0FBRztBQUNIO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsR0FBRztBQUNIO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsR0FBRztBQUNIO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsR0FBRztBQUNIO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFZ1IiLCJzb3VyY2VzIjpbIi9Vc2Vycy9hbmdlbGFoZXJyYWRvcmxvcGV6L0Rlc2t0b3AvQ1RCL01TMy91c2VjYXNlcy9ub2RlX21vZHVsZXMvQHRvcnVzbGFicy9jb25zdGFudHMvZGlzdC9saWIuZXNtL2NvbnN0YW50cy5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyJjb25zdCBUT1JVU19MRUdBQ1lfTkVUV09SSyA9IHtcbiAgTUFJTk5FVDogXCJtYWlubmV0XCIsXG4gIFRFU1RORVQ6IFwidGVzdG5ldFwiLFxuICBDWUFOOiBcImN5YW5cIixcbiAgQVFVQTogXCJhcXVhXCIsXG4gIENFTEVTVEU6IFwiY2VsZXN0ZVwiXG59O1xuY29uc3QgVE9SVVNfU0FQUEhJUkVfTkVUV09SSyA9IHtcbiAgU0FQUEhJUkVfREVWTkVUOiBcInNhcHBoaXJlX2Rldm5ldFwiLFxuICBTQVBQSElSRV9NQUlOTkVUOiBcInNhcHBoaXJlX21haW5uZXRcIlxufTtcbmNvbnN0IFBST1hZX0NPTlRSQUNUX0FERFJFU1MgPSB7XG4gIFtUT1JVU19MRUdBQ1lfTkVUV09SSy5NQUlOTkVUXTogXCIweGYyMDMzNmUxNkI1MTgyNjM3ZjA5ODIxYzI3QkRlMjliMEFGY2ZlODBcIixcbiAgW1RPUlVTX0xFR0FDWV9ORVRXT1JLLlRFU1RORVRdOiBcIjB4ZDA4NDYwNGU1RkEzODdGYkMyRGE4YkFhYjA3ZkRENmFERUQ0NjE0QVwiLFxuICBbVE9SVVNfTEVHQUNZX05FVFdPUksuQ1lBTl06IFwiMHg5ZjA3MmJhMTliMzM3MGU1MTJhYTFiNGJmY2RhZjk3MjgzMTY4MDA1XCIsXG4gIFtUT1JVU19MRUdBQ1lfTkVUV09SSy5BUVVBXTogXCIweDI5RGVhODJhMDUwOTE1M2I5MTA0MGVlMTNjREJiYTBmMDNlZmI2MjVcIixcbiAgW1RPUlVTX0xFR0FDWV9ORVRXT1JLLkNFTEVTVEVdOiBcIjB4NkJmZmI0ZTg5NDUzMDY5RTc0ODdmMGZhNWM5ZjRhMkQ3NzFjY2U2Y1wiXG59O1xuY29uc3QgTVVMVElfQ0xVU1RFUl9ORVRXT1JLUyA9IFtcbiAgLy8gVE9SVVNfTEVHQUNZX05FVFdPUksuQVFVQSxcbiAgLy8gVE9SVVNfTEVHQUNZX05FVFdPUksuQ0VMRVNURSxcbiAgLy8gVE9SVVNfTEVHQUNZX05FVFdPUksuQ1lBTixcbl07XG5jb25zdCBMRUdBQ1lfTkVUV09SS1NfUk9VVEVfTUFQID0ge1xuICBbVE9SVVNfTEVHQUNZX05FVFdPUksuQVFVQV06IHtcbiAgICBtaWdyYXRpb25Db21wbGV0ZWQ6IHRydWUsXG4gICAgbmV0d29ya0lkZW50aWZpZXI6IFwiYXF1YVwiLFxuICAgIG5ldHdvcmtNaWdyYXRlZFRvOiBUT1JVU19TQVBQSElSRV9ORVRXT1JLLlNBUFBISVJFX01BSU5ORVRcbiAgfSxcbiAgW1RPUlVTX0xFR0FDWV9ORVRXT1JLLkNFTEVTVEVdOiB7XG4gICAgbWlncmF0aW9uQ29tcGxldGVkOiB0cnVlLFxuICAgIG5ldHdvcmtJZGVudGlmaWVyOiBcImNlbGVzdGVcIixcbiAgICBuZXR3b3JrTWlncmF0ZWRUbzogVE9SVVNfU0FQUEhJUkVfTkVUV09SSy5TQVBQSElSRV9NQUlOTkVUXG4gIH0sXG4gIFtUT1JVU19MRUdBQ1lfTkVUV09SSy5DWUFOXToge1xuICAgIG1pZ3JhdGlvbkNvbXBsZXRlZDogdHJ1ZSxcbiAgICBuZXR3b3JrSWRlbnRpZmllcjogXCJjeWFuXCIsXG4gICAgbmV0d29ya01pZ3JhdGVkVG86IFRPUlVTX1NBUFBISVJFX05FVFdPUksuU0FQUEhJUkVfTUFJTk5FVFxuICB9LFxuICBbVE9SVVNfTEVHQUNZX05FVFdPUksuTUFJTk5FVF06IHtcbiAgICBtaWdyYXRpb25Db21wbGV0ZWQ6IHRydWUsXG4gICAgbmV0d29ya0lkZW50aWZpZXI6IFwibWFpbm5ldFwiLFxuICAgIG5ldHdvcmtNaWdyYXRlZFRvOiBUT1JVU19TQVBQSElSRV9ORVRXT1JLLlNBUFBISVJFX01BSU5ORVRcbiAgfSxcbiAgW1RPUlVTX0xFR0FDWV9ORVRXT1JLLlRFU1RORVRdOiB7XG4gICAgbWlncmF0aW9uQ29tcGxldGVkOiB0cnVlLFxuICAgIG5ldHdvcmtJZGVudGlmaWVyOiBcInRlYWxcIixcbiAgICBuZXR3b3JrTWlncmF0ZWRUbzogVE9SVVNfU0FQUEhJUkVfTkVUV09SSy5TQVBQSElSRV9ERVZORVRcbiAgfVxufTtcbmNvbnN0IE5FVFdPUktfTUFQID0ge1xuICBbVE9SVVNfTEVHQUNZX05FVFdPUksuTUFJTk5FVF06IFwibWFpbm5ldFwiLFxuICBbVE9SVVNfTEVHQUNZX05FVFdPUksuVEVTVE5FVF06IFwiZ29lcmxpXCIsXG4gIFtUT1JVU19MRUdBQ1lfTkVUV09SSy5DWUFOXTogXCJwb2x5Z29uLW1haW5uZXRcIixcbiAgW1RPUlVTX0xFR0FDWV9ORVRXT1JLLkFRVUFdOiBcInBvbHlnb24tbWFpbm5ldFwiLFxuICBbVE9SVVNfTEVHQUNZX05FVFdPUksuQ0VMRVNURV06IFwicG9seWdvbi1tYWlubmV0XCJcbn07XG5jb25zdCBTSUdORVJfTUFQID0ge1xuICBbVE9SVVNfU0FQUEhJUkVfTkVUV09SSy5TQVBQSElSRV9NQUlOTkVUXTogXCJodHRwczovL2FwaS53ZWIzYXV0aC5pby9zaWduZXItc2VydmljZVwiLFxuICBbVE9SVVNfU0FQUEhJUkVfTkVUV09SSy5TQVBQSElSRV9ERVZORVRdOiBcImh0dHBzOi8vYXBpLndlYjNhdXRoLmlvL3NpZ25lci1zZXJ2aWNlXCIsXG4gIFtUT1JVU19MRUdBQ1lfTkVUV09SSy5NQUlOTkVUXTogXCJodHRwczovL2FwaS53ZWIzYXV0aC5pby9zaWduZXItc2VydmljZVwiLFxuICBbVE9SVVNfTEVHQUNZX05FVFdPUksuVEVTVE5FVF06IFwiaHR0cHM6Ly9hcGkud2ViM2F1dGguaW8vc2lnbmVyLXNlcnZpY2VcIixcbiAgW1RPUlVTX0xFR0FDWV9ORVRXT1JLLkNZQU5dOiBcImh0dHBzOi8vYXBpLndlYjNhdXRoLmlvL3NpZ25lci1wb2x5Z29uLXNlcnZpY2VcIixcbiAgW1RPUlVTX0xFR0FDWV9ORVRXT1JLLkFRVUFdOiBcImh0dHBzOi8vYXBpLndlYjNhdXRoLmlvL3NpZ25lci1wb2x5Z29uLXNlcnZpY2VcIixcbiAgW1RPUlVTX0xFR0FDWV9ORVRXT1JLLkNFTEVTVEVdOiBcImh0dHBzOi8vYXBpLndlYjNhdXRoLmlvL3NpZ25lci1wb2x5Z29uLXNlcnZpY2VcIlxufTtcbmNvbnN0IE1FVEFEQVRBX01BUCA9IHtcbiAgW1RPUlVTX0xFR0FDWV9ORVRXT1JLLk1BSU5ORVRdOiBcImh0dHBzOi8vYXBpLndlYjNhdXRoLmlvL21ldGFkYXRhLXNlcnZpY2VcIixcbiAgW1RPUlVTX0xFR0FDWV9ORVRXT1JLLlRFU1RORVRdOiBcImh0dHBzOi8vYXBpLndlYjNhdXRoLmlvL21ldGFkYXRhLXNlcnZpY2VcIixcbiAgW1RPUlVTX0xFR0FDWV9ORVRXT1JLLkNZQU5dOiBcImh0dHBzOi8vYXBpLndlYjNhdXRoLmlvL21ldGFkYXRhLXNlcnZpY2VcIixcbiAgW1RPUlVTX0xFR0FDWV9ORVRXT1JLLkFRVUFdOiBcImh0dHBzOi8vYXBpLndlYjNhdXRoLmlvL21ldGFkYXRhLXNlcnZpY2VcIixcbiAgW1RPUlVTX0xFR0FDWV9ORVRXT1JLLkNFTEVTVEVdOiBcImh0dHBzOi8vYXBpLndlYjNhdXRoLmlvL21ldGFkYXRhLXNlcnZpY2VcIlxufTtcblxuLy8gRk5EIGJhY2tlbmQgc2VydmljZVxuY29uc3QgRk5EX1NFUlZFUiA9IFwiaHR0cHM6Ly9hcGkud2ViM2F1dGguaW8vZm5kLXNlcnZpY2VcIjtcblxuLy8gU2Vzc2lvbiBiYWNrZW5kIHNlcnZpY2VcbmNvbnN0IFNFU1NJT05fU0VSVkVSX0FQSV9VUkwgPSBcImh0dHBzOi8vYXBpLndlYjNhdXRoLmlvL3Nlc3Npb24tc2VydmljZVwiO1xuY29uc3QgU0VTU0lPTl9TRVJWRVJfU09DS0VUX1VSTCA9IFwiaHR0cHM6Ly9zZXNzaW9uLndlYjNhdXRoLmlvXCI7XG5cbi8vIEF1dGhqcyBiYWNrZW5kIHNlcnZpY2VcbmNvbnN0IEFVVEhKU19TRVJWRVJfVVJMID0gXCJodHRwczovL2FwaS53ZWIzYXV0aC5pby9hdXRoanMtc2VydmljZVwiO1xuY29uc3QgS0VZX1RZUEUgPSB7XG4gIFNFQ1AyNTZLMTogXCJzZWNwMjU2azFcIixcbiAgRUQyNTUxOTogXCJlZDI1NTE5XCJcbn07XG5jb25zdCBTSUdfVFlQRSA9IHtcbiAgRUNEU0FfU0VDUDI1NksxOiBcImVjZHNhLXNlY3AyNTZrMVwiLFxuICBFRDI1NTE5OiBcImVkMjU1MTlcIixcbiAgQklQMzQwOiBcImJpcDM0MFwiXG59O1xuXG5leHBvcnQgeyBBVVRISlNfU0VSVkVSX1VSTCwgRk5EX1NFUlZFUiwgS0VZX1RZUEUsIExFR0FDWV9ORVRXT1JLU19ST1VURV9NQVAsIE1FVEFEQVRBX01BUCwgTVVMVElfQ0xVU1RFUl9ORVRXT1JLUywgTkVUV09SS19NQVAsIFBST1hZX0NPTlRSQUNUX0FERFJFU1MsIFNFU1NJT05fU0VSVkVSX0FQSV9VUkwsIFNFU1NJT05fU0VSVkVSX1NPQ0tFVF9VUkwsIFNJR05FUl9NQVAsIFNJR19UWVBFLCBUT1JVU19MRUdBQ1lfTkVUV09SSywgVE9SVVNfU0FQUEhJUkVfTkVUV09SSyB9O1xuIl0sIm5hbWVzIjpbXSwiaWdub3JlTGlzdCI6WzBdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/@toruslabs/constants/dist/lib.esm/constants.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/@toruslabs/eccrypto/dist/lib.esm/index.js":
/*!****************************************************************!*\
  !*** ./node_modules/@toruslabs/eccrypto/dist/lib.esm/index.js ***!
  \****************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   decrypt: () => (/* binding */ decrypt),\n/* harmony export */   derive: () => (/* binding */ derive),\n/* harmony export */   derivePadded: () => (/* binding */ derivePadded),\n/* harmony export */   deriveUnpadded: () => (/* binding */ deriveUnpadded),\n/* harmony export */   encrypt: () => (/* binding */ encrypt),\n/* harmony export */   generatePrivate: () => (/* binding */ generatePrivate),\n/* harmony export */   getPublic: () => (/* binding */ getPublic),\n/* harmony export */   getPublicCompressed: () => (/* binding */ getPublicCompressed),\n/* harmony export */   sign: () => (/* binding */ sign),\n/* harmony export */   verify: () => (/* binding */ verify)\n/* harmony export */ });\n/* harmony import */ var elliptic__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! elliptic */ \"(ssr)/./node_modules/elliptic/lib/elliptic.js\");\n/* harmony import */ var elliptic__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(elliptic__WEBPACK_IMPORTED_MODULE_0__);\n\n\nconst ec = new elliptic__WEBPACK_IMPORTED_MODULE_0__.ec(\"secp256k1\");\n// eslint-disable-next-line @typescript-eslint/no-explicit-any, n/no-unsupported-features/node-builtins\nconst browserCrypto = globalThis.crypto || globalThis.msCrypto || {};\n// eslint-disable-next-line @typescript-eslint/no-explicit-any\nconst subtle = browserCrypto.subtle || browserCrypto.webkitSubtle;\nconst EC_GROUP_ORDER = Buffer.from(\"fffffffffffffffffffffffffffffffebaaedce6af48a03bbfd25e8cd0364141\", \"hex\");\nconst ZERO32 = Buffer.alloc(32, 0);\nfunction assert(condition, message) {\n  if (!condition) {\n    throw new Error(message || \"Assertion failed\");\n  }\n}\nfunction isScalar(x) {\n  return Buffer.isBuffer(x) && x.length === 32;\n}\nfunction isValidPrivateKey(privateKey) {\n  if (!isScalar(privateKey)) {\n    return false;\n  }\n  return privateKey.compare(ZERO32) > 0 &&\n  // > 0\n  privateKey.compare(EC_GROUP_ORDER) < 0; // < G\n}\n\n// Compare two buffers in constant time to prevent timing attacks.\nfunction equalConstTime(b1, b2) {\n  if (b1.length !== b2.length) {\n    return false;\n  }\n  let res = 0;\n  for (let i = 0; i < b1.length; i++) {\n    res |= b1[i] ^ b2[i]; // jshint ignore:line\n  }\n  return res === 0;\n}\n\n/* This must check if we're in the browser or\nnot, since the functions are different and does\nnot convert using browserify */\nfunction randomBytes(size) {\n  if (typeof browserCrypto.getRandomValues === \"undefined\") {\n    return Buffer.from(browserCrypto.randomBytes(size));\n  }\n  const arr = new Uint8Array(size);\n  browserCrypto.getRandomValues(arr);\n  return Buffer.from(arr);\n}\nasync function sha512(msg) {\n  if (!browserCrypto.createHash) {\n    const hash = await subtle.digest(\"SHA-512\", msg);\n    const result = new Uint8Array(hash);\n    return result;\n  }\n  const hash = browserCrypto.createHash(\"sha512\");\n  const result = hash.update(msg).digest();\n  return new Uint8Array(result);\n}\nfunction getAes(op) {\n  return async function (iv, key, data) {\n    if (subtle && subtle[op] && subtle.importKey) {\n      const importAlgorithm = {\n        name: \"AES-CBC\"\n      };\n      const cryptoKey = await subtle.importKey(\"raw\", key, importAlgorithm, false, [op]);\n      const encAlgorithm = {\n        name: \"AES-CBC\",\n        iv\n      };\n      // encrypt and decrypt ops are not implemented in react-native-quick-crypto yet.\n      const result = await subtle[op](encAlgorithm, cryptoKey, data);\n      return Buffer.from(new Uint8Array(result));\n    } else if (op === \"encrypt\" && browserCrypto.createCipheriv) {\n      // This is available if crypto is polyfilled in react native environment\n      const cipher = browserCrypto.createCipheriv(\"aes-256-cbc\", key, iv);\n      const firstChunk = cipher.update(data);\n      const secondChunk = cipher.final();\n      return Buffer.concat([firstChunk, secondChunk]);\n    } else if (op === \"decrypt\" && browserCrypto.createDecipheriv) {\n      const decipher = browserCrypto.createDecipheriv(\"aes-256-cbc\", key, iv);\n      const firstChunk = decipher.update(data);\n      const secondChunk = decipher.final();\n      return Buffer.concat([firstChunk, secondChunk]);\n    }\n    throw new Error(`Unsupported operation: ${op}`);\n  };\n}\nconst aesCbcEncrypt = getAes(\"encrypt\");\nconst aesCbcDecrypt = getAes(\"decrypt\");\nasync function hmacSha256Sign(key, msg) {\n  if (!browserCrypto.createHmac) {\n    const importAlgorithm = {\n      name: \"HMAC\",\n      hash: {\n        name: \"SHA-256\"\n      }\n    };\n    const cryptoKey = await subtle.importKey(\"raw\", new Uint8Array(key), importAlgorithm, false, [\"sign\", \"verify\"]);\n    const sig = await subtle.sign(\"HMAC\", cryptoKey, msg);\n    const result = Buffer.from(new Uint8Array(sig));\n    return result;\n  }\n  const hmac = browserCrypto.createHmac(\"sha256\", Buffer.from(key));\n  hmac.update(msg);\n  const result = hmac.digest();\n  return result;\n}\nasync function hmacSha256Verify(key, msg, sig) {\n  const expectedSig = await hmacSha256Sign(key, msg);\n  return equalConstTime(expectedSig, sig);\n}\n\n/**\n * Generate a new valid private key. Will use the window.crypto or window.msCrypto as source\n * depending on your browser.\n */\nconst generatePrivate = function () {\n  let privateKey = randomBytes(32);\n  while (!isValidPrivateKey(privateKey)) {\n    privateKey = randomBytes(32);\n  }\n  return privateKey;\n};\nconst getPublic = function (privateKey) {\n  // This function has sync API so we throw an error immediately.\n  assert(privateKey.length === 32, \"Bad private key\");\n  assert(isValidPrivateKey(privateKey), \"Bad private key\");\n  // XXX(Kagami): `elliptic.utils.encode` returns array for every\n  // encoding except `hex`.\n  return Buffer.from(ec.keyFromPrivate(privateKey).getPublic(\"array\"));\n};\n\n/**\n * Get compressed version of public key.\n */\nconst getPublicCompressed = function (privateKey) {\n  // jshint ignore:line\n  assert(privateKey.length === 32, \"Bad private key\");\n  assert(isValidPrivateKey(privateKey), \"Bad private key\");\n  // See https://github.com/wanderer/secp256k1-node/issues/46\n  const compressed = true;\n  return Buffer.from(ec.keyFromPrivate(privateKey).getPublic(compressed, \"array\"));\n};\n\n// NOTE(Kagami): We don't use promise shim in Browser implementation\n// because it's supported natively in new browsers (see\n// <http://caniuse.com/#feat=promises>) and we can use only new browsers\n// because of the WebCryptoAPI (see\n// <http://caniuse.com/#feat=cryptography>).\nconst sign = async function (privateKey, msg) {\n  assert(privateKey.length === 32, \"Bad private key\");\n  assert(isValidPrivateKey(privateKey), \"Bad private key\");\n  assert(msg.length > 0, \"Message should not be empty\");\n  assert(msg.length <= 32, \"Message is too long\");\n  return Buffer.from(ec.sign(msg, privateKey, {\n    canonical: true\n  }).toDER());\n};\nconst verify = async function (publicKey, msg, sig) {\n  assert(publicKey.length === 65 || publicKey.length === 33, \"Bad public key\");\n  if (publicKey.length === 65) {\n    assert(publicKey[0] === 4, \"Bad public key\");\n  }\n  if (publicKey.length === 33) {\n    assert(publicKey[0] === 2 || publicKey[0] === 3, \"Bad public key\");\n  }\n  assert(msg.length > 0, \"Message should not be empty\");\n  assert(msg.length <= 32, \"Message is too long\");\n  if (ec.verify(msg, sig, publicKey)) {\n    return null;\n  }\n  throw new Error(\"Bad signature\");\n};\nconst derive = async function (privateKeyA, publicKeyB) {\n  assert(Buffer.isBuffer(privateKeyA), \"Bad private key\");\n  assert(Buffer.isBuffer(publicKeyB), \"Bad public key\");\n  assert(privateKeyA.length === 32, \"Bad private key\");\n  assert(isValidPrivateKey(privateKeyA), \"Bad private key\");\n  assert(publicKeyB.length === 65 || publicKeyB.length === 33, \"Bad public key\");\n  if (publicKeyB.length === 65) {\n    assert(publicKeyB[0] === 4, \"Bad public key\");\n  }\n  if (publicKeyB.length === 33) {\n    assert(publicKeyB[0] === 2 || publicKeyB[0] === 3, \"Bad public key\");\n  }\n  const keyA = ec.keyFromPrivate(privateKeyA);\n  const keyB = ec.keyFromPublic(publicKeyB);\n  const Px = keyA.derive(keyB.getPublic()); // BN instance\n  return Buffer.from(Px.toArray());\n};\nconst deriveUnpadded = derive;\nconst derivePadded = async function (privateKeyA, publicKeyB) {\n  assert(Buffer.isBuffer(privateKeyA), \"Bad private key\");\n  assert(Buffer.isBuffer(publicKeyB), \"Bad public key\");\n  assert(privateKeyA.length === 32, \"Bad private key\");\n  assert(isValidPrivateKey(privateKeyA), \"Bad private key\");\n  assert(publicKeyB.length === 65 || publicKeyB.length === 33, \"Bad public key\");\n  if (publicKeyB.length === 65) {\n    assert(publicKeyB[0] === 4, \"Bad public key\");\n  }\n  if (publicKeyB.length === 33) {\n    assert(publicKeyB[0] === 2 || publicKeyB[0] === 3, \"Bad public key\");\n  }\n  const keyA = ec.keyFromPrivate(privateKeyA);\n  const keyB = ec.keyFromPublic(publicKeyB);\n  const Px = keyA.derive(keyB.getPublic()); // BN instance\n  return Buffer.from(Px.toString(16, 64), \"hex\");\n};\nconst encrypt = async function (publicKeyTo, msg, opts) {\n  opts = opts || {};\n  let ephemPrivateKey = opts.ephemPrivateKey || randomBytes(32);\n  // There is a very unlikely possibility that it is not a valid key\n  while (!isValidPrivateKey(ephemPrivateKey)) {\n    ephemPrivateKey = opts.ephemPrivateKey || randomBytes(32);\n  }\n  const ephemPublicKey = getPublic(ephemPrivateKey);\n  const Px = await deriveUnpadded(ephemPrivateKey, publicKeyTo);\n  const hash = await sha512(Px);\n  const iv = opts.iv || randomBytes(16);\n  const encryptionKey = hash.slice(0, 32);\n  const macKey = hash.slice(32);\n  const data = await aesCbcEncrypt(iv, Buffer.from(encryptionKey), msg);\n  const ciphertext = data;\n  const dataToMac = Buffer.concat([iv, ephemPublicKey, ciphertext]);\n  const mac = await hmacSha256Sign(Buffer.from(macKey), dataToMac);\n  return {\n    iv,\n    ephemPublicKey,\n    ciphertext,\n    mac\n  };\n};\nconst decrypt = async function (privateKey, opts, _padding) {\n  const padding = _padding !== null && _padding !== void 0 ? _padding : false;\n  const deriveLocal = padding ? derivePadded : deriveUnpadded;\n  const Px = await deriveLocal(privateKey, opts.ephemPublicKey);\n  const hash = await sha512(Px);\n  const encryptionKey = hash.slice(0, 32);\n  const macKey = hash.slice(32);\n  const dataToMac = Buffer.concat([opts.iv, opts.ephemPublicKey, opts.ciphertext]);\n  const macGood = await hmacSha256Verify(Buffer.from(macKey), dataToMac, opts.mac);\n  if (!macGood && padding === false) {\n    return decrypt(privateKey, opts, true);\n  } else if (!macGood && padding === true) {\n    throw new Error(\"bad MAC after trying padded\");\n  }\n  const msg = await aesCbcDecrypt(opts.iv, Buffer.from(encryptionKey), opts.ciphertext);\n  return Buffer.from(new Uint8Array(msg));\n};\n\n\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvQHRvcnVzbGFicy9lY2NyeXB0by9kaXN0L2xpYi5lc20vaW5kZXguanMiLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7Ozs7O0FBQXNDOztBQUV0QyxlQUFlLHdDQUFJO0FBQ25CO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSwwQ0FBMEM7QUFDMUM7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esa0JBQWtCLGVBQWU7QUFDakMsMEJBQTBCO0FBQzFCO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsTUFBTTtBQUNOO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxNQUFNO0FBQ047QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLDhDQUE4QyxHQUFHO0FBQ2pEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsNENBQTRDO0FBQzVDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSw0Q0FBNEM7QUFDNUM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxJQUFJO0FBQ0o7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFaUkiLCJzb3VyY2VzIjpbIi9Vc2Vycy9hbmdlbGFoZXJyYWRvcmxvcGV6L0Rlc2t0b3AvQ1RCL01TMy91c2VjYXNlcy9ub2RlX21vZHVsZXMvQHRvcnVzbGFicy9lY2NyeXB0by9kaXN0L2xpYi5lc20vaW5kZXguanMiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgZWMgYXMgZWMkMSB9IGZyb20gJ2VsbGlwdGljJztcblxuY29uc3QgZWMgPSBuZXcgZWMkMShcInNlY3AyNTZrMVwiKTtcbi8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBAdHlwZXNjcmlwdC1lc2xpbnQvbm8tZXhwbGljaXQtYW55LCBuL25vLXVuc3VwcG9ydGVkLWZlYXR1cmVzL25vZGUtYnVpbHRpbnNcbmNvbnN0IGJyb3dzZXJDcnlwdG8gPSBnbG9iYWxUaGlzLmNyeXB0byB8fCBnbG9iYWxUaGlzLm1zQ3J5cHRvIHx8IHt9O1xuLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIEB0eXBlc2NyaXB0LWVzbGludC9uby1leHBsaWNpdC1hbnlcbmNvbnN0IHN1YnRsZSA9IGJyb3dzZXJDcnlwdG8uc3VidGxlIHx8IGJyb3dzZXJDcnlwdG8ud2Via2l0U3VidGxlO1xuY29uc3QgRUNfR1JPVVBfT1JERVIgPSBCdWZmZXIuZnJvbShcImZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZlYmFhZWRjZTZhZjQ4YTAzYmJmZDI1ZThjZDAzNjQxNDFcIiwgXCJoZXhcIik7XG5jb25zdCBaRVJPMzIgPSBCdWZmZXIuYWxsb2MoMzIsIDApO1xuZnVuY3Rpb24gYXNzZXJ0KGNvbmRpdGlvbiwgbWVzc2FnZSkge1xuICBpZiAoIWNvbmRpdGlvbikge1xuICAgIHRocm93IG5ldyBFcnJvcihtZXNzYWdlIHx8IFwiQXNzZXJ0aW9uIGZhaWxlZFwiKTtcbiAgfVxufVxuZnVuY3Rpb24gaXNTY2FsYXIoeCkge1xuICByZXR1cm4gQnVmZmVyLmlzQnVmZmVyKHgpICYmIHgubGVuZ3RoID09PSAzMjtcbn1cbmZ1bmN0aW9uIGlzVmFsaWRQcml2YXRlS2V5KHByaXZhdGVLZXkpIHtcbiAgaWYgKCFpc1NjYWxhcihwcml2YXRlS2V5KSkge1xuICAgIHJldHVybiBmYWxzZTtcbiAgfVxuICByZXR1cm4gcHJpdmF0ZUtleS5jb21wYXJlKFpFUk8zMikgPiAwICYmXG4gIC8vID4gMFxuICBwcml2YXRlS2V5LmNvbXBhcmUoRUNfR1JPVVBfT1JERVIpIDwgMDsgLy8gPCBHXG59XG5cbi8vIENvbXBhcmUgdHdvIGJ1ZmZlcnMgaW4gY29uc3RhbnQgdGltZSB0byBwcmV2ZW50IHRpbWluZyBhdHRhY2tzLlxuZnVuY3Rpb24gZXF1YWxDb25zdFRpbWUoYjEsIGIyKSB7XG4gIGlmIChiMS5sZW5ndGggIT09IGIyLmxlbmd0aCkge1xuICAgIHJldHVybiBmYWxzZTtcbiAgfVxuICBsZXQgcmVzID0gMDtcbiAgZm9yIChsZXQgaSA9IDA7IGkgPCBiMS5sZW5ndGg7IGkrKykge1xuICAgIHJlcyB8PSBiMVtpXSBeIGIyW2ldOyAvLyBqc2hpbnQgaWdub3JlOmxpbmVcbiAgfVxuICByZXR1cm4gcmVzID09PSAwO1xufVxuXG4vKiBUaGlzIG11c3QgY2hlY2sgaWYgd2UncmUgaW4gdGhlIGJyb3dzZXIgb3Jcbm5vdCwgc2luY2UgdGhlIGZ1bmN0aW9ucyBhcmUgZGlmZmVyZW50IGFuZCBkb2VzXG5ub3QgY29udmVydCB1c2luZyBicm93c2VyaWZ5ICovXG5mdW5jdGlvbiByYW5kb21CeXRlcyhzaXplKSB7XG4gIGlmICh0eXBlb2YgYnJvd3NlckNyeXB0by5nZXRSYW5kb21WYWx1ZXMgPT09IFwidW5kZWZpbmVkXCIpIHtcbiAgICByZXR1cm4gQnVmZmVyLmZyb20oYnJvd3NlckNyeXB0by5yYW5kb21CeXRlcyhzaXplKSk7XG4gIH1cbiAgY29uc3QgYXJyID0gbmV3IFVpbnQ4QXJyYXkoc2l6ZSk7XG4gIGJyb3dzZXJDcnlwdG8uZ2V0UmFuZG9tVmFsdWVzKGFycik7XG4gIHJldHVybiBCdWZmZXIuZnJvbShhcnIpO1xufVxuYXN5bmMgZnVuY3Rpb24gc2hhNTEyKG1zZykge1xuICBpZiAoIWJyb3dzZXJDcnlwdG8uY3JlYXRlSGFzaCkge1xuICAgIGNvbnN0IGhhc2ggPSBhd2FpdCBzdWJ0bGUuZGlnZXN0KFwiU0hBLTUxMlwiLCBtc2cpO1xuICAgIGNvbnN0IHJlc3VsdCA9IG5ldyBVaW50OEFycmF5KGhhc2gpO1xuICAgIHJldHVybiByZXN1bHQ7XG4gIH1cbiAgY29uc3QgaGFzaCA9IGJyb3dzZXJDcnlwdG8uY3JlYXRlSGFzaChcInNoYTUxMlwiKTtcbiAgY29uc3QgcmVzdWx0ID0gaGFzaC51cGRhdGUobXNnKS5kaWdlc3QoKTtcbiAgcmV0dXJuIG5ldyBVaW50OEFycmF5KHJlc3VsdCk7XG59XG5mdW5jdGlvbiBnZXRBZXMob3ApIHtcbiAgcmV0dXJuIGFzeW5jIGZ1bmN0aW9uIChpdiwga2V5LCBkYXRhKSB7XG4gICAgaWYgKHN1YnRsZSAmJiBzdWJ0bGVbb3BdICYmIHN1YnRsZS5pbXBvcnRLZXkpIHtcbiAgICAgIGNvbnN0IGltcG9ydEFsZ29yaXRobSA9IHtcbiAgICAgICAgbmFtZTogXCJBRVMtQ0JDXCJcbiAgICAgIH07XG4gICAgICBjb25zdCBjcnlwdG9LZXkgPSBhd2FpdCBzdWJ0bGUuaW1wb3J0S2V5KFwicmF3XCIsIGtleSwgaW1wb3J0QWxnb3JpdGhtLCBmYWxzZSwgW29wXSk7XG4gICAgICBjb25zdCBlbmNBbGdvcml0aG0gPSB7XG4gICAgICAgIG5hbWU6IFwiQUVTLUNCQ1wiLFxuICAgICAgICBpdlxuICAgICAgfTtcbiAgICAgIC8vIGVuY3J5cHQgYW5kIGRlY3J5cHQgb3BzIGFyZSBub3QgaW1wbGVtZW50ZWQgaW4gcmVhY3QtbmF0aXZlLXF1aWNrLWNyeXB0byB5ZXQuXG4gICAgICBjb25zdCByZXN1bHQgPSBhd2FpdCBzdWJ0bGVbb3BdKGVuY0FsZ29yaXRobSwgY3J5cHRvS2V5LCBkYXRhKTtcbiAgICAgIHJldHVybiBCdWZmZXIuZnJvbShuZXcgVWludDhBcnJheShyZXN1bHQpKTtcbiAgICB9IGVsc2UgaWYgKG9wID09PSBcImVuY3J5cHRcIiAmJiBicm93c2VyQ3J5cHRvLmNyZWF0ZUNpcGhlcml2KSB7XG4gICAgICAvLyBUaGlzIGlzIGF2YWlsYWJsZSBpZiBjcnlwdG8gaXMgcG9seWZpbGxlZCBpbiByZWFjdCBuYXRpdmUgZW52aXJvbm1lbnRcbiAgICAgIGNvbnN0IGNpcGhlciA9IGJyb3dzZXJDcnlwdG8uY3JlYXRlQ2lwaGVyaXYoXCJhZXMtMjU2LWNiY1wiLCBrZXksIGl2KTtcbiAgICAgIGNvbnN0IGZpcnN0Q2h1bmsgPSBjaXBoZXIudXBkYXRlKGRhdGEpO1xuICAgICAgY29uc3Qgc2Vjb25kQ2h1bmsgPSBjaXBoZXIuZmluYWwoKTtcbiAgICAgIHJldHVybiBCdWZmZXIuY29uY2F0KFtmaXJzdENodW5rLCBzZWNvbmRDaHVua10pO1xuICAgIH0gZWxzZSBpZiAob3AgPT09IFwiZGVjcnlwdFwiICYmIGJyb3dzZXJDcnlwdG8uY3JlYXRlRGVjaXBoZXJpdikge1xuICAgICAgY29uc3QgZGVjaXBoZXIgPSBicm93c2VyQ3J5cHRvLmNyZWF0ZURlY2lwaGVyaXYoXCJhZXMtMjU2LWNiY1wiLCBrZXksIGl2KTtcbiAgICAgIGNvbnN0IGZpcnN0Q2h1bmsgPSBkZWNpcGhlci51cGRhdGUoZGF0YSk7XG4gICAgICBjb25zdCBzZWNvbmRDaHVuayA9IGRlY2lwaGVyLmZpbmFsKCk7XG4gICAgICByZXR1cm4gQnVmZmVyLmNvbmNhdChbZmlyc3RDaHVuaywgc2Vjb25kQ2h1bmtdKTtcbiAgICB9XG4gICAgdGhyb3cgbmV3IEVycm9yKGBVbnN1cHBvcnRlZCBvcGVyYXRpb246ICR7b3B9YCk7XG4gIH07XG59XG5jb25zdCBhZXNDYmNFbmNyeXB0ID0gZ2V0QWVzKFwiZW5jcnlwdFwiKTtcbmNvbnN0IGFlc0NiY0RlY3J5cHQgPSBnZXRBZXMoXCJkZWNyeXB0XCIpO1xuYXN5bmMgZnVuY3Rpb24gaG1hY1NoYTI1NlNpZ24oa2V5LCBtc2cpIHtcbiAgaWYgKCFicm93c2VyQ3J5cHRvLmNyZWF0ZUhtYWMpIHtcbiAgICBjb25zdCBpbXBvcnRBbGdvcml0aG0gPSB7XG4gICAgICBuYW1lOiBcIkhNQUNcIixcbiAgICAgIGhhc2g6IHtcbiAgICAgICAgbmFtZTogXCJTSEEtMjU2XCJcbiAgICAgIH1cbiAgICB9O1xuICAgIGNvbnN0IGNyeXB0b0tleSA9IGF3YWl0IHN1YnRsZS5pbXBvcnRLZXkoXCJyYXdcIiwgbmV3IFVpbnQ4QXJyYXkoa2V5KSwgaW1wb3J0QWxnb3JpdGhtLCBmYWxzZSwgW1wic2lnblwiLCBcInZlcmlmeVwiXSk7XG4gICAgY29uc3Qgc2lnID0gYXdhaXQgc3VidGxlLnNpZ24oXCJITUFDXCIsIGNyeXB0b0tleSwgbXNnKTtcbiAgICBjb25zdCByZXN1bHQgPSBCdWZmZXIuZnJvbShuZXcgVWludDhBcnJheShzaWcpKTtcbiAgICByZXR1cm4gcmVzdWx0O1xuICB9XG4gIGNvbnN0IGhtYWMgPSBicm93c2VyQ3J5cHRvLmNyZWF0ZUhtYWMoXCJzaGEyNTZcIiwgQnVmZmVyLmZyb20oa2V5KSk7XG4gIGhtYWMudXBkYXRlKG1zZyk7XG4gIGNvbnN0IHJlc3VsdCA9IGhtYWMuZGlnZXN0KCk7XG4gIHJldHVybiByZXN1bHQ7XG59XG5hc3luYyBmdW5jdGlvbiBobWFjU2hhMjU2VmVyaWZ5KGtleSwgbXNnLCBzaWcpIHtcbiAgY29uc3QgZXhwZWN0ZWRTaWcgPSBhd2FpdCBobWFjU2hhMjU2U2lnbihrZXksIG1zZyk7XG4gIHJldHVybiBlcXVhbENvbnN0VGltZShleHBlY3RlZFNpZywgc2lnKTtcbn1cblxuLyoqXG4gKiBHZW5lcmF0ZSBhIG5ldyB2YWxpZCBwcml2YXRlIGtleS4gV2lsbCB1c2UgdGhlIHdpbmRvdy5jcnlwdG8gb3Igd2luZG93Lm1zQ3J5cHRvIGFzIHNvdXJjZVxuICogZGVwZW5kaW5nIG9uIHlvdXIgYnJvd3Nlci5cbiAqL1xuY29uc3QgZ2VuZXJhdGVQcml2YXRlID0gZnVuY3Rpb24gKCkge1xuICBsZXQgcHJpdmF0ZUtleSA9IHJhbmRvbUJ5dGVzKDMyKTtcbiAgd2hpbGUgKCFpc1ZhbGlkUHJpdmF0ZUtleShwcml2YXRlS2V5KSkge1xuICAgIHByaXZhdGVLZXkgPSByYW5kb21CeXRlcygzMik7XG4gIH1cbiAgcmV0dXJuIHByaXZhdGVLZXk7XG59O1xuY29uc3QgZ2V0UHVibGljID0gZnVuY3Rpb24gKHByaXZhdGVLZXkpIHtcbiAgLy8gVGhpcyBmdW5jdGlvbiBoYXMgc3luYyBBUEkgc28gd2UgdGhyb3cgYW4gZXJyb3IgaW1tZWRpYXRlbHkuXG4gIGFzc2VydChwcml2YXRlS2V5Lmxlbmd0aCA9PT0gMzIsIFwiQmFkIHByaXZhdGUga2V5XCIpO1xuICBhc3NlcnQoaXNWYWxpZFByaXZhdGVLZXkocHJpdmF0ZUtleSksIFwiQmFkIHByaXZhdGUga2V5XCIpO1xuICAvLyBYWFgoS2FnYW1pKTogYGVsbGlwdGljLnV0aWxzLmVuY29kZWAgcmV0dXJucyBhcnJheSBmb3IgZXZlcnlcbiAgLy8gZW5jb2RpbmcgZXhjZXB0IGBoZXhgLlxuICByZXR1cm4gQnVmZmVyLmZyb20oZWMua2V5RnJvbVByaXZhdGUocHJpdmF0ZUtleSkuZ2V0UHVibGljKFwiYXJyYXlcIikpO1xufTtcblxuLyoqXG4gKiBHZXQgY29tcHJlc3NlZCB2ZXJzaW9uIG9mIHB1YmxpYyBrZXkuXG4gKi9cbmNvbnN0IGdldFB1YmxpY0NvbXByZXNzZWQgPSBmdW5jdGlvbiAocHJpdmF0ZUtleSkge1xuICAvLyBqc2hpbnQgaWdub3JlOmxpbmVcbiAgYXNzZXJ0KHByaXZhdGVLZXkubGVuZ3RoID09PSAzMiwgXCJCYWQgcHJpdmF0ZSBrZXlcIik7XG4gIGFzc2VydChpc1ZhbGlkUHJpdmF0ZUtleShwcml2YXRlS2V5KSwgXCJCYWQgcHJpdmF0ZSBrZXlcIik7XG4gIC8vIFNlZSBodHRwczovL2dpdGh1Yi5jb20vd2FuZGVyZXIvc2VjcDI1NmsxLW5vZGUvaXNzdWVzLzQ2XG4gIGNvbnN0IGNvbXByZXNzZWQgPSB0cnVlO1xuICByZXR1cm4gQnVmZmVyLmZyb20oZWMua2V5RnJvbVByaXZhdGUocHJpdmF0ZUtleSkuZ2V0UHVibGljKGNvbXByZXNzZWQsIFwiYXJyYXlcIikpO1xufTtcblxuLy8gTk9URShLYWdhbWkpOiBXZSBkb24ndCB1c2UgcHJvbWlzZSBzaGltIGluIEJyb3dzZXIgaW1wbGVtZW50YXRpb25cbi8vIGJlY2F1c2UgaXQncyBzdXBwb3J0ZWQgbmF0aXZlbHkgaW4gbmV3IGJyb3dzZXJzIChzZWVcbi8vIDxodHRwOi8vY2FuaXVzZS5jb20vI2ZlYXQ9cHJvbWlzZXM+KSBhbmQgd2UgY2FuIHVzZSBvbmx5IG5ldyBicm93c2Vyc1xuLy8gYmVjYXVzZSBvZiB0aGUgV2ViQ3J5cHRvQVBJIChzZWVcbi8vIDxodHRwOi8vY2FuaXVzZS5jb20vI2ZlYXQ9Y3J5cHRvZ3JhcGh5PikuXG5jb25zdCBzaWduID0gYXN5bmMgZnVuY3Rpb24gKHByaXZhdGVLZXksIG1zZykge1xuICBhc3NlcnQocHJpdmF0ZUtleS5sZW5ndGggPT09IDMyLCBcIkJhZCBwcml2YXRlIGtleVwiKTtcbiAgYXNzZXJ0KGlzVmFsaWRQcml2YXRlS2V5KHByaXZhdGVLZXkpLCBcIkJhZCBwcml2YXRlIGtleVwiKTtcbiAgYXNzZXJ0KG1zZy5sZW5ndGggPiAwLCBcIk1lc3NhZ2Ugc2hvdWxkIG5vdCBiZSBlbXB0eVwiKTtcbiAgYXNzZXJ0KG1zZy5sZW5ndGggPD0gMzIsIFwiTWVzc2FnZSBpcyB0b28gbG9uZ1wiKTtcbiAgcmV0dXJuIEJ1ZmZlci5mcm9tKGVjLnNpZ24obXNnLCBwcml2YXRlS2V5LCB7XG4gICAgY2Fub25pY2FsOiB0cnVlXG4gIH0pLnRvREVSKCkpO1xufTtcbmNvbnN0IHZlcmlmeSA9IGFzeW5jIGZ1bmN0aW9uIChwdWJsaWNLZXksIG1zZywgc2lnKSB7XG4gIGFzc2VydChwdWJsaWNLZXkubGVuZ3RoID09PSA2NSB8fCBwdWJsaWNLZXkubGVuZ3RoID09PSAzMywgXCJCYWQgcHVibGljIGtleVwiKTtcbiAgaWYgKHB1YmxpY0tleS5sZW5ndGggPT09IDY1KSB7XG4gICAgYXNzZXJ0KHB1YmxpY0tleVswXSA9PT0gNCwgXCJCYWQgcHVibGljIGtleVwiKTtcbiAgfVxuICBpZiAocHVibGljS2V5Lmxlbmd0aCA9PT0gMzMpIHtcbiAgICBhc3NlcnQocHVibGljS2V5WzBdID09PSAyIHx8IHB1YmxpY0tleVswXSA9PT0gMywgXCJCYWQgcHVibGljIGtleVwiKTtcbiAgfVxuICBhc3NlcnQobXNnLmxlbmd0aCA+IDAsIFwiTWVzc2FnZSBzaG91bGQgbm90IGJlIGVtcHR5XCIpO1xuICBhc3NlcnQobXNnLmxlbmd0aCA8PSAzMiwgXCJNZXNzYWdlIGlzIHRvbyBsb25nXCIpO1xuICBpZiAoZWMudmVyaWZ5KG1zZywgc2lnLCBwdWJsaWNLZXkpKSB7XG4gICAgcmV0dXJuIG51bGw7XG4gIH1cbiAgdGhyb3cgbmV3IEVycm9yKFwiQmFkIHNpZ25hdHVyZVwiKTtcbn07XG5jb25zdCBkZXJpdmUgPSBhc3luYyBmdW5jdGlvbiAocHJpdmF0ZUtleUEsIHB1YmxpY0tleUIpIHtcbiAgYXNzZXJ0KEJ1ZmZlci5pc0J1ZmZlcihwcml2YXRlS2V5QSksIFwiQmFkIHByaXZhdGUga2V5XCIpO1xuICBhc3NlcnQoQnVmZmVyLmlzQnVmZmVyKHB1YmxpY0tleUIpLCBcIkJhZCBwdWJsaWMga2V5XCIpO1xuICBhc3NlcnQocHJpdmF0ZUtleUEubGVuZ3RoID09PSAzMiwgXCJCYWQgcHJpdmF0ZSBrZXlcIik7XG4gIGFzc2VydChpc1ZhbGlkUHJpdmF0ZUtleShwcml2YXRlS2V5QSksIFwiQmFkIHByaXZhdGUga2V5XCIpO1xuICBhc3NlcnQocHVibGljS2V5Qi5sZW5ndGggPT09IDY1IHx8IHB1YmxpY0tleUIubGVuZ3RoID09PSAzMywgXCJCYWQgcHVibGljIGtleVwiKTtcbiAgaWYgKHB1YmxpY0tleUIubGVuZ3RoID09PSA2NSkge1xuICAgIGFzc2VydChwdWJsaWNLZXlCWzBdID09PSA0LCBcIkJhZCBwdWJsaWMga2V5XCIpO1xuICB9XG4gIGlmIChwdWJsaWNLZXlCLmxlbmd0aCA9PT0gMzMpIHtcbiAgICBhc3NlcnQocHVibGljS2V5QlswXSA9PT0gMiB8fCBwdWJsaWNLZXlCWzBdID09PSAzLCBcIkJhZCBwdWJsaWMga2V5XCIpO1xuICB9XG4gIGNvbnN0IGtleUEgPSBlYy5rZXlGcm9tUHJpdmF0ZShwcml2YXRlS2V5QSk7XG4gIGNvbnN0IGtleUIgPSBlYy5rZXlGcm9tUHVibGljKHB1YmxpY0tleUIpO1xuICBjb25zdCBQeCA9IGtleUEuZGVyaXZlKGtleUIuZ2V0UHVibGljKCkpOyAvLyBCTiBpbnN0YW5jZVxuICByZXR1cm4gQnVmZmVyLmZyb20oUHgudG9BcnJheSgpKTtcbn07XG5jb25zdCBkZXJpdmVVbnBhZGRlZCA9IGRlcml2ZTtcbmNvbnN0IGRlcml2ZVBhZGRlZCA9IGFzeW5jIGZ1bmN0aW9uIChwcml2YXRlS2V5QSwgcHVibGljS2V5Qikge1xuICBhc3NlcnQoQnVmZmVyLmlzQnVmZmVyKHByaXZhdGVLZXlBKSwgXCJCYWQgcHJpdmF0ZSBrZXlcIik7XG4gIGFzc2VydChCdWZmZXIuaXNCdWZmZXIocHVibGljS2V5QiksIFwiQmFkIHB1YmxpYyBrZXlcIik7XG4gIGFzc2VydChwcml2YXRlS2V5QS5sZW5ndGggPT09IDMyLCBcIkJhZCBwcml2YXRlIGtleVwiKTtcbiAgYXNzZXJ0KGlzVmFsaWRQcml2YXRlS2V5KHByaXZhdGVLZXlBKSwgXCJCYWQgcHJpdmF0ZSBrZXlcIik7XG4gIGFzc2VydChwdWJsaWNLZXlCLmxlbmd0aCA9PT0gNjUgfHwgcHVibGljS2V5Qi5sZW5ndGggPT09IDMzLCBcIkJhZCBwdWJsaWMga2V5XCIpO1xuICBpZiAocHVibGljS2V5Qi5sZW5ndGggPT09IDY1KSB7XG4gICAgYXNzZXJ0KHB1YmxpY0tleUJbMF0gPT09IDQsIFwiQmFkIHB1YmxpYyBrZXlcIik7XG4gIH1cbiAgaWYgKHB1YmxpY0tleUIubGVuZ3RoID09PSAzMykge1xuICAgIGFzc2VydChwdWJsaWNLZXlCWzBdID09PSAyIHx8IHB1YmxpY0tleUJbMF0gPT09IDMsIFwiQmFkIHB1YmxpYyBrZXlcIik7XG4gIH1cbiAgY29uc3Qga2V5QSA9IGVjLmtleUZyb21Qcml2YXRlKHByaXZhdGVLZXlBKTtcbiAgY29uc3Qga2V5QiA9IGVjLmtleUZyb21QdWJsaWMocHVibGljS2V5Qik7XG4gIGNvbnN0IFB4ID0ga2V5QS5kZXJpdmUoa2V5Qi5nZXRQdWJsaWMoKSk7IC8vIEJOIGluc3RhbmNlXG4gIHJldHVybiBCdWZmZXIuZnJvbShQeC50b1N0cmluZygxNiwgNjQpLCBcImhleFwiKTtcbn07XG5jb25zdCBlbmNyeXB0ID0gYXN5bmMgZnVuY3Rpb24gKHB1YmxpY0tleVRvLCBtc2csIG9wdHMpIHtcbiAgb3B0cyA9IG9wdHMgfHwge307XG4gIGxldCBlcGhlbVByaXZhdGVLZXkgPSBvcHRzLmVwaGVtUHJpdmF0ZUtleSB8fCByYW5kb21CeXRlcygzMik7XG4gIC8vIFRoZXJlIGlzIGEgdmVyeSB1bmxpa2VseSBwb3NzaWJpbGl0eSB0aGF0IGl0IGlzIG5vdCBhIHZhbGlkIGtleVxuICB3aGlsZSAoIWlzVmFsaWRQcml2YXRlS2V5KGVwaGVtUHJpdmF0ZUtleSkpIHtcbiAgICBlcGhlbVByaXZhdGVLZXkgPSBvcHRzLmVwaGVtUHJpdmF0ZUtleSB8fCByYW5kb21CeXRlcygzMik7XG4gIH1cbiAgY29uc3QgZXBoZW1QdWJsaWNLZXkgPSBnZXRQdWJsaWMoZXBoZW1Qcml2YXRlS2V5KTtcbiAgY29uc3QgUHggPSBhd2FpdCBkZXJpdmVVbnBhZGRlZChlcGhlbVByaXZhdGVLZXksIHB1YmxpY0tleVRvKTtcbiAgY29uc3QgaGFzaCA9IGF3YWl0IHNoYTUxMihQeCk7XG4gIGNvbnN0IGl2ID0gb3B0cy5pdiB8fCByYW5kb21CeXRlcygxNik7XG4gIGNvbnN0IGVuY3J5cHRpb25LZXkgPSBoYXNoLnNsaWNlKDAsIDMyKTtcbiAgY29uc3QgbWFjS2V5ID0gaGFzaC5zbGljZSgzMik7XG4gIGNvbnN0IGRhdGEgPSBhd2FpdCBhZXNDYmNFbmNyeXB0KGl2LCBCdWZmZXIuZnJvbShlbmNyeXB0aW9uS2V5KSwgbXNnKTtcbiAgY29uc3QgY2lwaGVydGV4dCA9IGRhdGE7XG4gIGNvbnN0IGRhdGFUb01hYyA9IEJ1ZmZlci5jb25jYXQoW2l2LCBlcGhlbVB1YmxpY0tleSwgY2lwaGVydGV4dF0pO1xuICBjb25zdCBtYWMgPSBhd2FpdCBobWFjU2hhMjU2U2lnbihCdWZmZXIuZnJvbShtYWNLZXkpLCBkYXRhVG9NYWMpO1xuICByZXR1cm4ge1xuICAgIGl2LFxuICAgIGVwaGVtUHVibGljS2V5LFxuICAgIGNpcGhlcnRleHQsXG4gICAgbWFjXG4gIH07XG59O1xuY29uc3QgZGVjcnlwdCA9IGFzeW5jIGZ1bmN0aW9uIChwcml2YXRlS2V5LCBvcHRzLCBfcGFkZGluZykge1xuICBjb25zdCBwYWRkaW5nID0gX3BhZGRpbmcgIT09IG51bGwgJiYgX3BhZGRpbmcgIT09IHZvaWQgMCA/IF9wYWRkaW5nIDogZmFsc2U7XG4gIGNvbnN0IGRlcml2ZUxvY2FsID0gcGFkZGluZyA/IGRlcml2ZVBhZGRlZCA6IGRlcml2ZVVucGFkZGVkO1xuICBjb25zdCBQeCA9IGF3YWl0IGRlcml2ZUxvY2FsKHByaXZhdGVLZXksIG9wdHMuZXBoZW1QdWJsaWNLZXkpO1xuICBjb25zdCBoYXNoID0gYXdhaXQgc2hhNTEyKFB4KTtcbiAgY29uc3QgZW5jcnlwdGlvbktleSA9IGhhc2guc2xpY2UoMCwgMzIpO1xuICBjb25zdCBtYWNLZXkgPSBoYXNoLnNsaWNlKDMyKTtcbiAgY29uc3QgZGF0YVRvTWFjID0gQnVmZmVyLmNvbmNhdChbb3B0cy5pdiwgb3B0cy5lcGhlbVB1YmxpY0tleSwgb3B0cy5jaXBoZXJ0ZXh0XSk7XG4gIGNvbnN0IG1hY0dvb2QgPSBhd2FpdCBobWFjU2hhMjU2VmVyaWZ5KEJ1ZmZlci5mcm9tKG1hY0tleSksIGRhdGFUb01hYywgb3B0cy5tYWMpO1xuICBpZiAoIW1hY0dvb2QgJiYgcGFkZGluZyA9PT0gZmFsc2UpIHtcbiAgICByZXR1cm4gZGVjcnlwdChwcml2YXRlS2V5LCBvcHRzLCB0cnVlKTtcbiAgfSBlbHNlIGlmICghbWFjR29vZCAmJiBwYWRkaW5nID09PSB0cnVlKSB7XG4gICAgdGhyb3cgbmV3IEVycm9yKFwiYmFkIE1BQyBhZnRlciB0cnlpbmcgcGFkZGVkXCIpO1xuICB9XG4gIGNvbnN0IG1zZyA9IGF3YWl0IGFlc0NiY0RlY3J5cHQob3B0cy5pdiwgQnVmZmVyLmZyb20oZW5jcnlwdGlvbktleSksIG9wdHMuY2lwaGVydGV4dCk7XG4gIHJldHVybiBCdWZmZXIuZnJvbShuZXcgVWludDhBcnJheShtc2cpKTtcbn07XG5cbmV4cG9ydCB7IGRlY3J5cHQsIGRlcml2ZSwgZGVyaXZlUGFkZGVkLCBkZXJpdmVVbnBhZGRlZCwgZW5jcnlwdCwgZ2VuZXJhdGVQcml2YXRlLCBnZXRQdWJsaWMsIGdldFB1YmxpY0NvbXByZXNzZWQsIHNpZ24sIHZlcmlmeSB9O1xuIl0sIm5hbWVzIjpbXSwiaWdub3JlTGlzdCI6WzBdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/@toruslabs/eccrypto/dist/lib.esm/index.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/@toruslabs/http-helpers/dist/lib.esm/index.js":
/*!********************************************************************!*\
  !*** ./node_modules/@toruslabs/http-helpers/dist/lib.esm/index.js ***!
  \********************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   clearAPIKey: () => (/* binding */ clearAPIKey),\n/* harmony export */   clearEmbedHost: () => (/* binding */ clearEmbedHost),\n/* harmony export */   enableSentryTracing: () => (/* binding */ enableSentryTracing),\n/* harmony export */   gatewayAuthHeader: () => (/* binding */ gatewayAuthHeader),\n/* harmony export */   gatewayEmbedHostHeader: () => (/* binding */ gatewayEmbedHostHeader),\n/* harmony export */   generateJsonRPCObject: () => (/* binding */ generateJsonRPCObject),\n/* harmony export */   get: () => (/* binding */ get),\n/* harmony export */   getAPIKey: () => (/* binding */ getAPIKey),\n/* harmony export */   getEmbedHost: () => (/* binding */ getEmbedHost),\n/* harmony export */   patch: () => (/* binding */ patch),\n/* harmony export */   post: () => (/* binding */ post),\n/* harmony export */   promiseRace: () => (/* binding */ promiseRace),\n/* harmony export */   promiseTimeout: () => (/* binding */ promiseTimeout),\n/* harmony export */   put: () => (/* binding */ put),\n/* harmony export */   remove: () => (/* binding */ remove),\n/* harmony export */   setAPIKey: () => (/* binding */ setAPIKey),\n/* harmony export */   setEmbedHost: () => (/* binding */ setEmbedHost),\n/* harmony export */   setLogLevel: () => (/* binding */ setLogLevel)\n/* harmony export */ });\n/* harmony import */ var _babel_runtime_helpers_objectSpread2__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @babel/runtime/helpers/objectSpread2 */ \"(ssr)/./node_modules/@babel/runtime/helpers/objectSpread2.js\");\n/* harmony import */ var _babel_runtime_helpers_objectSpread2__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_helpers_objectSpread2__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var deepmerge__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! deepmerge */ \"(ssr)/./node_modules/deepmerge/dist/cjs.js\");\n/* harmony import */ var deepmerge__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(deepmerge__WEBPACK_IMPORTED_MODULE_1__);\n/* harmony import */ var loglevel__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! loglevel */ \"(ssr)/./node_modules/loglevel/lib/loglevel.js\");\n/* harmony import */ var loglevel__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(loglevel__WEBPACK_IMPORTED_MODULE_2__);\n\n\n\n\nconst log = loglevel__WEBPACK_IMPORTED_MODULE_2___default().getLogger(\"http-helpers\");\nlog.setLevel(loglevel__WEBPACK_IMPORTED_MODULE_2__.levels.INFO);\n\n// eslint-disable-next-line @typescript-eslint/no-empty-object-type\n\nlet apiKey = \"torus-default\";\nlet embedHost = \"\";\n\n// #region API Keys\nconst gatewayAuthHeader = \"x-api-key\";\nconst gatewayEmbedHostHeader = \"x-embed-host\";\nlet sentry = null;\nconst tracingOrigins = [];\nconst tracingPaths = [];\nfunction enableSentryTracing(_sentry, _tracingOrigins, _tracingPaths) {\n  sentry = _sentry;\n  tracingOrigins.push(..._tracingOrigins);\n  tracingPaths.push(..._tracingPaths);\n}\nfunction setEmbedHost(embedHost_) {\n  embedHost = embedHost_;\n}\nfunction clearEmbedHost() {\n  embedHost = \"\";\n}\nfunction getEmbedHost() {\n  return embedHost;\n}\nfunction setAPIKey(apiKey_) {\n  apiKey = apiKey_;\n}\nfunction clearAPIKey() {\n  apiKey = \"torus-default\";\n}\nfunction getAPIKey() {\n  return apiKey;\n}\n\n// #endregion\n\nfunction setLogLevel(level) {\n  log.setLevel(level);\n}\nasync function fetchAndTrace(url, init) {\n  let _url = null;\n  try {\n    _url = new URL(url);\n  } catch {\n    // ignore\n  }\n  if (sentry && _url && (tracingOrigins.includes(_url.origin) || tracingPaths.includes(_url.pathname))) {\n    const result = await sentry.startSpan({\n      name: url,\n      op: \"http.client\"\n    }, async () => {\n      const response = await fetch(url, init);\n      return response;\n    });\n    return result;\n  }\n  return fetch(url, init);\n}\nfunction getApiKeyHeaders() {\n  const headers = {};\n  if (apiKey) headers[gatewayAuthHeader] = apiKey;\n  if (embedHost) headers[gatewayEmbedHostHeader] = embedHost;\n  return headers;\n}\nfunction debugLogResponse(response) {\n  log.info(`Response: ${response.status} ${response.statusText}`);\n  log.info(`Url: ${response.url}`);\n}\nfunction logTracingHeader(response) {\n  const tracingHeader = response.headers.get(\"x-web3-correlation-id\");\n  if (tracingHeader) log.info(`Request tracing with traceID = ${tracingHeader}`);\n}\nconst promiseTimeout = async (ms, promise) => {\n  let timeoutFunc = null;\n  try {\n    const timeout = new Promise((_resolve, reject) => {\n      timeoutFunc = setTimeout(() => {\n        reject(new Error(`Timed out in ${ms}ms`));\n      }, ms);\n    });\n    const result = await Promise.race([promise, timeout]);\n    // promise.race will return the first resolved promise\n    // then we clear the timeout\n    if (timeoutFunc != null) {\n      clearTimeout(timeoutFunc);\n    }\n    return result;\n  } catch (err) {\n    // clear the timeout\n    if (timeoutFunc != null) {\n      clearTimeout(timeoutFunc);\n    }\n    // rethrow the original error\n    throw err;\n  }\n};\nconst get = async (url, options_ = {}, customOptions = {}) => {\n  const defaultOptions = {\n    mode: \"cors\",\n    headers: {}\n  };\n  if (customOptions.useAPIKey) {\n    defaultOptions.headers = _babel_runtime_helpers_objectSpread2__WEBPACK_IMPORTED_MODULE_0___default()(_babel_runtime_helpers_objectSpread2__WEBPACK_IMPORTED_MODULE_0___default()({}, defaultOptions.headers), getApiKeyHeaders());\n  }\n  options_.method = \"GET\";\n  const options = deepmerge__WEBPACK_IMPORTED_MODULE_1___default()(defaultOptions, options_);\n  const response = await fetchAndTrace(url, options);\n  if (response.ok) {\n    const responseContentType = response.headers.get(\"content-type\");\n    if (responseContentType !== null && responseContentType !== void 0 && responseContentType.includes(\"application/json\")) {\n      return response.json();\n    }\n    return response.text();\n  }\n  debugLogResponse(response);\n  throw response;\n};\nconst post = (url, data = {}, options_ = {}, customOptions = {}) => {\n  const defaultOptions = {\n    mode: \"cors\",\n    headers: {\n      \"Content-Type\": \"application/json; charset=utf-8\"\n    }\n  };\n  if (customOptions.useAPIKey) {\n    defaultOptions.headers = _babel_runtime_helpers_objectSpread2__WEBPACK_IMPORTED_MODULE_0___default()(_babel_runtime_helpers_objectSpread2__WEBPACK_IMPORTED_MODULE_0___default()({}, defaultOptions.headers), getApiKeyHeaders());\n  }\n  options_.method = \"POST\";\n  const options = deepmerge__WEBPACK_IMPORTED_MODULE_1___default()(defaultOptions, options_);\n\n  // deep merge changes the structure of form data and url encoded data ,\n  // so we should not deepmerge body data\n  if (customOptions.isUrlEncodedData) {\n    // for multipart request browser/client will add multipart content type\n    // along with multipart boundary , so for multipart request send\n    // content-type: undefined or send with multipart boundary if already known\n    options.body = data;\n    // If url encoded data, this must not be the content type\n    if (options.headers[\"Content-Type\"] === \"application/json; charset=utf-8\") delete options.headers[\"Content-Type\"];\n  } else {\n    options.body = JSON.stringify(data);\n  }\n  return promiseTimeout(customOptions.timeout || 60000, fetchAndTrace(url, options).then(response => {\n    if (customOptions.logTracingHeader) {\n      logTracingHeader(response);\n    }\n    if (response.ok) {\n      const responseContentType = response.headers.get(\"content-type\");\n      if (responseContentType !== null && responseContentType !== void 0 && responseContentType.includes(\"application/json\")) {\n        return response.json();\n      }\n      return response.text();\n    }\n    debugLogResponse(response);\n    throw response;\n  }));\n};\nconst patch = async (url, data = {}, options_ = {}, customOptions = {}) => {\n  const defaultOptions = {\n    mode: \"cors\",\n    headers: {\n      \"Content-Type\": \"application/json; charset=utf-8\"\n    }\n  };\n  // for multipart request browser/client will add multipart content type\n  // along with multipart boundary , so for multipart request send\n  // content-type: undefined or send with multipart boundary if already known\n  if (customOptions.useAPIKey) {\n    defaultOptions.headers = _babel_runtime_helpers_objectSpread2__WEBPACK_IMPORTED_MODULE_0___default()(_babel_runtime_helpers_objectSpread2__WEBPACK_IMPORTED_MODULE_0___default()({}, defaultOptions.headers), getApiKeyHeaders());\n  }\n  options_.method = \"PATCH\";\n  const options = deepmerge__WEBPACK_IMPORTED_MODULE_1___default()(defaultOptions, options_);\n  // deep merge changes the structure of form data and url encoded data ,\n  // so we should not deepmerge body data\n  if (customOptions.isUrlEncodedData) {\n    // for multipart request browser/client will add multipart content type\n    // along with multipart boundary , so for multipart request send\n    // content-type: undefined or send with multipart boundary if already known\n    options.body = data;\n    // If url encoded data, this must not be the content type\n    if (options.headers[\"Content-Type\"] === \"application/json; charset=utf-8\") delete options.headers[\"Content-Type\"];\n  } else {\n    options.body = JSON.stringify(data);\n  }\n  const response = await fetchAndTrace(url, options);\n  if (response.ok) {\n    const responseContentType = response.headers.get(\"content-type\");\n    if (responseContentType !== null && responseContentType !== void 0 && responseContentType.includes(\"application/json\")) {\n      return response.json();\n    }\n    return response.text();\n  }\n  debugLogResponse(response);\n  throw response;\n};\nconst put = async (url, data = {}, options_ = {}, customOptions = {}) => {\n  const defaultOptions = {\n    mode: \"cors\",\n    headers: {\n      \"Content-Type\": \"application/json; charset=utf-8\"\n    }\n  };\n  // for multipart request browser/client will add multipart content type\n  // along with multipart boundary , so for multipart request send\n  // content-type: undefined or send with multipart boundary if already known\n  if (customOptions.useAPIKey) {\n    defaultOptions.headers = _babel_runtime_helpers_objectSpread2__WEBPACK_IMPORTED_MODULE_0___default()(_babel_runtime_helpers_objectSpread2__WEBPACK_IMPORTED_MODULE_0___default()({}, defaultOptions.headers), getApiKeyHeaders());\n  }\n  options_.method = \"PUT\";\n  const options = deepmerge__WEBPACK_IMPORTED_MODULE_1___default()(defaultOptions, options_);\n  // deep merge changes the structure of form data and url encoded data ,\n  // so we should not deepmerge body data\n  if (customOptions.isUrlEncodedData) {\n    // for multipart request browser/client will add multipart content type\n    // along with multipart boundary , so for multipart request send\n    // content-type: undefined or send with multipart boundary if already known\n    options.body = data;\n    // If url encoded data, this must not be the content type\n    if (options.headers[\"Content-Type\"] === \"application/json; charset=utf-8\") delete options.headers[\"Content-Type\"];\n  } else {\n    options.body = JSON.stringify(data);\n  }\n  const response = await fetchAndTrace(url, options);\n  if (response.ok) {\n    const responseContentType = response.headers.get(\"content-type\");\n    if (responseContentType !== null && responseContentType !== void 0 && responseContentType.includes(\"application/json\")) {\n      return response.json();\n    }\n    return response.text();\n  }\n  debugLogResponse(response);\n  throw response;\n};\nconst remove = async (url, data = {}, options_ = {}, customOptions = {}) => {\n  const defaultOptions = {\n    mode: \"cors\",\n    headers: {\n      \"Content-Type\": \"application/json; charset=utf-8\"\n    }\n  };\n  // for multipart request browser/client will add multipart content type\n  // along with multipart boundary , so for multipart request send\n  // content-type: undefined or send with multipart boundary if already known\n  if (customOptions.useAPIKey) {\n    defaultOptions.headers = _babel_runtime_helpers_objectSpread2__WEBPACK_IMPORTED_MODULE_0___default()(_babel_runtime_helpers_objectSpread2__WEBPACK_IMPORTED_MODULE_0___default()({}, defaultOptions.headers), getApiKeyHeaders());\n  }\n  options_.method = \"DELETE\";\n  const options = deepmerge__WEBPACK_IMPORTED_MODULE_1___default()(defaultOptions, options_);\n  if (customOptions.isUrlEncodedData) {\n    // for multipart request browser/client will add multipart content type\n    // along with multipart boundary , so for multipart request send\n    // content-type: undefined or send with multipart boundary if already known\n    options.body = data;\n    // If url encoded data, this must not be the content type\n    if (options.headers[\"Content-Type\"] === \"application/json; charset=utf-8\") delete options.headers[\"Content-Type\"];\n  } else {\n    options.body = JSON.stringify(data);\n  }\n  const response = await fetchAndTrace(url, options);\n  if (response.ok) {\n    const responseContentType = response.headers.get(\"content-type\");\n    if (responseContentType !== null && responseContentType !== void 0 && responseContentType.includes(\"application/json\")) {\n      return response.json();\n    }\n    return response.text();\n  }\n  debugLogResponse(response);\n  throw response;\n};\nconst generateJsonRPCObject = (method, parameters) => ({\n  jsonrpc: \"2.0\",\n  method,\n  id: 10,\n  params: parameters\n});\nconst promiseRace = (url, options, timeout = 60000) => Promise.race([get(url, options), new Promise((_resolve, reject) => {\n  setTimeout(() => {\n    reject(new Error(\"timed out\"));\n  }, timeout);\n})]);\n\n\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvQHRvcnVzbGFicy9odHRwLWhlbHBlcnMvZGlzdC9saWIuZXNtL2luZGV4LmpzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7OztBQUFpRTtBQUNuQztBQUNjOztBQUU1QyxZQUFZLHlEQUFrQjtBQUM5QixhQUFhLDRDQUFNOztBQUVuQjs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxJQUFJO0FBQ0o7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHdCQUF3QixpQkFBaUIsRUFBRSxvQkFBb0I7QUFDL0QsbUJBQW1CLGFBQWE7QUFDaEM7QUFDQTtBQUNBO0FBQ0EsZ0VBQWdFLGNBQWM7QUFDOUU7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EseUNBQXlDLEdBQUc7QUFDNUMsT0FBTztBQUNQLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLElBQUk7QUFDSjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EscUNBQXFDLG9CQUFvQjtBQUN6RDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsNkJBQTZCLDJFQUFhLENBQUMsMkVBQWEsR0FBRztBQUMzRDtBQUNBO0FBQ0Esa0JBQWtCLGdEQUFLO0FBQ3ZCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSw0QkFBNEIsZUFBZSxvQkFBb0I7QUFDL0Q7QUFDQTtBQUNBO0FBQ0EseUNBQXlDO0FBQ3pDO0FBQ0E7QUFDQTtBQUNBLDZCQUE2QiwyRUFBYSxDQUFDLDJFQUFhLEdBQUc7QUFDM0Q7QUFDQTtBQUNBLGtCQUFrQixnREFBSzs7QUFFdkI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLCtEQUErRDtBQUMvRCxJQUFJO0FBQ0o7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsR0FBRztBQUNIO0FBQ0EsbUNBQW1DLGVBQWUsb0JBQW9CO0FBQ3RFO0FBQ0E7QUFDQTtBQUNBLHlDQUF5QztBQUN6QztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSw2QkFBNkIsMkVBQWEsQ0FBQywyRUFBYSxHQUFHO0FBQzNEO0FBQ0E7QUFDQSxrQkFBa0IsZ0RBQUs7QUFDdkI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLCtEQUErRDtBQUMvRCxJQUFJO0FBQ0o7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxpQ0FBaUMsZUFBZSxvQkFBb0I7QUFDcEU7QUFDQTtBQUNBO0FBQ0EseUNBQXlDO0FBQ3pDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLDZCQUE2QiwyRUFBYSxDQUFDLDJFQUFhLEdBQUc7QUFDM0Q7QUFDQTtBQUNBLGtCQUFrQixnREFBSztBQUN2QjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsK0RBQStEO0FBQy9ELElBQUk7QUFDSjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLG9DQUFvQyxlQUFlLG9CQUFvQjtBQUN2RTtBQUNBO0FBQ0E7QUFDQSx5Q0FBeUM7QUFDekM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsNkJBQTZCLDJFQUFhLENBQUMsMkVBQWEsR0FBRztBQUMzRDtBQUNBO0FBQ0Esa0JBQWtCLGdEQUFLO0FBQ3ZCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLCtEQUErRDtBQUMvRCxJQUFJO0FBQ0o7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsQ0FBQztBQUNEO0FBQ0E7QUFDQTtBQUNBLEdBQUc7QUFDSCxDQUFDOztBQUV3UCIsInNvdXJjZXMiOlsiL1VzZXJzL2FuZ2VsYWhlcnJhZG9ybG9wZXovRGVza3RvcC9DVEIvTVMzL3VzZWNhc2VzL25vZGVfbW9kdWxlcy9AdG9ydXNsYWJzL2h0dHAtaGVscGVycy9kaXN0L2xpYi5lc20vaW5kZXguanMiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IF9vYmplY3RTcHJlYWQgZnJvbSAnQGJhYmVsL3J1bnRpbWUvaGVscGVycy9vYmplY3RTcHJlYWQyJztcbmltcG9ydCBtZXJnZSBmcm9tICdkZWVwbWVyZ2UnO1xuaW1wb3J0IGxvZ0xldmVsLCB7IGxldmVscyB9IGZyb20gJ2xvZ2xldmVsJztcblxuY29uc3QgbG9nID0gbG9nTGV2ZWwuZ2V0TG9nZ2VyKFwiaHR0cC1oZWxwZXJzXCIpO1xubG9nLnNldExldmVsKGxldmVscy5JTkZPKTtcblxuLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIEB0eXBlc2NyaXB0LWVzbGludC9uby1lbXB0eS1vYmplY3QtdHlwZVxuXG5sZXQgYXBpS2V5ID0gXCJ0b3J1cy1kZWZhdWx0XCI7XG5sZXQgZW1iZWRIb3N0ID0gXCJcIjtcblxuLy8gI3JlZ2lvbiBBUEkgS2V5c1xuY29uc3QgZ2F0ZXdheUF1dGhIZWFkZXIgPSBcIngtYXBpLWtleVwiO1xuY29uc3QgZ2F0ZXdheUVtYmVkSG9zdEhlYWRlciA9IFwieC1lbWJlZC1ob3N0XCI7XG5sZXQgc2VudHJ5ID0gbnVsbDtcbmNvbnN0IHRyYWNpbmdPcmlnaW5zID0gW107XG5jb25zdCB0cmFjaW5nUGF0aHMgPSBbXTtcbmZ1bmN0aW9uIGVuYWJsZVNlbnRyeVRyYWNpbmcoX3NlbnRyeSwgX3RyYWNpbmdPcmlnaW5zLCBfdHJhY2luZ1BhdGhzKSB7XG4gIHNlbnRyeSA9IF9zZW50cnk7XG4gIHRyYWNpbmdPcmlnaW5zLnB1c2goLi4uX3RyYWNpbmdPcmlnaW5zKTtcbiAgdHJhY2luZ1BhdGhzLnB1c2goLi4uX3RyYWNpbmdQYXRocyk7XG59XG5mdW5jdGlvbiBzZXRFbWJlZEhvc3QoZW1iZWRIb3N0Xykge1xuICBlbWJlZEhvc3QgPSBlbWJlZEhvc3RfO1xufVxuZnVuY3Rpb24gY2xlYXJFbWJlZEhvc3QoKSB7XG4gIGVtYmVkSG9zdCA9IFwiXCI7XG59XG5mdW5jdGlvbiBnZXRFbWJlZEhvc3QoKSB7XG4gIHJldHVybiBlbWJlZEhvc3Q7XG59XG5mdW5jdGlvbiBzZXRBUElLZXkoYXBpS2V5Xykge1xuICBhcGlLZXkgPSBhcGlLZXlfO1xufVxuZnVuY3Rpb24gY2xlYXJBUElLZXkoKSB7XG4gIGFwaUtleSA9IFwidG9ydXMtZGVmYXVsdFwiO1xufVxuZnVuY3Rpb24gZ2V0QVBJS2V5KCkge1xuICByZXR1cm4gYXBpS2V5O1xufVxuXG4vLyAjZW5kcmVnaW9uXG5cbmZ1bmN0aW9uIHNldExvZ0xldmVsKGxldmVsKSB7XG4gIGxvZy5zZXRMZXZlbChsZXZlbCk7XG59XG5hc3luYyBmdW5jdGlvbiBmZXRjaEFuZFRyYWNlKHVybCwgaW5pdCkge1xuICBsZXQgX3VybCA9IG51bGw7XG4gIHRyeSB7XG4gICAgX3VybCA9IG5ldyBVUkwodXJsKTtcbiAgfSBjYXRjaCB7XG4gICAgLy8gaWdub3JlXG4gIH1cbiAgaWYgKHNlbnRyeSAmJiBfdXJsICYmICh0cmFjaW5nT3JpZ2lucy5pbmNsdWRlcyhfdXJsLm9yaWdpbikgfHwgdHJhY2luZ1BhdGhzLmluY2x1ZGVzKF91cmwucGF0aG5hbWUpKSkge1xuICAgIGNvbnN0IHJlc3VsdCA9IGF3YWl0IHNlbnRyeS5zdGFydFNwYW4oe1xuICAgICAgbmFtZTogdXJsLFxuICAgICAgb3A6IFwiaHR0cC5jbGllbnRcIlxuICAgIH0sIGFzeW5jICgpID0+IHtcbiAgICAgIGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgZmV0Y2godXJsLCBpbml0KTtcbiAgICAgIHJldHVybiByZXNwb25zZTtcbiAgICB9KTtcbiAgICByZXR1cm4gcmVzdWx0O1xuICB9XG4gIHJldHVybiBmZXRjaCh1cmwsIGluaXQpO1xufVxuZnVuY3Rpb24gZ2V0QXBpS2V5SGVhZGVycygpIHtcbiAgY29uc3QgaGVhZGVycyA9IHt9O1xuICBpZiAoYXBpS2V5KSBoZWFkZXJzW2dhdGV3YXlBdXRoSGVhZGVyXSA9IGFwaUtleTtcbiAgaWYgKGVtYmVkSG9zdCkgaGVhZGVyc1tnYXRld2F5RW1iZWRIb3N0SGVhZGVyXSA9IGVtYmVkSG9zdDtcbiAgcmV0dXJuIGhlYWRlcnM7XG59XG5mdW5jdGlvbiBkZWJ1Z0xvZ1Jlc3BvbnNlKHJlc3BvbnNlKSB7XG4gIGxvZy5pbmZvKGBSZXNwb25zZTogJHtyZXNwb25zZS5zdGF0dXN9ICR7cmVzcG9uc2Uuc3RhdHVzVGV4dH1gKTtcbiAgbG9nLmluZm8oYFVybDogJHtyZXNwb25zZS51cmx9YCk7XG59XG5mdW5jdGlvbiBsb2dUcmFjaW5nSGVhZGVyKHJlc3BvbnNlKSB7XG4gIGNvbnN0IHRyYWNpbmdIZWFkZXIgPSByZXNwb25zZS5oZWFkZXJzLmdldChcIngtd2ViMy1jb3JyZWxhdGlvbi1pZFwiKTtcbiAgaWYgKHRyYWNpbmdIZWFkZXIpIGxvZy5pbmZvKGBSZXF1ZXN0IHRyYWNpbmcgd2l0aCB0cmFjZUlEID0gJHt0cmFjaW5nSGVhZGVyfWApO1xufVxuY29uc3QgcHJvbWlzZVRpbWVvdXQgPSBhc3luYyAobXMsIHByb21pc2UpID0+IHtcbiAgbGV0IHRpbWVvdXRGdW5jID0gbnVsbDtcbiAgdHJ5IHtcbiAgICBjb25zdCB0aW1lb3V0ID0gbmV3IFByb21pc2UoKF9yZXNvbHZlLCByZWplY3QpID0+IHtcbiAgICAgIHRpbWVvdXRGdW5jID0gc2V0VGltZW91dCgoKSA9PiB7XG4gICAgICAgIHJlamVjdChuZXcgRXJyb3IoYFRpbWVkIG91dCBpbiAke21zfW1zYCkpO1xuICAgICAgfSwgbXMpO1xuICAgIH0pO1xuICAgIGNvbnN0IHJlc3VsdCA9IGF3YWl0IFByb21pc2UucmFjZShbcHJvbWlzZSwgdGltZW91dF0pO1xuICAgIC8vIHByb21pc2UucmFjZSB3aWxsIHJldHVybiB0aGUgZmlyc3QgcmVzb2x2ZWQgcHJvbWlzZVxuICAgIC8vIHRoZW4gd2UgY2xlYXIgdGhlIHRpbWVvdXRcbiAgICBpZiAodGltZW91dEZ1bmMgIT0gbnVsbCkge1xuICAgICAgY2xlYXJUaW1lb3V0KHRpbWVvdXRGdW5jKTtcbiAgICB9XG4gICAgcmV0dXJuIHJlc3VsdDtcbiAgfSBjYXRjaCAoZXJyKSB7XG4gICAgLy8gY2xlYXIgdGhlIHRpbWVvdXRcbiAgICBpZiAodGltZW91dEZ1bmMgIT0gbnVsbCkge1xuICAgICAgY2xlYXJUaW1lb3V0KHRpbWVvdXRGdW5jKTtcbiAgICB9XG4gICAgLy8gcmV0aHJvdyB0aGUgb3JpZ2luYWwgZXJyb3JcbiAgICB0aHJvdyBlcnI7XG4gIH1cbn07XG5jb25zdCBnZXQgPSBhc3luYyAodXJsLCBvcHRpb25zXyA9IHt9LCBjdXN0b21PcHRpb25zID0ge30pID0+IHtcbiAgY29uc3QgZGVmYXVsdE9wdGlvbnMgPSB7XG4gICAgbW9kZTogXCJjb3JzXCIsXG4gICAgaGVhZGVyczoge31cbiAgfTtcbiAgaWYgKGN1c3RvbU9wdGlvbnMudXNlQVBJS2V5KSB7XG4gICAgZGVmYXVsdE9wdGlvbnMuaGVhZGVycyA9IF9vYmplY3RTcHJlYWQoX29iamVjdFNwcmVhZCh7fSwgZGVmYXVsdE9wdGlvbnMuaGVhZGVycyksIGdldEFwaUtleUhlYWRlcnMoKSk7XG4gIH1cbiAgb3B0aW9uc18ubWV0aG9kID0gXCJHRVRcIjtcbiAgY29uc3Qgb3B0aW9ucyA9IG1lcmdlKGRlZmF1bHRPcHRpb25zLCBvcHRpb25zXyk7XG4gIGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgZmV0Y2hBbmRUcmFjZSh1cmwsIG9wdGlvbnMpO1xuICBpZiAocmVzcG9uc2Uub2spIHtcbiAgICBjb25zdCByZXNwb25zZUNvbnRlbnRUeXBlID0gcmVzcG9uc2UuaGVhZGVycy5nZXQoXCJjb250ZW50LXR5cGVcIik7XG4gICAgaWYgKHJlc3BvbnNlQ29udGVudFR5cGUgIT09IG51bGwgJiYgcmVzcG9uc2VDb250ZW50VHlwZSAhPT0gdm9pZCAwICYmIHJlc3BvbnNlQ29udGVudFR5cGUuaW5jbHVkZXMoXCJhcHBsaWNhdGlvbi9qc29uXCIpKSB7XG4gICAgICByZXR1cm4gcmVzcG9uc2UuanNvbigpO1xuICAgIH1cbiAgICByZXR1cm4gcmVzcG9uc2UudGV4dCgpO1xuICB9XG4gIGRlYnVnTG9nUmVzcG9uc2UocmVzcG9uc2UpO1xuICB0aHJvdyByZXNwb25zZTtcbn07XG5jb25zdCBwb3N0ID0gKHVybCwgZGF0YSA9IHt9LCBvcHRpb25zXyA9IHt9LCBjdXN0b21PcHRpb25zID0ge30pID0+IHtcbiAgY29uc3QgZGVmYXVsdE9wdGlvbnMgPSB7XG4gICAgbW9kZTogXCJjb3JzXCIsXG4gICAgaGVhZGVyczoge1xuICAgICAgXCJDb250ZW50LVR5cGVcIjogXCJhcHBsaWNhdGlvbi9qc29uOyBjaGFyc2V0PXV0Zi04XCJcbiAgICB9XG4gIH07XG4gIGlmIChjdXN0b21PcHRpb25zLnVzZUFQSUtleSkge1xuICAgIGRlZmF1bHRPcHRpb25zLmhlYWRlcnMgPSBfb2JqZWN0U3ByZWFkKF9vYmplY3RTcHJlYWQoe30sIGRlZmF1bHRPcHRpb25zLmhlYWRlcnMpLCBnZXRBcGlLZXlIZWFkZXJzKCkpO1xuICB9XG4gIG9wdGlvbnNfLm1ldGhvZCA9IFwiUE9TVFwiO1xuICBjb25zdCBvcHRpb25zID0gbWVyZ2UoZGVmYXVsdE9wdGlvbnMsIG9wdGlvbnNfKTtcblxuICAvLyBkZWVwIG1lcmdlIGNoYW5nZXMgdGhlIHN0cnVjdHVyZSBvZiBmb3JtIGRhdGEgYW5kIHVybCBlbmNvZGVkIGRhdGEgLFxuICAvLyBzbyB3ZSBzaG91bGQgbm90IGRlZXBtZXJnZSBib2R5IGRhdGFcbiAgaWYgKGN1c3RvbU9wdGlvbnMuaXNVcmxFbmNvZGVkRGF0YSkge1xuICAgIC8vIGZvciBtdWx0aXBhcnQgcmVxdWVzdCBicm93c2VyL2NsaWVudCB3aWxsIGFkZCBtdWx0aXBhcnQgY29udGVudCB0eXBlXG4gICAgLy8gYWxvbmcgd2l0aCBtdWx0aXBhcnQgYm91bmRhcnkgLCBzbyBmb3IgbXVsdGlwYXJ0IHJlcXVlc3Qgc2VuZFxuICAgIC8vIGNvbnRlbnQtdHlwZTogdW5kZWZpbmVkIG9yIHNlbmQgd2l0aCBtdWx0aXBhcnQgYm91bmRhcnkgaWYgYWxyZWFkeSBrbm93blxuICAgIG9wdGlvbnMuYm9keSA9IGRhdGE7XG4gICAgLy8gSWYgdXJsIGVuY29kZWQgZGF0YSwgdGhpcyBtdXN0IG5vdCBiZSB0aGUgY29udGVudCB0eXBlXG4gICAgaWYgKG9wdGlvbnMuaGVhZGVyc1tcIkNvbnRlbnQtVHlwZVwiXSA9PT0gXCJhcHBsaWNhdGlvbi9qc29uOyBjaGFyc2V0PXV0Zi04XCIpIGRlbGV0ZSBvcHRpb25zLmhlYWRlcnNbXCJDb250ZW50LVR5cGVcIl07XG4gIH0gZWxzZSB7XG4gICAgb3B0aW9ucy5ib2R5ID0gSlNPTi5zdHJpbmdpZnkoZGF0YSk7XG4gIH1cbiAgcmV0dXJuIHByb21pc2VUaW1lb3V0KGN1c3RvbU9wdGlvbnMudGltZW91dCB8fCA2MDAwMCwgZmV0Y2hBbmRUcmFjZSh1cmwsIG9wdGlvbnMpLnRoZW4ocmVzcG9uc2UgPT4ge1xuICAgIGlmIChjdXN0b21PcHRpb25zLmxvZ1RyYWNpbmdIZWFkZXIpIHtcbiAgICAgIGxvZ1RyYWNpbmdIZWFkZXIocmVzcG9uc2UpO1xuICAgIH1cbiAgICBpZiAocmVzcG9uc2Uub2spIHtcbiAgICAgIGNvbnN0IHJlc3BvbnNlQ29udGVudFR5cGUgPSByZXNwb25zZS5oZWFkZXJzLmdldChcImNvbnRlbnQtdHlwZVwiKTtcbiAgICAgIGlmIChyZXNwb25zZUNvbnRlbnRUeXBlICE9PSBudWxsICYmIHJlc3BvbnNlQ29udGVudFR5cGUgIT09IHZvaWQgMCAmJiByZXNwb25zZUNvbnRlbnRUeXBlLmluY2x1ZGVzKFwiYXBwbGljYXRpb24vanNvblwiKSkge1xuICAgICAgICByZXR1cm4gcmVzcG9uc2UuanNvbigpO1xuICAgICAgfVxuICAgICAgcmV0dXJuIHJlc3BvbnNlLnRleHQoKTtcbiAgICB9XG4gICAgZGVidWdMb2dSZXNwb25zZShyZXNwb25zZSk7XG4gICAgdGhyb3cgcmVzcG9uc2U7XG4gIH0pKTtcbn07XG5jb25zdCBwYXRjaCA9IGFzeW5jICh1cmwsIGRhdGEgPSB7fSwgb3B0aW9uc18gPSB7fSwgY3VzdG9tT3B0aW9ucyA9IHt9KSA9PiB7XG4gIGNvbnN0IGRlZmF1bHRPcHRpb25zID0ge1xuICAgIG1vZGU6IFwiY29yc1wiLFxuICAgIGhlYWRlcnM6IHtcbiAgICAgIFwiQ29udGVudC1UeXBlXCI6IFwiYXBwbGljYXRpb24vanNvbjsgY2hhcnNldD11dGYtOFwiXG4gICAgfVxuICB9O1xuICAvLyBmb3IgbXVsdGlwYXJ0IHJlcXVlc3QgYnJvd3Nlci9jbGllbnQgd2lsbCBhZGQgbXVsdGlwYXJ0IGNvbnRlbnQgdHlwZVxuICAvLyBhbG9uZyB3aXRoIG11bHRpcGFydCBib3VuZGFyeSAsIHNvIGZvciBtdWx0aXBhcnQgcmVxdWVzdCBzZW5kXG4gIC8vIGNvbnRlbnQtdHlwZTogdW5kZWZpbmVkIG9yIHNlbmQgd2l0aCBtdWx0aXBhcnQgYm91bmRhcnkgaWYgYWxyZWFkeSBrbm93blxuICBpZiAoY3VzdG9tT3B0aW9ucy51c2VBUElLZXkpIHtcbiAgICBkZWZhdWx0T3B0aW9ucy5oZWFkZXJzID0gX29iamVjdFNwcmVhZChfb2JqZWN0U3ByZWFkKHt9LCBkZWZhdWx0T3B0aW9ucy5oZWFkZXJzKSwgZ2V0QXBpS2V5SGVhZGVycygpKTtcbiAgfVxuICBvcHRpb25zXy5tZXRob2QgPSBcIlBBVENIXCI7XG4gIGNvbnN0IG9wdGlvbnMgPSBtZXJnZShkZWZhdWx0T3B0aW9ucywgb3B0aW9uc18pO1xuICAvLyBkZWVwIG1lcmdlIGNoYW5nZXMgdGhlIHN0cnVjdHVyZSBvZiBmb3JtIGRhdGEgYW5kIHVybCBlbmNvZGVkIGRhdGEgLFxuICAvLyBzbyB3ZSBzaG91bGQgbm90IGRlZXBtZXJnZSBib2R5IGRhdGFcbiAgaWYgKGN1c3RvbU9wdGlvbnMuaXNVcmxFbmNvZGVkRGF0YSkge1xuICAgIC8vIGZvciBtdWx0aXBhcnQgcmVxdWVzdCBicm93c2VyL2NsaWVudCB3aWxsIGFkZCBtdWx0aXBhcnQgY29udGVudCB0eXBlXG4gICAgLy8gYWxvbmcgd2l0aCBtdWx0aXBhcnQgYm91bmRhcnkgLCBzbyBmb3IgbXVsdGlwYXJ0IHJlcXVlc3Qgc2VuZFxuICAgIC8vIGNvbnRlbnQtdHlwZTogdW5kZWZpbmVkIG9yIHNlbmQgd2l0aCBtdWx0aXBhcnQgYm91bmRhcnkgaWYgYWxyZWFkeSBrbm93blxuICAgIG9wdGlvbnMuYm9keSA9IGRhdGE7XG4gICAgLy8gSWYgdXJsIGVuY29kZWQgZGF0YSwgdGhpcyBtdXN0IG5vdCBiZSB0aGUgY29udGVudCB0eXBlXG4gICAgaWYgKG9wdGlvbnMuaGVhZGVyc1tcIkNvbnRlbnQtVHlwZVwiXSA9PT0gXCJhcHBsaWNhdGlvbi9qc29uOyBjaGFyc2V0PXV0Zi04XCIpIGRlbGV0ZSBvcHRpb25zLmhlYWRlcnNbXCJDb250ZW50LVR5cGVcIl07XG4gIH0gZWxzZSB7XG4gICAgb3B0aW9ucy5ib2R5ID0gSlNPTi5zdHJpbmdpZnkoZGF0YSk7XG4gIH1cbiAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCBmZXRjaEFuZFRyYWNlKHVybCwgb3B0aW9ucyk7XG4gIGlmIChyZXNwb25zZS5vaykge1xuICAgIGNvbnN0IHJlc3BvbnNlQ29udGVudFR5cGUgPSByZXNwb25zZS5oZWFkZXJzLmdldChcImNvbnRlbnQtdHlwZVwiKTtcbiAgICBpZiAocmVzcG9uc2VDb250ZW50VHlwZSAhPT0gbnVsbCAmJiByZXNwb25zZUNvbnRlbnRUeXBlICE9PSB2b2lkIDAgJiYgcmVzcG9uc2VDb250ZW50VHlwZS5pbmNsdWRlcyhcImFwcGxpY2F0aW9uL2pzb25cIikpIHtcbiAgICAgIHJldHVybiByZXNwb25zZS5qc29uKCk7XG4gICAgfVxuICAgIHJldHVybiByZXNwb25zZS50ZXh0KCk7XG4gIH1cbiAgZGVidWdMb2dSZXNwb25zZShyZXNwb25zZSk7XG4gIHRocm93IHJlc3BvbnNlO1xufTtcbmNvbnN0IHB1dCA9IGFzeW5jICh1cmwsIGRhdGEgPSB7fSwgb3B0aW9uc18gPSB7fSwgY3VzdG9tT3B0aW9ucyA9IHt9KSA9PiB7XG4gIGNvbnN0IGRlZmF1bHRPcHRpb25zID0ge1xuICAgIG1vZGU6IFwiY29yc1wiLFxuICAgIGhlYWRlcnM6IHtcbiAgICAgIFwiQ29udGVudC1UeXBlXCI6IFwiYXBwbGljYXRpb24vanNvbjsgY2hhcnNldD11dGYtOFwiXG4gICAgfVxuICB9O1xuICAvLyBmb3IgbXVsdGlwYXJ0IHJlcXVlc3QgYnJvd3Nlci9jbGllbnQgd2lsbCBhZGQgbXVsdGlwYXJ0IGNvbnRlbnQgdHlwZVxuICAvLyBhbG9uZyB3aXRoIG11bHRpcGFydCBib3VuZGFyeSAsIHNvIGZvciBtdWx0aXBhcnQgcmVxdWVzdCBzZW5kXG4gIC8vIGNvbnRlbnQtdHlwZTogdW5kZWZpbmVkIG9yIHNlbmQgd2l0aCBtdWx0aXBhcnQgYm91bmRhcnkgaWYgYWxyZWFkeSBrbm93blxuICBpZiAoY3VzdG9tT3B0aW9ucy51c2VBUElLZXkpIHtcbiAgICBkZWZhdWx0T3B0aW9ucy5oZWFkZXJzID0gX29iamVjdFNwcmVhZChfb2JqZWN0U3ByZWFkKHt9LCBkZWZhdWx0T3B0aW9ucy5oZWFkZXJzKSwgZ2V0QXBpS2V5SGVhZGVycygpKTtcbiAgfVxuICBvcHRpb25zXy5tZXRob2QgPSBcIlBVVFwiO1xuICBjb25zdCBvcHRpb25zID0gbWVyZ2UoZGVmYXVsdE9wdGlvbnMsIG9wdGlvbnNfKTtcbiAgLy8gZGVlcCBtZXJnZSBjaGFuZ2VzIHRoZSBzdHJ1Y3R1cmUgb2YgZm9ybSBkYXRhIGFuZCB1cmwgZW5jb2RlZCBkYXRhICxcbiAgLy8gc28gd2Ugc2hvdWxkIG5vdCBkZWVwbWVyZ2UgYm9keSBkYXRhXG4gIGlmIChjdXN0b21PcHRpb25zLmlzVXJsRW5jb2RlZERhdGEpIHtcbiAgICAvLyBmb3IgbXVsdGlwYXJ0IHJlcXVlc3QgYnJvd3Nlci9jbGllbnQgd2lsbCBhZGQgbXVsdGlwYXJ0IGNvbnRlbnQgdHlwZVxuICAgIC8vIGFsb25nIHdpdGggbXVsdGlwYXJ0IGJvdW5kYXJ5ICwgc28gZm9yIG11bHRpcGFydCByZXF1ZXN0IHNlbmRcbiAgICAvLyBjb250ZW50LXR5cGU6IHVuZGVmaW5lZCBvciBzZW5kIHdpdGggbXVsdGlwYXJ0IGJvdW5kYXJ5IGlmIGFscmVhZHkga25vd25cbiAgICBvcHRpb25zLmJvZHkgPSBkYXRhO1xuICAgIC8vIElmIHVybCBlbmNvZGVkIGRhdGEsIHRoaXMgbXVzdCBub3QgYmUgdGhlIGNvbnRlbnQgdHlwZVxuICAgIGlmIChvcHRpb25zLmhlYWRlcnNbXCJDb250ZW50LVR5cGVcIl0gPT09IFwiYXBwbGljYXRpb24vanNvbjsgY2hhcnNldD11dGYtOFwiKSBkZWxldGUgb3B0aW9ucy5oZWFkZXJzW1wiQ29udGVudC1UeXBlXCJdO1xuICB9IGVsc2Uge1xuICAgIG9wdGlvbnMuYm9keSA9IEpTT04uc3RyaW5naWZ5KGRhdGEpO1xuICB9XG4gIGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgZmV0Y2hBbmRUcmFjZSh1cmwsIG9wdGlvbnMpO1xuICBpZiAocmVzcG9uc2Uub2spIHtcbiAgICBjb25zdCByZXNwb25zZUNvbnRlbnRUeXBlID0gcmVzcG9uc2UuaGVhZGVycy5nZXQoXCJjb250ZW50LXR5cGVcIik7XG4gICAgaWYgKHJlc3BvbnNlQ29udGVudFR5cGUgIT09IG51bGwgJiYgcmVzcG9uc2VDb250ZW50VHlwZSAhPT0gdm9pZCAwICYmIHJlc3BvbnNlQ29udGVudFR5cGUuaW5jbHVkZXMoXCJhcHBsaWNhdGlvbi9qc29uXCIpKSB7XG4gICAgICByZXR1cm4gcmVzcG9uc2UuanNvbigpO1xuICAgIH1cbiAgICByZXR1cm4gcmVzcG9uc2UudGV4dCgpO1xuICB9XG4gIGRlYnVnTG9nUmVzcG9uc2UocmVzcG9uc2UpO1xuICB0aHJvdyByZXNwb25zZTtcbn07XG5jb25zdCByZW1vdmUgPSBhc3luYyAodXJsLCBkYXRhID0ge30sIG9wdGlvbnNfID0ge30sIGN1c3RvbU9wdGlvbnMgPSB7fSkgPT4ge1xuICBjb25zdCBkZWZhdWx0T3B0aW9ucyA9IHtcbiAgICBtb2RlOiBcImNvcnNcIixcbiAgICBoZWFkZXJzOiB7XG4gICAgICBcIkNvbnRlbnQtVHlwZVwiOiBcImFwcGxpY2F0aW9uL2pzb247IGNoYXJzZXQ9dXRmLThcIlxuICAgIH1cbiAgfTtcbiAgLy8gZm9yIG11bHRpcGFydCByZXF1ZXN0IGJyb3dzZXIvY2xpZW50IHdpbGwgYWRkIG11bHRpcGFydCBjb250ZW50IHR5cGVcbiAgLy8gYWxvbmcgd2l0aCBtdWx0aXBhcnQgYm91bmRhcnkgLCBzbyBmb3IgbXVsdGlwYXJ0IHJlcXVlc3Qgc2VuZFxuICAvLyBjb250ZW50LXR5cGU6IHVuZGVmaW5lZCBvciBzZW5kIHdpdGggbXVsdGlwYXJ0IGJvdW5kYXJ5IGlmIGFscmVhZHkga25vd25cbiAgaWYgKGN1c3RvbU9wdGlvbnMudXNlQVBJS2V5KSB7XG4gICAgZGVmYXVsdE9wdGlvbnMuaGVhZGVycyA9IF9vYmplY3RTcHJlYWQoX29iamVjdFNwcmVhZCh7fSwgZGVmYXVsdE9wdGlvbnMuaGVhZGVycyksIGdldEFwaUtleUhlYWRlcnMoKSk7XG4gIH1cbiAgb3B0aW9uc18ubWV0aG9kID0gXCJERUxFVEVcIjtcbiAgY29uc3Qgb3B0aW9ucyA9IG1lcmdlKGRlZmF1bHRPcHRpb25zLCBvcHRpb25zXyk7XG4gIGlmIChjdXN0b21PcHRpb25zLmlzVXJsRW5jb2RlZERhdGEpIHtcbiAgICAvLyBmb3IgbXVsdGlwYXJ0IHJlcXVlc3QgYnJvd3Nlci9jbGllbnQgd2lsbCBhZGQgbXVsdGlwYXJ0IGNvbnRlbnQgdHlwZVxuICAgIC8vIGFsb25nIHdpdGggbXVsdGlwYXJ0IGJvdW5kYXJ5ICwgc28gZm9yIG11bHRpcGFydCByZXF1ZXN0IHNlbmRcbiAgICAvLyBjb250ZW50LXR5cGU6IHVuZGVmaW5lZCBvciBzZW5kIHdpdGggbXVsdGlwYXJ0IGJvdW5kYXJ5IGlmIGFscmVhZHkga25vd25cbiAgICBvcHRpb25zLmJvZHkgPSBkYXRhO1xuICAgIC8vIElmIHVybCBlbmNvZGVkIGRhdGEsIHRoaXMgbXVzdCBub3QgYmUgdGhlIGNvbnRlbnQgdHlwZVxuICAgIGlmIChvcHRpb25zLmhlYWRlcnNbXCJDb250ZW50LVR5cGVcIl0gPT09IFwiYXBwbGljYXRpb24vanNvbjsgY2hhcnNldD11dGYtOFwiKSBkZWxldGUgb3B0aW9ucy5oZWFkZXJzW1wiQ29udGVudC1UeXBlXCJdO1xuICB9IGVsc2Uge1xuICAgIG9wdGlvbnMuYm9keSA9IEpTT04uc3RyaW5naWZ5KGRhdGEpO1xuICB9XG4gIGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgZmV0Y2hBbmRUcmFjZSh1cmwsIG9wdGlvbnMpO1xuICBpZiAocmVzcG9uc2Uub2spIHtcbiAgICBjb25zdCByZXNwb25zZUNvbnRlbnRUeXBlID0gcmVzcG9uc2UuaGVhZGVycy5nZXQoXCJjb250ZW50LXR5cGVcIik7XG4gICAgaWYgKHJlc3BvbnNlQ29udGVudFR5cGUgIT09IG51bGwgJiYgcmVzcG9uc2VDb250ZW50VHlwZSAhPT0gdm9pZCAwICYmIHJlc3BvbnNlQ29udGVudFR5cGUuaW5jbHVkZXMoXCJhcHBsaWNhdGlvbi9qc29uXCIpKSB7XG4gICAgICByZXR1cm4gcmVzcG9uc2UuanNvbigpO1xuICAgIH1cbiAgICByZXR1cm4gcmVzcG9uc2UudGV4dCgpO1xuICB9XG4gIGRlYnVnTG9nUmVzcG9uc2UocmVzcG9uc2UpO1xuICB0aHJvdyByZXNwb25zZTtcbn07XG5jb25zdCBnZW5lcmF0ZUpzb25SUENPYmplY3QgPSAobWV0aG9kLCBwYXJhbWV0ZXJzKSA9PiAoe1xuICBqc29ucnBjOiBcIjIuMFwiLFxuICBtZXRob2QsXG4gIGlkOiAxMCxcbiAgcGFyYW1zOiBwYXJhbWV0ZXJzXG59KTtcbmNvbnN0IHByb21pc2VSYWNlID0gKHVybCwgb3B0aW9ucywgdGltZW91dCA9IDYwMDAwKSA9PiBQcm9taXNlLnJhY2UoW2dldCh1cmwsIG9wdGlvbnMpLCBuZXcgUHJvbWlzZSgoX3Jlc29sdmUsIHJlamVjdCkgPT4ge1xuICBzZXRUaW1lb3V0KCgpID0+IHtcbiAgICByZWplY3QobmV3IEVycm9yKFwidGltZWQgb3V0XCIpKTtcbiAgfSwgdGltZW91dCk7XG59KV0pO1xuXG5leHBvcnQgeyBjbGVhckFQSUtleSwgY2xlYXJFbWJlZEhvc3QsIGVuYWJsZVNlbnRyeVRyYWNpbmcsIGdhdGV3YXlBdXRoSGVhZGVyLCBnYXRld2F5RW1iZWRIb3N0SGVhZGVyLCBnZW5lcmF0ZUpzb25SUENPYmplY3QsIGdldCwgZ2V0QVBJS2V5LCBnZXRFbWJlZEhvc3QsIHBhdGNoLCBwb3N0LCBwcm9taXNlUmFjZSwgcHJvbWlzZVRpbWVvdXQsIHB1dCwgcmVtb3ZlLCBzZXRBUElLZXksIHNldEVtYmVkSG9zdCwgc2V0TG9nTGV2ZWwgfTtcbiJdLCJuYW1lcyI6W10sImlnbm9yZUxpc3QiOlswXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/@toruslabs/http-helpers/dist/lib.esm/index.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/@toruslabs/metadata-helpers/dist/lib.esm/utils.js":
/*!************************************************************************!*\
  !*** ./node_modules/@toruslabs/metadata-helpers/dist/lib.esm/utils.js ***!
  \************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   ec: () => (/* binding */ ec),\n/* harmony export */   keccak256: () => (/* binding */ keccak256)\n/* harmony export */ });\n/* harmony import */ var elliptic__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! elliptic */ \"(ssr)/./node_modules/elliptic/lib/elliptic.js\");\n/* harmony import */ var elliptic__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(elliptic__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var ethereum_cryptography_keccak__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ethereum-cryptography/keccak */ \"(ssr)/./node_modules/ethereum-cryptography/esm/keccak.js\");\n\n\n\nfunction keccak256(a) {\n  return Buffer.from((0,ethereum_cryptography_keccak__WEBPACK_IMPORTED_MODULE_1__.keccak256)(a));\n}\nconst ec = new elliptic__WEBPACK_IMPORTED_MODULE_0__.ec(\"secp256k1\");\n\n\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvQHRvcnVzbGFicy9tZXRhZGF0YS1oZWxwZXJzL2Rpc3QvbGliLmVzbS91dGlscy5qcyIsIm1hcHBpbmdzIjoiOzs7Ozs7OztBQUFzQztBQUNrQzs7QUFFeEU7QUFDQSxxQkFBcUIsdUVBQVc7QUFDaEM7QUFDQSxlQUFlLHdDQUFJOztBQUVNIiwic291cmNlcyI6WyIvVXNlcnMvYW5nZWxhaGVycmFkb3Jsb3Blei9EZXNrdG9wL0NUQi9NUzMvdXNlY2FzZXMvbm9kZV9tb2R1bGVzL0B0b3J1c2xhYnMvbWV0YWRhdGEtaGVscGVycy9kaXN0L2xpYi5lc20vdXRpbHMuanMiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgZWMgYXMgZWMkMSB9IGZyb20gJ2VsbGlwdGljJztcbmltcG9ydCB7IGtlY2NhazI1NiBhcyBrZWNjYWsyNTYkMSB9IGZyb20gJ2V0aGVyZXVtLWNyeXB0b2dyYXBoeS9rZWNjYWsnO1xuXG5mdW5jdGlvbiBrZWNjYWsyNTYoYSkge1xuICByZXR1cm4gQnVmZmVyLmZyb20oa2VjY2FrMjU2JDEoYSkpO1xufVxuY29uc3QgZWMgPSBuZXcgZWMkMShcInNlY3AyNTZrMVwiKTtcblxuZXhwb3J0IHsgZWMsIGtlY2NhazI1NiB9O1xuIl0sIm5hbWVzIjpbXSwiaWdub3JlTGlzdCI6WzBdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/@toruslabs/metadata-helpers/dist/lib.esm/utils.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/@toruslabs/metadata-helpers/dist/lib.esm/webAuthnShareResolver.js":
/*!****************************************************************************************!*\
  !*** ./node_modules/@toruslabs/metadata-helpers/dist/lib.esm/webAuthnShareResolver.js ***!
  \****************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   decryptData: () => (/* binding */ decryptData),\n/* harmony export */   encParamsBufToHex: () => (/* binding */ encParamsBufToHex),\n/* harmony export */   encParamsHexToBuf: () => (/* binding */ encParamsHexToBuf),\n/* harmony export */   encryptAndSetData: () => (/* binding */ encryptAndSetData),\n/* harmony export */   encryptData: () => (/* binding */ encryptData),\n/* harmony export */   getAndDecryptData: () => (/* binding */ getAndDecryptData),\n/* harmony export */   getDeviceShare: () => (/* binding */ getDeviceShare),\n/* harmony export */   getTorusShare: () => (/* binding */ getTorusShare),\n/* harmony export */   setDeviceShare: () => (/* binding */ setDeviceShare),\n/* harmony export */   setTorusShare: () => (/* binding */ setTorusShare)\n/* harmony export */ });\n/* harmony import */ var _toruslabs_eccrypto__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @toruslabs/eccrypto */ \"(ssr)/./node_modules/@toruslabs/eccrypto/dist/lib.esm/index.js\");\n/* harmony import */ var _utils_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./utils.js */ \"(ssr)/./node_modules/@toruslabs/metadata-helpers/dist/lib.esm/utils.js\");\n\n\n\nconst WEBAUTHN_TORUS_SHARE = \"webauthn_torus_share\";\nconst WEBAUTHN_DEVICE_SHARE = \"webauthn_device_share\";\nfunction encParamsHexToBuf(encParamsHex) {\n  return {\n    iv: Buffer.from(encParamsHex.iv, \"hex\"),\n    ephemPublicKey: Buffer.from(encParamsHex.ephemPublicKey, \"hex\"),\n    ciphertext: Buffer.from(encParamsHex.ciphertext, \"hex\"),\n    mac: Buffer.from(encParamsHex.mac, \"hex\")\n  };\n}\nfunction encParamsBufToHex(encParams) {\n  return {\n    iv: Buffer.from(encParams.iv).toString(\"hex\"),\n    ephemPublicKey: Buffer.from(encParams.ephemPublicKey).toString(\"hex\"),\n    ciphertext: Buffer.from(encParams.ciphertext).toString(\"hex\"),\n    mac: Buffer.from(encParams.mac).toString(\"hex\")\n  };\n}\nasync function encryptData(privKeyHex, d) {\n  const serializedDec = JSON.stringify(d);\n  const serializedBuf = Buffer.from(serializedDec, \"utf-8\");\n  const encParams = await (0,_toruslabs_eccrypto__WEBPACK_IMPORTED_MODULE_0__.encrypt)((0,_toruslabs_eccrypto__WEBPACK_IMPORTED_MODULE_0__.getPublic)(Buffer.from(privKeyHex, \"hex\")), serializedBuf);\n  const encParamsHex = encParamsBufToHex(encParams);\n  const sData = JSON.stringify(encParamsHex);\n  return sData;\n}\nasync function decryptData(privKeyHex, d) {\n  const encParamsHex = JSON.parse(d);\n  const encParams = encParamsHexToBuf(encParamsHex);\n  const keyPair = _utils_js__WEBPACK_IMPORTED_MODULE_1__.ec.keyFromPrivate(privKeyHex);\n  const serializedBuf = await (0,_toruslabs_eccrypto__WEBPACK_IMPORTED_MODULE_0__.decrypt)(Buffer.from(keyPair.getPrivate().toString(\"hex\", 64), \"hex\"), encParams);\n  const serializedDec = serializedBuf.toString(\"utf-8\");\n  const data = JSON.parse(serializedDec);\n  return data;\n}\nasync function getAndDecryptData(m, privKeyHex, namespace) {\n  const keyPair = _utils_js__WEBPACK_IMPORTED_MODULE_1__.ec.keyFromPrivate(privKeyHex, \"hex\");\n  const pubKey = keyPair.getPublic();\n  const serializedData = await m.getMetadata({\n    pub_key_X: pubKey.getX().toString(16, 64),\n    pub_key_Y: pubKey.getY().toString(16, 64)\n  }, namespace);\n  if (!serializedData) {\n    return null;\n  }\n  const data = await decryptData(privKeyHex, serializedData);\n  return data;\n}\nasync function encryptAndSetData(m, privKeyHex, d, namespace) {\n  const sData = await encryptData(privKeyHex, d);\n  const metadataParams = m.generateMetadataParams(sData, privKeyHex);\n  await m.setMetadata(metadataParams, namespace);\n}\nasync function setTorusShare(m, webAuthnPubKey, webAuthnRefHex, subspace, subspaceData) {\n  const refKeyPair = _utils_js__WEBPACK_IMPORTED_MODULE_1__.ec.keyFromPrivate(webAuthnRefHex);\n  const privKey = refKeyPair.getPrivate();\n  const pubKey = _utils_js__WEBPACK_IMPORTED_MODULE_1__.ec.keyFromPublic({\n    x: webAuthnPubKey.pub_key_X,\n    y: webAuthnPubKey.pub_key_Y\n  });\n  const data = await getAndDecryptData(m, webAuthnRefHex, WEBAUTHN_TORUS_SHARE);\n  let d = {};\n  if (data) d = data;\n  const serializedSubspaceData = JSON.stringify(subspaceData);\n  const serializedSubspaceDataBuf = Buffer.from(serializedSubspaceData, \"utf-8\");\n  const encSubspaceData = await (0,_toruslabs_eccrypto__WEBPACK_IMPORTED_MODULE_0__.encrypt)(Buffer.from(pubKey.getPublic(\"hex\"), \"hex\"), serializedSubspaceDataBuf);\n  const encSubspaceDataHex = encParamsBufToHex(encSubspaceData);\n  d[subspace] = encSubspaceDataHex;\n  await encryptAndSetData(m, privKey.toString(\"hex\", 64), d, WEBAUTHN_TORUS_SHARE);\n}\nasync function setDeviceShare(m, webAuthnRefHex, subspace, subspaceData) {\n  const keyPair = _utils_js__WEBPACK_IMPORTED_MODULE_1__.ec.keyFromPrivate(webAuthnRefHex);\n  const privKey = keyPair.getPrivate();\n  const data = await getAndDecryptData(m, webAuthnRefHex, WEBAUTHN_DEVICE_SHARE);\n  let d = {};\n  if (data) d = data;\n  d[subspace] = subspaceData;\n  await encryptAndSetData(m, privKey.toString(\"hex\", 64), d, WEBAUTHN_DEVICE_SHARE);\n}\nasync function getTorusShare(m, webAuthnKeyHex, webAuthnRefHex, subspace) {\n  const data = await getAndDecryptData(m, webAuthnRefHex, WEBAUTHN_TORUS_SHARE);\n  if (!data) return null;\n  const encParamsHex = data[subspace];\n  if (!encParamsHex) return null;\n  const encParams = encParamsHexToBuf(encParamsHex);\n  const keyPair = _utils_js__WEBPACK_IMPORTED_MODULE_1__.ec.keyFromPrivate(webAuthnKeyHex);\n  const privKey = keyPair.getPrivate();\n  const serializedSubspaceDataBuf = await (0,_toruslabs_eccrypto__WEBPACK_IMPORTED_MODULE_0__.decrypt)(Buffer.from(privKey.toString(\"hex\", 64), \"hex\"), encParams);\n  const serializedSubspaceData = serializedSubspaceDataBuf.toString(\"utf-8\");\n  const subspaceData = JSON.parse(serializedSubspaceData);\n  return subspaceData;\n}\nasync function getDeviceShare(m, webAuthnRefHex, subspace) {\n  const data = await getAndDecryptData(m, webAuthnRefHex, WEBAUTHN_DEVICE_SHARE);\n  if (data) return data[subspace];\n  return null;\n}\n\n\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvQHRvcnVzbGFicy9tZXRhZGF0YS1oZWxwZXJzL2Rpc3QvbGliLmVzbS93ZWJBdXRoblNoYXJlUmVzb2x2ZXIuanMiLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7Ozs7O0FBQWtFO0FBQ2xDOztBQUVoQztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSwwQkFBMEIsNERBQU8sQ0FBQyw4REFBUztBQUMzQztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGtCQUFrQix5Q0FBRTtBQUNwQiw4QkFBOEIsNERBQU87QUFDckM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGtCQUFrQix5Q0FBRTtBQUNwQjtBQUNBO0FBQ0E7QUFDQTtBQUNBLEdBQUc7QUFDSDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxxQkFBcUIseUNBQUU7QUFDdkI7QUFDQSxpQkFBaUIseUNBQUU7QUFDbkI7QUFDQTtBQUNBLEdBQUc7QUFDSDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsZ0NBQWdDLDREQUFPO0FBQ3ZDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxrQkFBa0IseUNBQUU7QUFDcEI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxrQkFBa0IseUNBQUU7QUFDcEI7QUFDQSwwQ0FBMEMsNERBQU87QUFDakQ7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUU4SyIsInNvdXJjZXMiOlsiL1VzZXJzL2FuZ2VsYWhlcnJhZG9ybG9wZXovRGVza3RvcC9DVEIvTVMzL3VzZWNhc2VzL25vZGVfbW9kdWxlcy9AdG9ydXNsYWJzL21ldGFkYXRhLWhlbHBlcnMvZGlzdC9saWIuZXNtL3dlYkF1dGhuU2hhcmVSZXNvbHZlci5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBlbmNyeXB0LCBnZXRQdWJsaWMsIGRlY3J5cHQgfSBmcm9tICdAdG9ydXNsYWJzL2VjY3J5cHRvJztcbmltcG9ydCB7IGVjIH0gZnJvbSAnLi91dGlscy5qcyc7XG5cbmNvbnN0IFdFQkFVVEhOX1RPUlVTX1NIQVJFID0gXCJ3ZWJhdXRobl90b3J1c19zaGFyZVwiO1xuY29uc3QgV0VCQVVUSE5fREVWSUNFX1NIQVJFID0gXCJ3ZWJhdXRobl9kZXZpY2Vfc2hhcmVcIjtcbmZ1bmN0aW9uIGVuY1BhcmFtc0hleFRvQnVmKGVuY1BhcmFtc0hleCkge1xuICByZXR1cm4ge1xuICAgIGl2OiBCdWZmZXIuZnJvbShlbmNQYXJhbXNIZXguaXYsIFwiaGV4XCIpLFxuICAgIGVwaGVtUHVibGljS2V5OiBCdWZmZXIuZnJvbShlbmNQYXJhbXNIZXguZXBoZW1QdWJsaWNLZXksIFwiaGV4XCIpLFxuICAgIGNpcGhlcnRleHQ6IEJ1ZmZlci5mcm9tKGVuY1BhcmFtc0hleC5jaXBoZXJ0ZXh0LCBcImhleFwiKSxcbiAgICBtYWM6IEJ1ZmZlci5mcm9tKGVuY1BhcmFtc0hleC5tYWMsIFwiaGV4XCIpXG4gIH07XG59XG5mdW5jdGlvbiBlbmNQYXJhbXNCdWZUb0hleChlbmNQYXJhbXMpIHtcbiAgcmV0dXJuIHtcbiAgICBpdjogQnVmZmVyLmZyb20oZW5jUGFyYW1zLml2KS50b1N0cmluZyhcImhleFwiKSxcbiAgICBlcGhlbVB1YmxpY0tleTogQnVmZmVyLmZyb20oZW5jUGFyYW1zLmVwaGVtUHVibGljS2V5KS50b1N0cmluZyhcImhleFwiKSxcbiAgICBjaXBoZXJ0ZXh0OiBCdWZmZXIuZnJvbShlbmNQYXJhbXMuY2lwaGVydGV4dCkudG9TdHJpbmcoXCJoZXhcIiksXG4gICAgbWFjOiBCdWZmZXIuZnJvbShlbmNQYXJhbXMubWFjKS50b1N0cmluZyhcImhleFwiKVxuICB9O1xufVxuYXN5bmMgZnVuY3Rpb24gZW5jcnlwdERhdGEocHJpdktleUhleCwgZCkge1xuICBjb25zdCBzZXJpYWxpemVkRGVjID0gSlNPTi5zdHJpbmdpZnkoZCk7XG4gIGNvbnN0IHNlcmlhbGl6ZWRCdWYgPSBCdWZmZXIuZnJvbShzZXJpYWxpemVkRGVjLCBcInV0Zi04XCIpO1xuICBjb25zdCBlbmNQYXJhbXMgPSBhd2FpdCBlbmNyeXB0KGdldFB1YmxpYyhCdWZmZXIuZnJvbShwcml2S2V5SGV4LCBcImhleFwiKSksIHNlcmlhbGl6ZWRCdWYpO1xuICBjb25zdCBlbmNQYXJhbXNIZXggPSBlbmNQYXJhbXNCdWZUb0hleChlbmNQYXJhbXMpO1xuICBjb25zdCBzRGF0YSA9IEpTT04uc3RyaW5naWZ5KGVuY1BhcmFtc0hleCk7XG4gIHJldHVybiBzRGF0YTtcbn1cbmFzeW5jIGZ1bmN0aW9uIGRlY3J5cHREYXRhKHByaXZLZXlIZXgsIGQpIHtcbiAgY29uc3QgZW5jUGFyYW1zSGV4ID0gSlNPTi5wYXJzZShkKTtcbiAgY29uc3QgZW5jUGFyYW1zID0gZW5jUGFyYW1zSGV4VG9CdWYoZW5jUGFyYW1zSGV4KTtcbiAgY29uc3Qga2V5UGFpciA9IGVjLmtleUZyb21Qcml2YXRlKHByaXZLZXlIZXgpO1xuICBjb25zdCBzZXJpYWxpemVkQnVmID0gYXdhaXQgZGVjcnlwdChCdWZmZXIuZnJvbShrZXlQYWlyLmdldFByaXZhdGUoKS50b1N0cmluZyhcImhleFwiLCA2NCksIFwiaGV4XCIpLCBlbmNQYXJhbXMpO1xuICBjb25zdCBzZXJpYWxpemVkRGVjID0gc2VyaWFsaXplZEJ1Zi50b1N0cmluZyhcInV0Zi04XCIpO1xuICBjb25zdCBkYXRhID0gSlNPTi5wYXJzZShzZXJpYWxpemVkRGVjKTtcbiAgcmV0dXJuIGRhdGE7XG59XG5hc3luYyBmdW5jdGlvbiBnZXRBbmREZWNyeXB0RGF0YShtLCBwcml2S2V5SGV4LCBuYW1lc3BhY2UpIHtcbiAgY29uc3Qga2V5UGFpciA9IGVjLmtleUZyb21Qcml2YXRlKHByaXZLZXlIZXgsIFwiaGV4XCIpO1xuICBjb25zdCBwdWJLZXkgPSBrZXlQYWlyLmdldFB1YmxpYygpO1xuICBjb25zdCBzZXJpYWxpemVkRGF0YSA9IGF3YWl0IG0uZ2V0TWV0YWRhdGEoe1xuICAgIHB1Yl9rZXlfWDogcHViS2V5LmdldFgoKS50b1N0cmluZygxNiwgNjQpLFxuICAgIHB1Yl9rZXlfWTogcHViS2V5LmdldFkoKS50b1N0cmluZygxNiwgNjQpXG4gIH0sIG5hbWVzcGFjZSk7XG4gIGlmICghc2VyaWFsaXplZERhdGEpIHtcbiAgICByZXR1cm4gbnVsbDtcbiAgfVxuICBjb25zdCBkYXRhID0gYXdhaXQgZGVjcnlwdERhdGEocHJpdktleUhleCwgc2VyaWFsaXplZERhdGEpO1xuICByZXR1cm4gZGF0YTtcbn1cbmFzeW5jIGZ1bmN0aW9uIGVuY3J5cHRBbmRTZXREYXRhKG0sIHByaXZLZXlIZXgsIGQsIG5hbWVzcGFjZSkge1xuICBjb25zdCBzRGF0YSA9IGF3YWl0IGVuY3J5cHREYXRhKHByaXZLZXlIZXgsIGQpO1xuICBjb25zdCBtZXRhZGF0YVBhcmFtcyA9IG0uZ2VuZXJhdGVNZXRhZGF0YVBhcmFtcyhzRGF0YSwgcHJpdktleUhleCk7XG4gIGF3YWl0IG0uc2V0TWV0YWRhdGEobWV0YWRhdGFQYXJhbXMsIG5hbWVzcGFjZSk7XG59XG5hc3luYyBmdW5jdGlvbiBzZXRUb3J1c1NoYXJlKG0sIHdlYkF1dGhuUHViS2V5LCB3ZWJBdXRoblJlZkhleCwgc3Vic3BhY2UsIHN1YnNwYWNlRGF0YSkge1xuICBjb25zdCByZWZLZXlQYWlyID0gZWMua2V5RnJvbVByaXZhdGUod2ViQXV0aG5SZWZIZXgpO1xuICBjb25zdCBwcml2S2V5ID0gcmVmS2V5UGFpci5nZXRQcml2YXRlKCk7XG4gIGNvbnN0IHB1YktleSA9IGVjLmtleUZyb21QdWJsaWMoe1xuICAgIHg6IHdlYkF1dGhuUHViS2V5LnB1Yl9rZXlfWCxcbiAgICB5OiB3ZWJBdXRoblB1YktleS5wdWJfa2V5X1lcbiAgfSk7XG4gIGNvbnN0IGRhdGEgPSBhd2FpdCBnZXRBbmREZWNyeXB0RGF0YShtLCB3ZWJBdXRoblJlZkhleCwgV0VCQVVUSE5fVE9SVVNfU0hBUkUpO1xuICBsZXQgZCA9IHt9O1xuICBpZiAoZGF0YSkgZCA9IGRhdGE7XG4gIGNvbnN0IHNlcmlhbGl6ZWRTdWJzcGFjZURhdGEgPSBKU09OLnN0cmluZ2lmeShzdWJzcGFjZURhdGEpO1xuICBjb25zdCBzZXJpYWxpemVkU3Vic3BhY2VEYXRhQnVmID0gQnVmZmVyLmZyb20oc2VyaWFsaXplZFN1YnNwYWNlRGF0YSwgXCJ1dGYtOFwiKTtcbiAgY29uc3QgZW5jU3Vic3BhY2VEYXRhID0gYXdhaXQgZW5jcnlwdChCdWZmZXIuZnJvbShwdWJLZXkuZ2V0UHVibGljKFwiaGV4XCIpLCBcImhleFwiKSwgc2VyaWFsaXplZFN1YnNwYWNlRGF0YUJ1Zik7XG4gIGNvbnN0IGVuY1N1YnNwYWNlRGF0YUhleCA9IGVuY1BhcmFtc0J1ZlRvSGV4KGVuY1N1YnNwYWNlRGF0YSk7XG4gIGRbc3Vic3BhY2VdID0gZW5jU3Vic3BhY2VEYXRhSGV4O1xuICBhd2FpdCBlbmNyeXB0QW5kU2V0RGF0YShtLCBwcml2S2V5LnRvU3RyaW5nKFwiaGV4XCIsIDY0KSwgZCwgV0VCQVVUSE5fVE9SVVNfU0hBUkUpO1xufVxuYXN5bmMgZnVuY3Rpb24gc2V0RGV2aWNlU2hhcmUobSwgd2ViQXV0aG5SZWZIZXgsIHN1YnNwYWNlLCBzdWJzcGFjZURhdGEpIHtcbiAgY29uc3Qga2V5UGFpciA9IGVjLmtleUZyb21Qcml2YXRlKHdlYkF1dGhuUmVmSGV4KTtcbiAgY29uc3QgcHJpdktleSA9IGtleVBhaXIuZ2V0UHJpdmF0ZSgpO1xuICBjb25zdCBkYXRhID0gYXdhaXQgZ2V0QW5kRGVjcnlwdERhdGEobSwgd2ViQXV0aG5SZWZIZXgsIFdFQkFVVEhOX0RFVklDRV9TSEFSRSk7XG4gIGxldCBkID0ge307XG4gIGlmIChkYXRhKSBkID0gZGF0YTtcbiAgZFtzdWJzcGFjZV0gPSBzdWJzcGFjZURhdGE7XG4gIGF3YWl0IGVuY3J5cHRBbmRTZXREYXRhKG0sIHByaXZLZXkudG9TdHJpbmcoXCJoZXhcIiwgNjQpLCBkLCBXRUJBVVRITl9ERVZJQ0VfU0hBUkUpO1xufVxuYXN5bmMgZnVuY3Rpb24gZ2V0VG9ydXNTaGFyZShtLCB3ZWJBdXRobktleUhleCwgd2ViQXV0aG5SZWZIZXgsIHN1YnNwYWNlKSB7XG4gIGNvbnN0IGRhdGEgPSBhd2FpdCBnZXRBbmREZWNyeXB0RGF0YShtLCB3ZWJBdXRoblJlZkhleCwgV0VCQVVUSE5fVE9SVVNfU0hBUkUpO1xuICBpZiAoIWRhdGEpIHJldHVybiBudWxsO1xuICBjb25zdCBlbmNQYXJhbXNIZXggPSBkYXRhW3N1YnNwYWNlXTtcbiAgaWYgKCFlbmNQYXJhbXNIZXgpIHJldHVybiBudWxsO1xuICBjb25zdCBlbmNQYXJhbXMgPSBlbmNQYXJhbXNIZXhUb0J1ZihlbmNQYXJhbXNIZXgpO1xuICBjb25zdCBrZXlQYWlyID0gZWMua2V5RnJvbVByaXZhdGUod2ViQXV0aG5LZXlIZXgpO1xuICBjb25zdCBwcml2S2V5ID0ga2V5UGFpci5nZXRQcml2YXRlKCk7XG4gIGNvbnN0IHNlcmlhbGl6ZWRTdWJzcGFjZURhdGFCdWYgPSBhd2FpdCBkZWNyeXB0KEJ1ZmZlci5mcm9tKHByaXZLZXkudG9TdHJpbmcoXCJoZXhcIiwgNjQpLCBcImhleFwiKSwgZW5jUGFyYW1zKTtcbiAgY29uc3Qgc2VyaWFsaXplZFN1YnNwYWNlRGF0YSA9IHNlcmlhbGl6ZWRTdWJzcGFjZURhdGFCdWYudG9TdHJpbmcoXCJ1dGYtOFwiKTtcbiAgY29uc3Qgc3Vic3BhY2VEYXRhID0gSlNPTi5wYXJzZShzZXJpYWxpemVkU3Vic3BhY2VEYXRhKTtcbiAgcmV0dXJuIHN1YnNwYWNlRGF0YTtcbn1cbmFzeW5jIGZ1bmN0aW9uIGdldERldmljZVNoYXJlKG0sIHdlYkF1dGhuUmVmSGV4LCBzdWJzcGFjZSkge1xuICBjb25zdCBkYXRhID0gYXdhaXQgZ2V0QW5kRGVjcnlwdERhdGEobSwgd2ViQXV0aG5SZWZIZXgsIFdFQkFVVEhOX0RFVklDRV9TSEFSRSk7XG4gIGlmIChkYXRhKSByZXR1cm4gZGF0YVtzdWJzcGFjZV07XG4gIHJldHVybiBudWxsO1xufVxuXG5leHBvcnQgeyBkZWNyeXB0RGF0YSwgZW5jUGFyYW1zQnVmVG9IZXgsIGVuY1BhcmFtc0hleFRvQnVmLCBlbmNyeXB0QW5kU2V0RGF0YSwgZW5jcnlwdERhdGEsIGdldEFuZERlY3J5cHREYXRhLCBnZXREZXZpY2VTaGFyZSwgZ2V0VG9ydXNTaGFyZSwgc2V0RGV2aWNlU2hhcmUsIHNldFRvcnVzU2hhcmUgfTtcbiJdLCJuYW1lcyI6W10sImlnbm9yZUxpc3QiOlswXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/@toruslabs/metadata-helpers/dist/lib.esm/webAuthnShareResolver.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/@toruslabs/secure-pub-sub/dist/lib.esm/SecurePubSub.js":
/*!*****************************************************************************!*\
  !*** ./node_modules/@toruslabs/secure-pub-sub/dist/lib.esm/SecurePubSub.js ***!
  \*****************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   SecurePubSub: () => (/* binding */ SecurePubSub)\n/* harmony export */ });\n/* harmony import */ var _babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @babel/runtime/helpers/defineProperty */ \"(ssr)/./node_modules/@babel/runtime/helpers/defineProperty.js\");\n/* harmony import */ var _babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var _toruslabs_constants__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @toruslabs/constants */ \"(ssr)/./node_modules/@toruslabs/constants/dist/lib.esm/constants.js\");\n/* harmony import */ var _toruslabs_eccrypto__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! @toruslabs/eccrypto */ \"(ssr)/./node_modules/@toruslabs/eccrypto/dist/lib.esm/index.js\");\n/* harmony import */ var _toruslabs_http_helpers__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! @toruslabs/http-helpers */ \"(ssr)/./node_modules/@toruslabs/http-helpers/dist/lib.esm/index.js\");\n/* harmony import */ var _toruslabs_metadata_helpers__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! @toruslabs/metadata-helpers */ \"(ssr)/./node_modules/@toruslabs/metadata-helpers/dist/lib.esm/utils.js\");\n/* harmony import */ var _toruslabs_metadata_helpers__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! @toruslabs/metadata-helpers */ \"(ssr)/./node_modules/@toruslabs/metadata-helpers/dist/lib.esm/webAuthnShareResolver.js\");\n/* harmony import */ var socket_io_client__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! socket.io-client */ \"(ssr)/./node_modules/socket.io-client/build/esm-debug/index.js\");\n/* harmony import */ var _log_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./log.js */ \"(ssr)/./node_modules/@toruslabs/secure-pub-sub/dist/lib.esm/log.js\");\n\n\n\n\n\n\n\n\nclass SecurePubSub {\n  constructor(options = {}) {\n    _babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_0___default()(this, \"options\", void 0);\n    _babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_0___default()(this, \"SOCKET_CONN\", null);\n    this.options = options;\n    this.options.timeout = options.timeout || 600; // 10 mins is default timeout\n    this.options.serverUrl = options.serverUrl || _toruslabs_constants__WEBPACK_IMPORTED_MODULE_2__.SESSION_SERVER_API_URL;\n    this.options.socketUrl = options.socketUrl || _toruslabs_constants__WEBPACK_IMPORTED_MODULE_2__.SESSION_SERVER_SOCKET_URL;\n    this.options.enableLogging = options.enableLogging || false;\n    this.options.namespace = options.namespace || \"\";\n    this.options.sameIpCheck = options.sameIpCheck || false;\n    this.options.sameOriginCheck = options.sameOriginCheck || false;\n    if (this.options.enableLogging) _log_js__WEBPACK_IMPORTED_MODULE_3__[\"default\"].enableAll();else _log_js__WEBPACK_IMPORTED_MODULE_3__[\"default\"].disableAll();\n  }\n  static setLogLevel(level) {\n    _log_js__WEBPACK_IMPORTED_MODULE_3__[\"default\"].setLevel(level);\n    (0,_toruslabs_http_helpers__WEBPACK_IMPORTED_MODULE_4__.setLogLevel)(level);\n  }\n  async publish(topic, message) {\n    const topicPrivKey = (0,_toruslabs_metadata_helpers__WEBPACK_IMPORTED_MODULE_5__.keccak256)(Buffer.from(topic, \"utf8\"));\n    const encryptedData = await (0,_toruslabs_metadata_helpers__WEBPACK_IMPORTED_MODULE_6__.encryptData)(topicPrivKey.toString(\"hex\"), message);\n    const signature = await (0,_toruslabs_eccrypto__WEBPACK_IMPORTED_MODULE_7__.sign)(topicPrivKey, (0,_toruslabs_metadata_helpers__WEBPACK_IMPORTED_MODULE_5__.keccak256)(Buffer.from(encryptedData, \"utf8\")));\n    const fetchBody = {\n      key: (0,_toruslabs_eccrypto__WEBPACK_IMPORTED_MODULE_7__.getPublic)(topicPrivKey).toString(\"hex\"),\n      // already padded\n      data: encryptedData,\n      signature: signature.toString(\"hex\"),\n      timeout: this.options.timeout,\n      namespace: this.options.namespace,\n      sameIpCheck: this.options.sameIpCheck,\n      sameOriginCheck: this.options.sameOriginCheck\n    };\n    return (0,_toruslabs_http_helpers__WEBPACK_IMPORTED_MODULE_4__.post)(`${this.options.serverUrl}/channel/set`, fetchBody);\n  }\n  async subscribe(topic) {\n    let isPromisePending = true;\n    const topicPrivKey = (0,_toruslabs_metadata_helpers__WEBPACK_IMPORTED_MODULE_5__.keccak256)(Buffer.from(topic, \"utf8\"));\n    const topicPubKey = (0,_toruslabs_eccrypto__WEBPACK_IMPORTED_MODULE_7__.getPublic)(topicPrivKey).toString(\"hex\"); // already padded\n    const currentSocketConnection = this.getSocketConnection();\n    if (currentSocketConnection.connected) {\n      _log_js__WEBPACK_IMPORTED_MODULE_3__[\"default\"].debug(\"already connected with socket\");\n      currentSocketConnection.emit(\"check_auth_status\", topicPubKey, {\n        namespace: this.options.namespace,\n        sameIpCheck: this.options.sameIpCheck,\n        sameOriginCheck: this.options.sameOriginCheck\n      });\n    } else {\n      currentSocketConnection.once(\"connect\", () => {\n        _log_js__WEBPACK_IMPORTED_MODULE_3__[\"default\"].debug(\"connected with socket\");\n        currentSocketConnection.emit(\"check_auth_status\", topicPubKey, {\n          namespace: this.options.namespace,\n          sameIpCheck: this.options.sameIpCheck,\n          sameOriginCheck: this.options.sameOriginCheck\n        });\n      });\n    }\n    const reconnect = () => {\n      currentSocketConnection.once(\"connect\", async () => {\n        _log_js__WEBPACK_IMPORTED_MODULE_3__[\"default\"].debug(\"connected with socket using reconnect\");\n        if (isPromisePending) currentSocketConnection.emit(\"check_auth_status\", topicPubKey, {\n          namespace: this.options.namespace,\n          sameIpCheck: this.options.sameIpCheck,\n          sameOriginCheck: this.options.sameOriginCheck\n        });\n      });\n    };\n    const visibilityListener = () => {\n      if (!isPromisePending) document.removeEventListener(\"visibilitychange\", visibilityListener);\n      // if not connected, then wait for connection and ping server for latest msg.\n      if (!currentSocketConnection.connected && document.visibilityState === \"visible\") {\n        reconnect();\n      }\n    };\n    const disconnectListener = () => {\n      _log_js__WEBPACK_IMPORTED_MODULE_3__[\"default\"].debug(\"socket disconnected\", isPromisePending);\n      if (isPromisePending) {\n        _log_js__WEBPACK_IMPORTED_MODULE_3__[\"default\"].error(\"socket disconnected unexpectedly, reconnecting socket\");\n        reconnect();\n      } else {\n        currentSocketConnection.removeListener(\"disconnect\", disconnectListener);\n      }\n    };\n    currentSocketConnection.on(\"disconnect\", disconnectListener);\n    const returnPromise = new Promise((resolve, reject) => {\n      const listener = async ev => {\n        try {\n          const decData = await (0,_toruslabs_metadata_helpers__WEBPACK_IMPORTED_MODULE_6__.decryptData)(topicPrivKey.toString(\"hex\"), ev);\n          _log_js__WEBPACK_IMPORTED_MODULE_3__[\"default\"].info(\"got data\", decData);\n          resolve(decData);\n        } catch (error) {\n          _log_js__WEBPACK_IMPORTED_MODULE_3__[\"default\"].error(error);\n          reject(error);\n        } finally {\n          isPromisePending = false;\n          document.removeEventListener(\"visibilitychange\", visibilityListener);\n        }\n      };\n      _log_js__WEBPACK_IMPORTED_MODULE_3__[\"default\"].info(\"listening to\", `${topicPubKey}_success`);\n      currentSocketConnection.once(`${topicPubKey}_success`, listener);\n    });\n    if (typeof document !== \"undefined\") document.addEventListener(\"visibilitychange\", visibilityListener);\n    return returnPromise;\n  }\n  cleanup() {\n    if (this.SOCKET_CONN) {\n      this.SOCKET_CONN.disconnect();\n      this.SOCKET_CONN = null;\n    }\n  }\n  getSocketConnection() {\n    if (this.SOCKET_CONN) return this.SOCKET_CONN;\n    const localSocketConnection = (0,socket_io_client__WEBPACK_IMPORTED_MODULE_1__.io)(this.options.socketUrl, {\n      transports: [\"websocket\", \"polling\"],\n      // use WebSocket first, if available\n      withCredentials: true,\n      reconnectionDelayMax: 10000,\n      reconnectionAttempts: 10\n    });\n    localSocketConnection.on(\"connect_error\", err => {\n      // revert to classic upgrade\n      localSocketConnection.io.opts.transports = [\"polling\", \"websocket\"];\n      _log_js__WEBPACK_IMPORTED_MODULE_3__[\"default\"].error(\"connect error\", err);\n    });\n    localSocketConnection.on(\"connect\", async () => {\n      const {\n        engine\n      } = localSocketConnection.io;\n      _log_js__WEBPACK_IMPORTED_MODULE_3__[\"default\"].debug(\"initially connected to\", engine.transport.name); // in most cases, prints \"polling\"\n      engine.once(\"upgrade\", () => {\n        // called when the transport is upgraded (i.e. from HTTP long-polling to WebSocket)\n        _log_js__WEBPACK_IMPORTED_MODULE_3__[\"default\"].debug(\"upgraded\", engine.transport.name); // in most cases, prints \"websocket\"\n      });\n      engine.once(\"close\", reason => {\n        // called when the underlying connection is closed\n        _log_js__WEBPACK_IMPORTED_MODULE_3__[\"default\"].debug(\"connection closed\", reason);\n      });\n    });\n    localSocketConnection.on(\"error\", err => {\n      _log_js__WEBPACK_IMPORTED_MODULE_3__[\"default\"].error(\"socket errored\", err);\n      localSocketConnection.disconnect();\n    });\n    this.SOCKET_CONN = localSocketConnection;\n    return this.SOCKET_CONN;\n  }\n}\n\n\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvQHRvcnVzbGFicy9zZWN1cmUtcHViLXN1Yi9kaXN0L2xpYi5lc20vU2VjdXJlUHViU3ViLmpzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7Ozs7QUFBb0U7QUFDcUI7QUFDbkM7QUFDTTtBQUNzQjtBQUM1QztBQUNYOztBQUUzQjtBQUNBLDBCQUEwQjtBQUMxQixJQUFJLDRFQUFlO0FBQ25CLElBQUksNEVBQWU7QUFDbkI7QUFDQSxtREFBbUQ7QUFDbkQsa0RBQWtELHdFQUFzQjtBQUN4RSxrREFBa0QsMkVBQXlCO0FBQzNFO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esb0NBQW9DLCtDQUFHLGFBQWEsS0FBSywrQ0FBRztBQUM1RDtBQUNBO0FBQ0EsSUFBSSwrQ0FBRztBQUNQLElBQUksb0VBQVc7QUFDZjtBQUNBO0FBQ0EseUJBQXlCLHNFQUFTO0FBQ2xDLGdDQUFnQyx3RUFBVztBQUMzQyw0QkFBNEIseURBQUksZUFBZSxzRUFBUztBQUN4RDtBQUNBLFdBQVcsOERBQVM7QUFDcEI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFdBQVcsNkRBQUksSUFBSSx1QkFBdUI7QUFDMUM7QUFDQTtBQUNBO0FBQ0EseUJBQXlCLHNFQUFTO0FBQ2xDLHdCQUF3Qiw4REFBUyxnQ0FBZ0M7QUFDakU7QUFDQTtBQUNBLE1BQU0sK0NBQUc7QUFDVDtBQUNBO0FBQ0E7QUFDQTtBQUNBLE9BQU87QUFDUCxNQUFNO0FBQ047QUFDQSxRQUFRLCtDQUFHO0FBQ1g7QUFDQTtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1QsT0FBTztBQUNQO0FBQ0E7QUFDQTtBQUNBLFFBQVEsK0NBQUc7QUFDWDtBQUNBO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVCxPQUFPO0FBQ1A7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsTUFBTSwrQ0FBRztBQUNUO0FBQ0EsUUFBUSwrQ0FBRztBQUNYO0FBQ0EsUUFBUTtBQUNSO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsZ0NBQWdDLHdFQUFXO0FBQzNDLFVBQVUsK0NBQUc7QUFDYjtBQUNBLFVBQVU7QUFDVixVQUFVLCtDQUFHO0FBQ2I7QUFDQSxVQUFVO0FBQ1Y7QUFDQTtBQUNBO0FBQ0E7QUFDQSxNQUFNLCtDQUFHLHlCQUF5QixZQUFZO0FBQzlDLHNDQUFzQyxZQUFZO0FBQ2xELEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esa0NBQWtDLG9EQUFFO0FBQ3BDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0EsTUFBTSwrQ0FBRztBQUNULEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQSxRQUFRO0FBQ1IsTUFBTSwrQ0FBRyx5REFBeUQ7QUFDbEU7QUFDQTtBQUNBLFFBQVEsK0NBQUcsMkNBQTJDO0FBQ3RELE9BQU87QUFDUDtBQUNBO0FBQ0EsUUFBUSwrQ0FBRztBQUNYLE9BQU87QUFDUCxLQUFLO0FBQ0w7QUFDQSxNQUFNLCtDQUFHO0FBQ1Q7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7O0FBRXdCIiwic291cmNlcyI6WyIvVXNlcnMvYW5nZWxhaGVycmFkb3Jsb3Blei9EZXNrdG9wL0NUQi9NUzMvdXNlY2FzZXMvbm9kZV9tb2R1bGVzL0B0b3J1c2xhYnMvc2VjdXJlLXB1Yi1zdWIvZGlzdC9saWIuZXNtL1NlY3VyZVB1YlN1Yi5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgX2RlZmluZVByb3BlcnR5IGZyb20gJ0BiYWJlbC9ydW50aW1lL2hlbHBlcnMvZGVmaW5lUHJvcGVydHknO1xuaW1wb3J0IHsgU0VTU0lPTl9TRVJWRVJfQVBJX1VSTCwgU0VTU0lPTl9TRVJWRVJfU09DS0VUX1VSTCB9IGZyb20gJ0B0b3J1c2xhYnMvY29uc3RhbnRzJztcbmltcG9ydCB7IHNpZ24sIGdldFB1YmxpYyB9IGZyb20gJ0B0b3J1c2xhYnMvZWNjcnlwdG8nO1xuaW1wb3J0IHsgc2V0TG9nTGV2ZWwsIHBvc3QgfSBmcm9tICdAdG9ydXNsYWJzL2h0dHAtaGVscGVycyc7XG5pbXBvcnQgeyBrZWNjYWsyNTYsIGVuY3J5cHREYXRhLCBkZWNyeXB0RGF0YSB9IGZyb20gJ0B0b3J1c2xhYnMvbWV0YWRhdGEtaGVscGVycyc7XG5pbXBvcnQgeyBpbyB9IGZyb20gJ3NvY2tldC5pby1jbGllbnQnO1xuaW1wb3J0IGxvZyBmcm9tICcuL2xvZy5qcyc7XG5cbmNsYXNzIFNlY3VyZVB1YlN1YiB7XG4gIGNvbnN0cnVjdG9yKG9wdGlvbnMgPSB7fSkge1xuICAgIF9kZWZpbmVQcm9wZXJ0eSh0aGlzLCBcIm9wdGlvbnNcIiwgdm9pZCAwKTtcbiAgICBfZGVmaW5lUHJvcGVydHkodGhpcywgXCJTT0NLRVRfQ09OTlwiLCBudWxsKTtcbiAgICB0aGlzLm9wdGlvbnMgPSBvcHRpb25zO1xuICAgIHRoaXMub3B0aW9ucy50aW1lb3V0ID0gb3B0aW9ucy50aW1lb3V0IHx8IDYwMDsgLy8gMTAgbWlucyBpcyBkZWZhdWx0IHRpbWVvdXRcbiAgICB0aGlzLm9wdGlvbnMuc2VydmVyVXJsID0gb3B0aW9ucy5zZXJ2ZXJVcmwgfHwgU0VTU0lPTl9TRVJWRVJfQVBJX1VSTDtcbiAgICB0aGlzLm9wdGlvbnMuc29ja2V0VXJsID0gb3B0aW9ucy5zb2NrZXRVcmwgfHwgU0VTU0lPTl9TRVJWRVJfU09DS0VUX1VSTDtcbiAgICB0aGlzLm9wdGlvbnMuZW5hYmxlTG9nZ2luZyA9IG9wdGlvbnMuZW5hYmxlTG9nZ2luZyB8fCBmYWxzZTtcbiAgICB0aGlzLm9wdGlvbnMubmFtZXNwYWNlID0gb3B0aW9ucy5uYW1lc3BhY2UgfHwgXCJcIjtcbiAgICB0aGlzLm9wdGlvbnMuc2FtZUlwQ2hlY2sgPSBvcHRpb25zLnNhbWVJcENoZWNrIHx8IGZhbHNlO1xuICAgIHRoaXMub3B0aW9ucy5zYW1lT3JpZ2luQ2hlY2sgPSBvcHRpb25zLnNhbWVPcmlnaW5DaGVjayB8fCBmYWxzZTtcbiAgICBpZiAodGhpcy5vcHRpb25zLmVuYWJsZUxvZ2dpbmcpIGxvZy5lbmFibGVBbGwoKTtlbHNlIGxvZy5kaXNhYmxlQWxsKCk7XG4gIH1cbiAgc3RhdGljIHNldExvZ0xldmVsKGxldmVsKSB7XG4gICAgbG9nLnNldExldmVsKGxldmVsKTtcbiAgICBzZXRMb2dMZXZlbChsZXZlbCk7XG4gIH1cbiAgYXN5bmMgcHVibGlzaCh0b3BpYywgbWVzc2FnZSkge1xuICAgIGNvbnN0IHRvcGljUHJpdktleSA9IGtlY2NhazI1NihCdWZmZXIuZnJvbSh0b3BpYywgXCJ1dGY4XCIpKTtcbiAgICBjb25zdCBlbmNyeXB0ZWREYXRhID0gYXdhaXQgZW5jcnlwdERhdGEodG9waWNQcml2S2V5LnRvU3RyaW5nKFwiaGV4XCIpLCBtZXNzYWdlKTtcbiAgICBjb25zdCBzaWduYXR1cmUgPSBhd2FpdCBzaWduKHRvcGljUHJpdktleSwga2VjY2FrMjU2KEJ1ZmZlci5mcm9tKGVuY3J5cHRlZERhdGEsIFwidXRmOFwiKSkpO1xuICAgIGNvbnN0IGZldGNoQm9keSA9IHtcbiAgICAgIGtleTogZ2V0UHVibGljKHRvcGljUHJpdktleSkudG9TdHJpbmcoXCJoZXhcIiksXG4gICAgICAvLyBhbHJlYWR5IHBhZGRlZFxuICAgICAgZGF0YTogZW5jcnlwdGVkRGF0YSxcbiAgICAgIHNpZ25hdHVyZTogc2lnbmF0dXJlLnRvU3RyaW5nKFwiaGV4XCIpLFxuICAgICAgdGltZW91dDogdGhpcy5vcHRpb25zLnRpbWVvdXQsXG4gICAgICBuYW1lc3BhY2U6IHRoaXMub3B0aW9ucy5uYW1lc3BhY2UsXG4gICAgICBzYW1lSXBDaGVjazogdGhpcy5vcHRpb25zLnNhbWVJcENoZWNrLFxuICAgICAgc2FtZU9yaWdpbkNoZWNrOiB0aGlzLm9wdGlvbnMuc2FtZU9yaWdpbkNoZWNrXG4gICAgfTtcbiAgICByZXR1cm4gcG9zdChgJHt0aGlzLm9wdGlvbnMuc2VydmVyVXJsfS9jaGFubmVsL3NldGAsIGZldGNoQm9keSk7XG4gIH1cbiAgYXN5bmMgc3Vic2NyaWJlKHRvcGljKSB7XG4gICAgbGV0IGlzUHJvbWlzZVBlbmRpbmcgPSB0cnVlO1xuICAgIGNvbnN0IHRvcGljUHJpdktleSA9IGtlY2NhazI1NihCdWZmZXIuZnJvbSh0b3BpYywgXCJ1dGY4XCIpKTtcbiAgICBjb25zdCB0b3BpY1B1YktleSA9IGdldFB1YmxpYyh0b3BpY1ByaXZLZXkpLnRvU3RyaW5nKFwiaGV4XCIpOyAvLyBhbHJlYWR5IHBhZGRlZFxuICAgIGNvbnN0IGN1cnJlbnRTb2NrZXRDb25uZWN0aW9uID0gdGhpcy5nZXRTb2NrZXRDb25uZWN0aW9uKCk7XG4gICAgaWYgKGN1cnJlbnRTb2NrZXRDb25uZWN0aW9uLmNvbm5lY3RlZCkge1xuICAgICAgbG9nLmRlYnVnKFwiYWxyZWFkeSBjb25uZWN0ZWQgd2l0aCBzb2NrZXRcIik7XG4gICAgICBjdXJyZW50U29ja2V0Q29ubmVjdGlvbi5lbWl0KFwiY2hlY2tfYXV0aF9zdGF0dXNcIiwgdG9waWNQdWJLZXksIHtcbiAgICAgICAgbmFtZXNwYWNlOiB0aGlzLm9wdGlvbnMubmFtZXNwYWNlLFxuICAgICAgICBzYW1lSXBDaGVjazogdGhpcy5vcHRpb25zLnNhbWVJcENoZWNrLFxuICAgICAgICBzYW1lT3JpZ2luQ2hlY2s6IHRoaXMub3B0aW9ucy5zYW1lT3JpZ2luQ2hlY2tcbiAgICAgIH0pO1xuICAgIH0gZWxzZSB7XG4gICAgICBjdXJyZW50U29ja2V0Q29ubmVjdGlvbi5vbmNlKFwiY29ubmVjdFwiLCAoKSA9PiB7XG4gICAgICAgIGxvZy5kZWJ1ZyhcImNvbm5lY3RlZCB3aXRoIHNvY2tldFwiKTtcbiAgICAgICAgY3VycmVudFNvY2tldENvbm5lY3Rpb24uZW1pdChcImNoZWNrX2F1dGhfc3RhdHVzXCIsIHRvcGljUHViS2V5LCB7XG4gICAgICAgICAgbmFtZXNwYWNlOiB0aGlzLm9wdGlvbnMubmFtZXNwYWNlLFxuICAgICAgICAgIHNhbWVJcENoZWNrOiB0aGlzLm9wdGlvbnMuc2FtZUlwQ2hlY2ssXG4gICAgICAgICAgc2FtZU9yaWdpbkNoZWNrOiB0aGlzLm9wdGlvbnMuc2FtZU9yaWdpbkNoZWNrXG4gICAgICAgIH0pO1xuICAgICAgfSk7XG4gICAgfVxuICAgIGNvbnN0IHJlY29ubmVjdCA9ICgpID0+IHtcbiAgICAgIGN1cnJlbnRTb2NrZXRDb25uZWN0aW9uLm9uY2UoXCJjb25uZWN0XCIsIGFzeW5jICgpID0+IHtcbiAgICAgICAgbG9nLmRlYnVnKFwiY29ubmVjdGVkIHdpdGggc29ja2V0IHVzaW5nIHJlY29ubmVjdFwiKTtcbiAgICAgICAgaWYgKGlzUHJvbWlzZVBlbmRpbmcpIGN1cnJlbnRTb2NrZXRDb25uZWN0aW9uLmVtaXQoXCJjaGVja19hdXRoX3N0YXR1c1wiLCB0b3BpY1B1YktleSwge1xuICAgICAgICAgIG5hbWVzcGFjZTogdGhpcy5vcHRpb25zLm5hbWVzcGFjZSxcbiAgICAgICAgICBzYW1lSXBDaGVjazogdGhpcy5vcHRpb25zLnNhbWVJcENoZWNrLFxuICAgICAgICAgIHNhbWVPcmlnaW5DaGVjazogdGhpcy5vcHRpb25zLnNhbWVPcmlnaW5DaGVja1xuICAgICAgICB9KTtcbiAgICAgIH0pO1xuICAgIH07XG4gICAgY29uc3QgdmlzaWJpbGl0eUxpc3RlbmVyID0gKCkgPT4ge1xuICAgICAgaWYgKCFpc1Byb21pc2VQZW5kaW5nKSBkb2N1bWVudC5yZW1vdmVFdmVudExpc3RlbmVyKFwidmlzaWJpbGl0eWNoYW5nZVwiLCB2aXNpYmlsaXR5TGlzdGVuZXIpO1xuICAgICAgLy8gaWYgbm90IGNvbm5lY3RlZCwgdGhlbiB3YWl0IGZvciBjb25uZWN0aW9uIGFuZCBwaW5nIHNlcnZlciBmb3IgbGF0ZXN0IG1zZy5cbiAgICAgIGlmICghY3VycmVudFNvY2tldENvbm5lY3Rpb24uY29ubmVjdGVkICYmIGRvY3VtZW50LnZpc2liaWxpdHlTdGF0ZSA9PT0gXCJ2aXNpYmxlXCIpIHtcbiAgICAgICAgcmVjb25uZWN0KCk7XG4gICAgICB9XG4gICAgfTtcbiAgICBjb25zdCBkaXNjb25uZWN0TGlzdGVuZXIgPSAoKSA9PiB7XG4gICAgICBsb2cuZGVidWcoXCJzb2NrZXQgZGlzY29ubmVjdGVkXCIsIGlzUHJvbWlzZVBlbmRpbmcpO1xuICAgICAgaWYgKGlzUHJvbWlzZVBlbmRpbmcpIHtcbiAgICAgICAgbG9nLmVycm9yKFwic29ja2V0IGRpc2Nvbm5lY3RlZCB1bmV4cGVjdGVkbHksIHJlY29ubmVjdGluZyBzb2NrZXRcIik7XG4gICAgICAgIHJlY29ubmVjdCgpO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgY3VycmVudFNvY2tldENvbm5lY3Rpb24ucmVtb3ZlTGlzdGVuZXIoXCJkaXNjb25uZWN0XCIsIGRpc2Nvbm5lY3RMaXN0ZW5lcik7XG4gICAgICB9XG4gICAgfTtcbiAgICBjdXJyZW50U29ja2V0Q29ubmVjdGlvbi5vbihcImRpc2Nvbm5lY3RcIiwgZGlzY29ubmVjdExpc3RlbmVyKTtcbiAgICBjb25zdCByZXR1cm5Qcm9taXNlID0gbmV3IFByb21pc2UoKHJlc29sdmUsIHJlamVjdCkgPT4ge1xuICAgICAgY29uc3QgbGlzdGVuZXIgPSBhc3luYyBldiA9PiB7XG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgY29uc3QgZGVjRGF0YSA9IGF3YWl0IGRlY3J5cHREYXRhKHRvcGljUHJpdktleS50b1N0cmluZyhcImhleFwiKSwgZXYpO1xuICAgICAgICAgIGxvZy5pbmZvKFwiZ290IGRhdGFcIiwgZGVjRGF0YSk7XG4gICAgICAgICAgcmVzb2x2ZShkZWNEYXRhKTtcbiAgICAgICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgICAgICBsb2cuZXJyb3IoZXJyb3IpO1xuICAgICAgICAgIHJlamVjdChlcnJvcik7XG4gICAgICAgIH0gZmluYWxseSB7XG4gICAgICAgICAgaXNQcm9taXNlUGVuZGluZyA9IGZhbHNlO1xuICAgICAgICAgIGRvY3VtZW50LnJlbW92ZUV2ZW50TGlzdGVuZXIoXCJ2aXNpYmlsaXR5Y2hhbmdlXCIsIHZpc2liaWxpdHlMaXN0ZW5lcik7XG4gICAgICAgIH1cbiAgICAgIH07XG4gICAgICBsb2cuaW5mbyhcImxpc3RlbmluZyB0b1wiLCBgJHt0b3BpY1B1YktleX1fc3VjY2Vzc2ApO1xuICAgICAgY3VycmVudFNvY2tldENvbm5lY3Rpb24ub25jZShgJHt0b3BpY1B1YktleX1fc3VjY2Vzc2AsIGxpc3RlbmVyKTtcbiAgICB9KTtcbiAgICBpZiAodHlwZW9mIGRvY3VtZW50ICE9PSBcInVuZGVmaW5lZFwiKSBkb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKFwidmlzaWJpbGl0eWNoYW5nZVwiLCB2aXNpYmlsaXR5TGlzdGVuZXIpO1xuICAgIHJldHVybiByZXR1cm5Qcm9taXNlO1xuICB9XG4gIGNsZWFudXAoKSB7XG4gICAgaWYgKHRoaXMuU09DS0VUX0NPTk4pIHtcbiAgICAgIHRoaXMuU09DS0VUX0NPTk4uZGlzY29ubmVjdCgpO1xuICAgICAgdGhpcy5TT0NLRVRfQ09OTiA9IG51bGw7XG4gICAgfVxuICB9XG4gIGdldFNvY2tldENvbm5lY3Rpb24oKSB7XG4gICAgaWYgKHRoaXMuU09DS0VUX0NPTk4pIHJldHVybiB0aGlzLlNPQ0tFVF9DT05OO1xuICAgIGNvbnN0IGxvY2FsU29ja2V0Q29ubmVjdGlvbiA9IGlvKHRoaXMub3B0aW9ucy5zb2NrZXRVcmwsIHtcbiAgICAgIHRyYW5zcG9ydHM6IFtcIndlYnNvY2tldFwiLCBcInBvbGxpbmdcIl0sXG4gICAgICAvLyB1c2UgV2ViU29ja2V0IGZpcnN0LCBpZiBhdmFpbGFibGVcbiAgICAgIHdpdGhDcmVkZW50aWFsczogdHJ1ZSxcbiAgICAgIHJlY29ubmVjdGlvbkRlbGF5TWF4OiAxMDAwMCxcbiAgICAgIHJlY29ubmVjdGlvbkF0dGVtcHRzOiAxMFxuICAgIH0pO1xuICAgIGxvY2FsU29ja2V0Q29ubmVjdGlvbi5vbihcImNvbm5lY3RfZXJyb3JcIiwgZXJyID0+IHtcbiAgICAgIC8vIHJldmVydCB0byBjbGFzc2ljIHVwZ3JhZGVcbiAgICAgIGxvY2FsU29ja2V0Q29ubmVjdGlvbi5pby5vcHRzLnRyYW5zcG9ydHMgPSBbXCJwb2xsaW5nXCIsIFwid2Vic29ja2V0XCJdO1xuICAgICAgbG9nLmVycm9yKFwiY29ubmVjdCBlcnJvclwiLCBlcnIpO1xuICAgIH0pO1xuICAgIGxvY2FsU29ja2V0Q29ubmVjdGlvbi5vbihcImNvbm5lY3RcIiwgYXN5bmMgKCkgPT4ge1xuICAgICAgY29uc3Qge1xuICAgICAgICBlbmdpbmVcbiAgICAgIH0gPSBsb2NhbFNvY2tldENvbm5lY3Rpb24uaW87XG4gICAgICBsb2cuZGVidWcoXCJpbml0aWFsbHkgY29ubmVjdGVkIHRvXCIsIGVuZ2luZS50cmFuc3BvcnQubmFtZSk7IC8vIGluIG1vc3QgY2FzZXMsIHByaW50cyBcInBvbGxpbmdcIlxuICAgICAgZW5naW5lLm9uY2UoXCJ1cGdyYWRlXCIsICgpID0+IHtcbiAgICAgICAgLy8gY2FsbGVkIHdoZW4gdGhlIHRyYW5zcG9ydCBpcyB1cGdyYWRlZCAoaS5lLiBmcm9tIEhUVFAgbG9uZy1wb2xsaW5nIHRvIFdlYlNvY2tldClcbiAgICAgICAgbG9nLmRlYnVnKFwidXBncmFkZWRcIiwgZW5naW5lLnRyYW5zcG9ydC5uYW1lKTsgLy8gaW4gbW9zdCBjYXNlcywgcHJpbnRzIFwid2Vic29ja2V0XCJcbiAgICAgIH0pO1xuICAgICAgZW5naW5lLm9uY2UoXCJjbG9zZVwiLCByZWFzb24gPT4ge1xuICAgICAgICAvLyBjYWxsZWQgd2hlbiB0aGUgdW5kZXJseWluZyBjb25uZWN0aW9uIGlzIGNsb3NlZFxuICAgICAgICBsb2cuZGVidWcoXCJjb25uZWN0aW9uIGNsb3NlZFwiLCByZWFzb24pO1xuICAgICAgfSk7XG4gICAgfSk7XG4gICAgbG9jYWxTb2NrZXRDb25uZWN0aW9uLm9uKFwiZXJyb3JcIiwgZXJyID0+IHtcbiAgICAgIGxvZy5lcnJvcihcInNvY2tldCBlcnJvcmVkXCIsIGVycik7XG4gICAgICBsb2NhbFNvY2tldENvbm5lY3Rpb24uZGlzY29ubmVjdCgpO1xuICAgIH0pO1xuICAgIHRoaXMuU09DS0VUX0NPTk4gPSBsb2NhbFNvY2tldENvbm5lY3Rpb247XG4gICAgcmV0dXJuIHRoaXMuU09DS0VUX0NPTk47XG4gIH1cbn1cblxuZXhwb3J0IHsgU2VjdXJlUHViU3ViIH07XG4iXSwibmFtZXMiOltdLCJpZ25vcmVMaXN0IjpbMF0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/@toruslabs/secure-pub-sub/dist/lib.esm/SecurePubSub.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/@toruslabs/secure-pub-sub/dist/lib.esm/log.js":
/*!********************************************************************!*\
  !*** ./node_modules/@toruslabs/secure-pub-sub/dist/lib.esm/log.js ***!
  \********************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (/* binding */ log)\n/* harmony export */ });\n/* harmony import */ var loglevel__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! loglevel */ \"(ssr)/./node_modules/loglevel/lib/loglevel.js\");\n/* harmony import */ var loglevel__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(loglevel__WEBPACK_IMPORTED_MODULE_0__);\n\n\nvar log = loglevel__WEBPACK_IMPORTED_MODULE_0___default().getLogger(\"SecurePubSub\");\n\n\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvQHRvcnVzbGFicy9zZWN1cmUtcHViLXN1Yi9kaXN0L2xpYi5lc20vbG9nLmpzIiwibWFwcGluZ3MiOiI7Ozs7OztBQUE2Qjs7QUFFN0IsVUFBVSx5REFBZTs7QUFFQyIsInNvdXJjZXMiOlsiL1VzZXJzL2FuZ2VsYWhlcnJhZG9ybG9wZXovRGVza3RvcC9DVEIvTVMzL3VzZWNhc2VzL25vZGVfbW9kdWxlcy9AdG9ydXNsYWJzL3NlY3VyZS1wdWItc3ViL2Rpc3QvbGliLmVzbS9sb2cuanMiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IGxvZyQxIGZyb20gJ2xvZ2xldmVsJztcblxudmFyIGxvZyA9IGxvZyQxLmdldExvZ2dlcihcIlNlY3VyZVB1YlN1YlwiKTtcblxuZXhwb3J0IHsgbG9nIGFzIGRlZmF1bHQgfTtcbiJdLCJuYW1lcyI6W10sImlnbm9yZUxpc3QiOlswXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/@toruslabs/secure-pub-sub/dist/lib.esm/log.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/@toruslabs/session-manager/dist/lib.esm/base.js":
/*!**********************************************************************!*\
  !*** ./node_modules/@toruslabs/session-manager/dist/lib.esm/base.js ***!
  \**********************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   BaseSessionManager: () => (/* binding */ BaseSessionManager)\n/* harmony export */ });\n/* harmony import */ var _babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @babel/runtime/helpers/defineProperty */ \"(ssr)/./node_modules/@babel/runtime/helpers/defineProperty.js\");\n/* harmony import */ var _babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var _toruslabs_http_helpers__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @toruslabs/http-helpers */ \"(ssr)/./node_modules/@toruslabs/http-helpers/dist/lib.esm/index.js\");\n/* harmony import */ var _util_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./util.js */ \"(ssr)/./node_modules/@toruslabs/session-manager/dist/lib.esm/util.js\");\n\n\n\n\nclass BaseSessionManager {\n  constructor() {\n    _babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_0___default()(this, \"sessionId\", void 0);\n  }\n  checkSessionParams() {\n    if (!this.sessionId) throw new Error(\"Session id is required\");\n    this.sessionId = (0,_util_js__WEBPACK_IMPORTED_MODULE_1__.padHexString)(this.sessionId);\n  }\n\n  /**\n   * Common handler method for making an http request.\n   *\n   * Note: Embed all the query parameters in the path itself.\n   */\n  request({\n    method = \"GET\",\n    url,\n    data = {},\n    headers = {}\n  }) {\n    const options = {\n      headers\n    };\n    switch (method) {\n      case \"GET\":\n        return (0,_toruslabs_http_helpers__WEBPACK_IMPORTED_MODULE_2__.get)(url, options);\n      case \"POST\":\n        return (0,_toruslabs_http_helpers__WEBPACK_IMPORTED_MODULE_2__.post)(url, data, options);\n      case \"PUT\":\n        return (0,_toruslabs_http_helpers__WEBPACK_IMPORTED_MODULE_2__.put)(url, data, options);\n      case \"PATCH\":\n        return (0,_toruslabs_http_helpers__WEBPACK_IMPORTED_MODULE_2__.patch)(url, data, options);\n    }\n    throw new Error(\"Invalid method type\");\n  }\n}\n\n\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvQHRvcnVzbGFicy9zZXNzaW9uLW1hbmFnZXIvZGlzdC9saWIuZXNtL2Jhc2UuanMiLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7QUFBb0U7QUFDSjtBQUN2Qjs7QUFFekM7QUFDQTtBQUNBLElBQUksNEVBQWU7QUFDbkI7QUFDQTtBQUNBO0FBQ0EscUJBQXFCLHNEQUFZO0FBQ2pDOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxhQUFhO0FBQ2I7QUFDQSxHQUFHO0FBQ0g7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGVBQWUsNERBQUc7QUFDbEI7QUFDQSxlQUFlLDZEQUFJO0FBQ25CO0FBQ0EsZUFBZSw0REFBRztBQUNsQjtBQUNBLGVBQWUsOERBQUs7QUFDcEI7QUFDQTtBQUNBO0FBQ0E7O0FBRThCIiwic291cmNlcyI6WyIvVXNlcnMvYW5nZWxhaGVycmFkb3Jsb3Blei9EZXNrdG9wL0NUQi9NUzMvdXNlY2FzZXMvbm9kZV9tb2R1bGVzL0B0b3J1c2xhYnMvc2Vzc2lvbi1tYW5hZ2VyL2Rpc3QvbGliLmVzbS9iYXNlLmpzIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCBfZGVmaW5lUHJvcGVydHkgZnJvbSAnQGJhYmVsL3J1bnRpbWUvaGVscGVycy9kZWZpbmVQcm9wZXJ0eSc7XG5pbXBvcnQgeyBwYXRjaCwgcHV0LCBwb3N0LCBnZXQgfSBmcm9tICdAdG9ydXNsYWJzL2h0dHAtaGVscGVycyc7XG5pbXBvcnQgeyBwYWRIZXhTdHJpbmcgfSBmcm9tICcuL3V0aWwuanMnO1xuXG5jbGFzcyBCYXNlU2Vzc2lvbk1hbmFnZXIge1xuICBjb25zdHJ1Y3RvcigpIHtcbiAgICBfZGVmaW5lUHJvcGVydHkodGhpcywgXCJzZXNzaW9uSWRcIiwgdm9pZCAwKTtcbiAgfVxuICBjaGVja1Nlc3Npb25QYXJhbXMoKSB7XG4gICAgaWYgKCF0aGlzLnNlc3Npb25JZCkgdGhyb3cgbmV3IEVycm9yKFwiU2Vzc2lvbiBpZCBpcyByZXF1aXJlZFwiKTtcbiAgICB0aGlzLnNlc3Npb25JZCA9IHBhZEhleFN0cmluZyh0aGlzLnNlc3Npb25JZCk7XG4gIH1cblxuICAvKipcbiAgICogQ29tbW9uIGhhbmRsZXIgbWV0aG9kIGZvciBtYWtpbmcgYW4gaHR0cCByZXF1ZXN0LlxuICAgKlxuICAgKiBOb3RlOiBFbWJlZCBhbGwgdGhlIHF1ZXJ5IHBhcmFtZXRlcnMgaW4gdGhlIHBhdGggaXRzZWxmLlxuICAgKi9cbiAgcmVxdWVzdCh7XG4gICAgbWV0aG9kID0gXCJHRVRcIixcbiAgICB1cmwsXG4gICAgZGF0YSA9IHt9LFxuICAgIGhlYWRlcnMgPSB7fVxuICB9KSB7XG4gICAgY29uc3Qgb3B0aW9ucyA9IHtcbiAgICAgIGhlYWRlcnNcbiAgICB9O1xuICAgIHN3aXRjaCAobWV0aG9kKSB7XG4gICAgICBjYXNlIFwiR0VUXCI6XG4gICAgICAgIHJldHVybiBnZXQodXJsLCBvcHRpb25zKTtcbiAgICAgIGNhc2UgXCJQT1NUXCI6XG4gICAgICAgIHJldHVybiBwb3N0KHVybCwgZGF0YSwgb3B0aW9ucyk7XG4gICAgICBjYXNlIFwiUFVUXCI6XG4gICAgICAgIHJldHVybiBwdXQodXJsLCBkYXRhLCBvcHRpb25zKTtcbiAgICAgIGNhc2UgXCJQQVRDSFwiOlxuICAgICAgICByZXR1cm4gcGF0Y2godXJsLCBkYXRhLCBvcHRpb25zKTtcbiAgICB9XG4gICAgdGhyb3cgbmV3IEVycm9yKFwiSW52YWxpZCBtZXRob2QgdHlwZVwiKTtcbiAgfVxufVxuXG5leHBvcnQgeyBCYXNlU2Vzc2lvbk1hbmFnZXIgfTtcbiJdLCJuYW1lcyI6W10sImlnbm9yZUxpc3QiOlswXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/@toruslabs/session-manager/dist/lib.esm/base.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/@toruslabs/session-manager/dist/lib.esm/sessionManager.js":
/*!********************************************************************************!*\
  !*** ./node_modules/@toruslabs/session-manager/dist/lib.esm/sessionManager.js ***!
  \********************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   SessionManager: () => (/* binding */ SessionManager)\n/* harmony export */ });\n/* harmony import */ var _babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @babel/runtime/helpers/defineProperty */ \"(ssr)/./node_modules/@babel/runtime/helpers/defineProperty.js\");\n/* harmony import */ var _babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var _toruslabs_constants__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @toruslabs/constants */ \"(ssr)/./node_modules/@toruslabs/constants/dist/lib.esm/constants.js\");\n/* harmony import */ var _toruslabs_eccrypto__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! @toruslabs/eccrypto */ \"(ssr)/./node_modules/@toruslabs/eccrypto/dist/lib.esm/index.js\");\n/* harmony import */ var _toruslabs_metadata_helpers__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! @toruslabs/metadata-helpers */ \"(ssr)/./node_modules/@toruslabs/metadata-helpers/dist/lib.esm/webAuthnShareResolver.js\");\n/* harmony import */ var _toruslabs_metadata_helpers__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! @toruslabs/metadata-helpers */ \"(ssr)/./node_modules/@toruslabs/metadata-helpers/dist/lib.esm/utils.js\");\n/* harmony import */ var _base_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./base.js */ \"(ssr)/./node_modules/@toruslabs/session-manager/dist/lib.esm/base.js\");\n/* harmony import */ var _util_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./util.js */ \"(ssr)/./node_modules/@toruslabs/session-manager/dist/lib.esm/util.js\");\n\n\n\n\n\n\n\nconst DEFAULT_SESSION_TIMEOUT = 86400;\nclass SessionManager extends _base_js__WEBPACK_IMPORTED_MODULE_1__.BaseSessionManager {\n  constructor({\n    sessionServerBaseUrl,\n    sessionNamespace,\n    sessionTime,\n    sessionId,\n    allowedOrigin\n  } = {}) {\n    super();\n    _babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_0___default()(this, \"sessionServerBaseUrl\", _toruslabs_constants__WEBPACK_IMPORTED_MODULE_2__.SESSION_SERVER_API_URL);\n    _babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_0___default()(this, \"sessionNamespace\", void 0);\n    _babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_0___default()(this, \"allowedOrigin\", void 0);\n    _babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_0___default()(this, \"sessionTime\", DEFAULT_SESSION_TIMEOUT);\n    _babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_0___default()(this, \"sessionId\", \"\");\n    if (sessionServerBaseUrl) {\n      this.sessionServerBaseUrl = sessionServerBaseUrl;\n    }\n    if (sessionNamespace) this.sessionNamespace = sessionNamespace;\n    if (sessionTime) this.sessionTime = sessionTime;\n    if (sessionId) this.sessionId = (0,_util_js__WEBPACK_IMPORTED_MODULE_3__.padHexString)(sessionId);\n    if (allowedOrigin) {\n      this.allowedOrigin = allowedOrigin;\n    } else {\n      this.allowedOrigin = \"*\";\n    }\n  }\n  static generateRandomSessionKey() {\n    return (0,_util_js__WEBPACK_IMPORTED_MODULE_3__.padHexString)((0,_toruslabs_eccrypto__WEBPACK_IMPORTED_MODULE_4__.generatePrivate)().toString(\"hex\"));\n  }\n  async createSession(data, headers = {}) {\n    super.checkSessionParams();\n    const privKey = Buffer.from(this.sessionId, \"hex\");\n    const pubKey = (0,_toruslabs_eccrypto__WEBPACK_IMPORTED_MODULE_4__.getPublic)(privKey).toString(\"hex\");\n    const encData = await (0,_toruslabs_metadata_helpers__WEBPACK_IMPORTED_MODULE_5__.encryptData)(this.sessionId, data);\n    const signature = (await (0,_toruslabs_eccrypto__WEBPACK_IMPORTED_MODULE_4__.sign)(privKey, (0,_toruslabs_metadata_helpers__WEBPACK_IMPORTED_MODULE_6__.keccak256)(Buffer.from(encData, \"utf8\")))).toString(\"hex\");\n    const body = {\n      key: pubKey,\n      data: encData,\n      signature,\n      namespace: this.sessionNamespace,\n      timeout: this.sessionTime,\n      allowedOrigin: this.allowedOrigin\n    };\n    await super.request({\n      method: \"POST\",\n      url: `${this.sessionServerBaseUrl}/v2/store/set`,\n      data: body,\n      headers\n    });\n    return this.sessionId;\n  }\n  async authorizeSession({\n    headers\n  } = {\n    headers: {}\n  }) {\n    super.checkSessionParams();\n    const pubkey = (0,_toruslabs_eccrypto__WEBPACK_IMPORTED_MODULE_4__.getPublic)(Buffer.from(this.sessionId, \"hex\")).toString(\"hex\");\n    const body = {\n      key: pubkey,\n      namespace: this.sessionNamespace\n    };\n    const result = await super.request({\n      method: \"POST\",\n      url: `${this.sessionServerBaseUrl}/v2/store/get`,\n      data: body,\n      headers\n    });\n    if (!result.message) {\n      throw new Error(\"Session Expired or Invalid public key\");\n    }\n    const response = await (0,_toruslabs_metadata_helpers__WEBPACK_IMPORTED_MODULE_5__.decryptData)(this.sessionId, result.message);\n    if (response.error) {\n      throw new Error(\"There was an error decrypting data.\");\n    }\n    return response;\n  }\n  async updateSession(data, headers = {}) {\n    super.checkSessionParams();\n    const privKey = Buffer.from(this.sessionId, \"hex\");\n    const pubKey = (0,_toruslabs_eccrypto__WEBPACK_IMPORTED_MODULE_4__.getPublic)(privKey).toString(\"hex\");\n    const encData = await (0,_toruslabs_metadata_helpers__WEBPACK_IMPORTED_MODULE_5__.encryptData)(this.sessionId, data);\n    const signature = (await (0,_toruslabs_eccrypto__WEBPACK_IMPORTED_MODULE_4__.sign)(privKey, (0,_toruslabs_metadata_helpers__WEBPACK_IMPORTED_MODULE_6__.keccak256)(Buffer.from(encData, \"utf8\")))).toString(\"hex\");\n    const body = {\n      key: pubKey,\n      data: encData,\n      signature,\n      namespace: this.sessionNamespace,\n      allowedOrigin: this.allowedOrigin\n    };\n    await super.request({\n      method: \"PUT\",\n      url: `${this.sessionServerBaseUrl}/v2/store/update`,\n      data: body,\n      headers\n    });\n  }\n  async invalidateSession(headers = {}) {\n    super.checkSessionParams();\n    const privKey = Buffer.from(this.sessionId, \"hex\");\n    const pubKey = (0,_toruslabs_eccrypto__WEBPACK_IMPORTED_MODULE_4__.getPublic)(privKey).toString(\"hex\");\n    const encData = await (0,_toruslabs_metadata_helpers__WEBPACK_IMPORTED_MODULE_5__.encryptData)(this.sessionId, {});\n    const signature = (await (0,_toruslabs_eccrypto__WEBPACK_IMPORTED_MODULE_4__.sign)(privKey, (0,_toruslabs_metadata_helpers__WEBPACK_IMPORTED_MODULE_6__.keccak256)(Buffer.from(encData, \"utf8\")))).toString(\"hex\");\n    const data = {\n      key: pubKey,\n      data: encData,\n      signature,\n      namespace: this.sessionNamespace,\n      timeout: 1\n    };\n    await super.request({\n      method: \"POST\",\n      url: `${this.sessionServerBaseUrl}/v2/store/set`,\n      data,\n      headers\n    });\n    this.sessionId = \"\";\n    return true;\n  }\n}\n\n\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvQHRvcnVzbGFicy9zZXNzaW9uLW1hbmFnZXIvZGlzdC9saWIuZXNtL3Nlc3Npb25NYW5hZ2VyLmpzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7OztBQUFvRTtBQUNOO0FBQ1M7QUFDVztBQUNuQztBQUNOOztBQUV6QztBQUNBLDZCQUE2Qix3REFBa0I7QUFDL0M7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsSUFBSSxJQUFJO0FBQ1I7QUFDQSxJQUFJLDRFQUFlLCtCQUErQix3RUFBc0I7QUFDeEUsSUFBSSw0RUFBZTtBQUNuQixJQUFJLDRFQUFlO0FBQ25CLElBQUksNEVBQWU7QUFDbkIsSUFBSSw0RUFBZTtBQUNuQjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esb0NBQW9DLHNEQUFZO0FBQ2hEO0FBQ0E7QUFDQSxNQUFNO0FBQ047QUFDQTtBQUNBO0FBQ0E7QUFDQSxXQUFXLHNEQUFZLENBQUMsb0VBQWU7QUFDdkM7QUFDQSx3Q0FBd0M7QUFDeEM7QUFDQTtBQUNBLG1CQUFtQiw4REFBUztBQUM1QiwwQkFBMEIsd0VBQVc7QUFDckMsNkJBQTZCLHlEQUFJLFVBQVUsc0VBQVM7QUFDcEQ7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxjQUFjLDBCQUEwQjtBQUN4QztBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsSUFBSTtBQUNKO0FBQ0EsR0FBRztBQUNIO0FBQ0EsbUJBQW1CLDhEQUFTO0FBQzVCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGNBQWMsMEJBQTBCO0FBQ3hDO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0EsMkJBQTJCLHdFQUFXO0FBQ3RDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSx3Q0FBd0M7QUFDeEM7QUFDQTtBQUNBLG1CQUFtQiw4REFBUztBQUM1QiwwQkFBMEIsd0VBQVc7QUFDckMsNkJBQTZCLHlEQUFJLFVBQVUsc0VBQVM7QUFDcEQ7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsY0FBYywwQkFBMEI7QUFDeEM7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBLHNDQUFzQztBQUN0QztBQUNBO0FBQ0EsbUJBQW1CLDhEQUFTO0FBQzVCLDBCQUEwQix3RUFBVyxtQkFBbUI7QUFDeEQsNkJBQTZCLHlEQUFJLFVBQVUsc0VBQVM7QUFDcEQ7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsY0FBYywwQkFBMEI7QUFDeEM7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTs7QUFFMEIiLCJzb3VyY2VzIjpbIi9Vc2Vycy9hbmdlbGFoZXJyYWRvcmxvcGV6L0Rlc2t0b3AvQ1RCL01TMy91c2VjYXNlcy9ub2RlX21vZHVsZXMvQHRvcnVzbGFicy9zZXNzaW9uLW1hbmFnZXIvZGlzdC9saWIuZXNtL3Nlc3Npb25NYW5hZ2VyLmpzIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCBfZGVmaW5lUHJvcGVydHkgZnJvbSAnQGJhYmVsL3J1bnRpbWUvaGVscGVycy9kZWZpbmVQcm9wZXJ0eSc7XG5pbXBvcnQgeyBTRVNTSU9OX1NFUlZFUl9BUElfVVJMIH0gZnJvbSAnQHRvcnVzbGFicy9jb25zdGFudHMnO1xuaW1wb3J0IHsgZ2VuZXJhdGVQcml2YXRlLCBnZXRQdWJsaWMsIHNpZ24gfSBmcm9tICdAdG9ydXNsYWJzL2VjY3J5cHRvJztcbmltcG9ydCB7IGVuY3J5cHREYXRhLCBrZWNjYWsyNTYsIGRlY3J5cHREYXRhIH0gZnJvbSAnQHRvcnVzbGFicy9tZXRhZGF0YS1oZWxwZXJzJztcbmltcG9ydCB7IEJhc2VTZXNzaW9uTWFuYWdlciB9IGZyb20gJy4vYmFzZS5qcyc7XG5pbXBvcnQgeyBwYWRIZXhTdHJpbmcgfSBmcm9tICcuL3V0aWwuanMnO1xuXG5jb25zdCBERUZBVUxUX1NFU1NJT05fVElNRU9VVCA9IDg2NDAwO1xuY2xhc3MgU2Vzc2lvbk1hbmFnZXIgZXh0ZW5kcyBCYXNlU2Vzc2lvbk1hbmFnZXIge1xuICBjb25zdHJ1Y3Rvcih7XG4gICAgc2Vzc2lvblNlcnZlckJhc2VVcmwsXG4gICAgc2Vzc2lvbk5hbWVzcGFjZSxcbiAgICBzZXNzaW9uVGltZSxcbiAgICBzZXNzaW9uSWQsXG4gICAgYWxsb3dlZE9yaWdpblxuICB9ID0ge30pIHtcbiAgICBzdXBlcigpO1xuICAgIF9kZWZpbmVQcm9wZXJ0eSh0aGlzLCBcInNlc3Npb25TZXJ2ZXJCYXNlVXJsXCIsIFNFU1NJT05fU0VSVkVSX0FQSV9VUkwpO1xuICAgIF9kZWZpbmVQcm9wZXJ0eSh0aGlzLCBcInNlc3Npb25OYW1lc3BhY2VcIiwgdm9pZCAwKTtcbiAgICBfZGVmaW5lUHJvcGVydHkodGhpcywgXCJhbGxvd2VkT3JpZ2luXCIsIHZvaWQgMCk7XG4gICAgX2RlZmluZVByb3BlcnR5KHRoaXMsIFwic2Vzc2lvblRpbWVcIiwgREVGQVVMVF9TRVNTSU9OX1RJTUVPVVQpO1xuICAgIF9kZWZpbmVQcm9wZXJ0eSh0aGlzLCBcInNlc3Npb25JZFwiLCBcIlwiKTtcbiAgICBpZiAoc2Vzc2lvblNlcnZlckJhc2VVcmwpIHtcbiAgICAgIHRoaXMuc2Vzc2lvblNlcnZlckJhc2VVcmwgPSBzZXNzaW9uU2VydmVyQmFzZVVybDtcbiAgICB9XG4gICAgaWYgKHNlc3Npb25OYW1lc3BhY2UpIHRoaXMuc2Vzc2lvbk5hbWVzcGFjZSA9IHNlc3Npb25OYW1lc3BhY2U7XG4gICAgaWYgKHNlc3Npb25UaW1lKSB0aGlzLnNlc3Npb25UaW1lID0gc2Vzc2lvblRpbWU7XG4gICAgaWYgKHNlc3Npb25JZCkgdGhpcy5zZXNzaW9uSWQgPSBwYWRIZXhTdHJpbmcoc2Vzc2lvbklkKTtcbiAgICBpZiAoYWxsb3dlZE9yaWdpbikge1xuICAgICAgdGhpcy5hbGxvd2VkT3JpZ2luID0gYWxsb3dlZE9yaWdpbjtcbiAgICB9IGVsc2Uge1xuICAgICAgdGhpcy5hbGxvd2VkT3JpZ2luID0gXCIqXCI7XG4gICAgfVxuICB9XG4gIHN0YXRpYyBnZW5lcmF0ZVJhbmRvbVNlc3Npb25LZXkoKSB7XG4gICAgcmV0dXJuIHBhZEhleFN0cmluZyhnZW5lcmF0ZVByaXZhdGUoKS50b1N0cmluZyhcImhleFwiKSk7XG4gIH1cbiAgYXN5bmMgY3JlYXRlU2Vzc2lvbihkYXRhLCBoZWFkZXJzID0ge30pIHtcbiAgICBzdXBlci5jaGVja1Nlc3Npb25QYXJhbXMoKTtcbiAgICBjb25zdCBwcml2S2V5ID0gQnVmZmVyLmZyb20odGhpcy5zZXNzaW9uSWQsIFwiaGV4XCIpO1xuICAgIGNvbnN0IHB1YktleSA9IGdldFB1YmxpYyhwcml2S2V5KS50b1N0cmluZyhcImhleFwiKTtcbiAgICBjb25zdCBlbmNEYXRhID0gYXdhaXQgZW5jcnlwdERhdGEodGhpcy5zZXNzaW9uSWQsIGRhdGEpO1xuICAgIGNvbnN0IHNpZ25hdHVyZSA9IChhd2FpdCBzaWduKHByaXZLZXksIGtlY2NhazI1NihCdWZmZXIuZnJvbShlbmNEYXRhLCBcInV0ZjhcIikpKSkudG9TdHJpbmcoXCJoZXhcIik7XG4gICAgY29uc3QgYm9keSA9IHtcbiAgICAgIGtleTogcHViS2V5LFxuICAgICAgZGF0YTogZW5jRGF0YSxcbiAgICAgIHNpZ25hdHVyZSxcbiAgICAgIG5hbWVzcGFjZTogdGhpcy5zZXNzaW9uTmFtZXNwYWNlLFxuICAgICAgdGltZW91dDogdGhpcy5zZXNzaW9uVGltZSxcbiAgICAgIGFsbG93ZWRPcmlnaW46IHRoaXMuYWxsb3dlZE9yaWdpblxuICAgIH07XG4gICAgYXdhaXQgc3VwZXIucmVxdWVzdCh7XG4gICAgICBtZXRob2Q6IFwiUE9TVFwiLFxuICAgICAgdXJsOiBgJHt0aGlzLnNlc3Npb25TZXJ2ZXJCYXNlVXJsfS92Mi9zdG9yZS9zZXRgLFxuICAgICAgZGF0YTogYm9keSxcbiAgICAgIGhlYWRlcnNcbiAgICB9KTtcbiAgICByZXR1cm4gdGhpcy5zZXNzaW9uSWQ7XG4gIH1cbiAgYXN5bmMgYXV0aG9yaXplU2Vzc2lvbih7XG4gICAgaGVhZGVyc1xuICB9ID0ge1xuICAgIGhlYWRlcnM6IHt9XG4gIH0pIHtcbiAgICBzdXBlci5jaGVja1Nlc3Npb25QYXJhbXMoKTtcbiAgICBjb25zdCBwdWJrZXkgPSBnZXRQdWJsaWMoQnVmZmVyLmZyb20odGhpcy5zZXNzaW9uSWQsIFwiaGV4XCIpKS50b1N0cmluZyhcImhleFwiKTtcbiAgICBjb25zdCBib2R5ID0ge1xuICAgICAga2V5OiBwdWJrZXksXG4gICAgICBuYW1lc3BhY2U6IHRoaXMuc2Vzc2lvbk5hbWVzcGFjZVxuICAgIH07XG4gICAgY29uc3QgcmVzdWx0ID0gYXdhaXQgc3VwZXIucmVxdWVzdCh7XG4gICAgICBtZXRob2Q6IFwiUE9TVFwiLFxuICAgICAgdXJsOiBgJHt0aGlzLnNlc3Npb25TZXJ2ZXJCYXNlVXJsfS92Mi9zdG9yZS9nZXRgLFxuICAgICAgZGF0YTogYm9keSxcbiAgICAgIGhlYWRlcnNcbiAgICB9KTtcbiAgICBpZiAoIXJlc3VsdC5tZXNzYWdlKSB7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoXCJTZXNzaW9uIEV4cGlyZWQgb3IgSW52YWxpZCBwdWJsaWMga2V5XCIpO1xuICAgIH1cbiAgICBjb25zdCByZXNwb25zZSA9IGF3YWl0IGRlY3J5cHREYXRhKHRoaXMuc2Vzc2lvbklkLCByZXN1bHQubWVzc2FnZSk7XG4gICAgaWYgKHJlc3BvbnNlLmVycm9yKSB7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoXCJUaGVyZSB3YXMgYW4gZXJyb3IgZGVjcnlwdGluZyBkYXRhLlwiKTtcbiAgICB9XG4gICAgcmV0dXJuIHJlc3BvbnNlO1xuICB9XG4gIGFzeW5jIHVwZGF0ZVNlc3Npb24oZGF0YSwgaGVhZGVycyA9IHt9KSB7XG4gICAgc3VwZXIuY2hlY2tTZXNzaW9uUGFyYW1zKCk7XG4gICAgY29uc3QgcHJpdktleSA9IEJ1ZmZlci5mcm9tKHRoaXMuc2Vzc2lvbklkLCBcImhleFwiKTtcbiAgICBjb25zdCBwdWJLZXkgPSBnZXRQdWJsaWMocHJpdktleSkudG9TdHJpbmcoXCJoZXhcIik7XG4gICAgY29uc3QgZW5jRGF0YSA9IGF3YWl0IGVuY3J5cHREYXRhKHRoaXMuc2Vzc2lvbklkLCBkYXRhKTtcbiAgICBjb25zdCBzaWduYXR1cmUgPSAoYXdhaXQgc2lnbihwcml2S2V5LCBrZWNjYWsyNTYoQnVmZmVyLmZyb20oZW5jRGF0YSwgXCJ1dGY4XCIpKSkpLnRvU3RyaW5nKFwiaGV4XCIpO1xuICAgIGNvbnN0IGJvZHkgPSB7XG4gICAgICBrZXk6IHB1YktleSxcbiAgICAgIGRhdGE6IGVuY0RhdGEsXG4gICAgICBzaWduYXR1cmUsXG4gICAgICBuYW1lc3BhY2U6IHRoaXMuc2Vzc2lvbk5hbWVzcGFjZSxcbiAgICAgIGFsbG93ZWRPcmlnaW46IHRoaXMuYWxsb3dlZE9yaWdpblxuICAgIH07XG4gICAgYXdhaXQgc3VwZXIucmVxdWVzdCh7XG4gICAgICBtZXRob2Q6IFwiUFVUXCIsXG4gICAgICB1cmw6IGAke3RoaXMuc2Vzc2lvblNlcnZlckJhc2VVcmx9L3YyL3N0b3JlL3VwZGF0ZWAsXG4gICAgICBkYXRhOiBib2R5LFxuICAgICAgaGVhZGVyc1xuICAgIH0pO1xuICB9XG4gIGFzeW5jIGludmFsaWRhdGVTZXNzaW9uKGhlYWRlcnMgPSB7fSkge1xuICAgIHN1cGVyLmNoZWNrU2Vzc2lvblBhcmFtcygpO1xuICAgIGNvbnN0IHByaXZLZXkgPSBCdWZmZXIuZnJvbSh0aGlzLnNlc3Npb25JZCwgXCJoZXhcIik7XG4gICAgY29uc3QgcHViS2V5ID0gZ2V0UHVibGljKHByaXZLZXkpLnRvU3RyaW5nKFwiaGV4XCIpO1xuICAgIGNvbnN0IGVuY0RhdGEgPSBhd2FpdCBlbmNyeXB0RGF0YSh0aGlzLnNlc3Npb25JZCwge30pO1xuICAgIGNvbnN0IHNpZ25hdHVyZSA9IChhd2FpdCBzaWduKHByaXZLZXksIGtlY2NhazI1NihCdWZmZXIuZnJvbShlbmNEYXRhLCBcInV0ZjhcIikpKSkudG9TdHJpbmcoXCJoZXhcIik7XG4gICAgY29uc3QgZGF0YSA9IHtcbiAgICAgIGtleTogcHViS2V5LFxuICAgICAgZGF0YTogZW5jRGF0YSxcbiAgICAgIHNpZ25hdHVyZSxcbiAgICAgIG5hbWVzcGFjZTogdGhpcy5zZXNzaW9uTmFtZXNwYWNlLFxuICAgICAgdGltZW91dDogMVxuICAgIH07XG4gICAgYXdhaXQgc3VwZXIucmVxdWVzdCh7XG4gICAgICBtZXRob2Q6IFwiUE9TVFwiLFxuICAgICAgdXJsOiBgJHt0aGlzLnNlc3Npb25TZXJ2ZXJCYXNlVXJsfS92Mi9zdG9yZS9zZXRgLFxuICAgICAgZGF0YSxcbiAgICAgIGhlYWRlcnNcbiAgICB9KTtcbiAgICB0aGlzLnNlc3Npb25JZCA9IFwiXCI7XG4gICAgcmV0dXJuIHRydWU7XG4gIH1cbn1cblxuZXhwb3J0IHsgU2Vzc2lvbk1hbmFnZXIgfTtcbiJdLCJuYW1lcyI6W10sImlnbm9yZUxpc3QiOlswXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/@toruslabs/session-manager/dist/lib.esm/sessionManager.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/@toruslabs/session-manager/dist/lib.esm/util.js":
/*!**********************************************************************!*\
  !*** ./node_modules/@toruslabs/session-manager/dist/lib.esm/util.js ***!
  \**********************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   padHexString: () => (/* binding */ padHexString)\n/* harmony export */ });\nconst padHexString = hexString => {\n  return hexString.padStart(64, \"0\").slice(0, 64);\n};\n\n\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvQHRvcnVzbGFicy9zZXNzaW9uLW1hbmFnZXIvZGlzdC9saWIuZXNtL3V0aWwuanMiLCJtYXBwaW5ncyI6Ijs7OztBQUFBO0FBQ0E7QUFDQTs7QUFFd0IiLCJzb3VyY2VzIjpbIi9Vc2Vycy9hbmdlbGFoZXJyYWRvcmxvcGV6L0Rlc2t0b3AvQ1RCL01TMy91c2VjYXNlcy9ub2RlX21vZHVsZXMvQHRvcnVzbGFicy9zZXNzaW9uLW1hbmFnZXIvZGlzdC9saWIuZXNtL3V0aWwuanMiXSwic291cmNlc0NvbnRlbnQiOlsiY29uc3QgcGFkSGV4U3RyaW5nID0gaGV4U3RyaW5nID0+IHtcbiAgcmV0dXJuIGhleFN0cmluZy5wYWRTdGFydCg2NCwgXCIwXCIpLnNsaWNlKDAsIDY0KTtcbn07XG5cbmV4cG9ydCB7IHBhZEhleFN0cmluZyB9O1xuIl0sIm5hbWVzIjpbXSwiaWdub3JlTGlzdCI6WzBdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/@toruslabs/session-manager/dist/lib.esm/util.js\n");

/***/ })

};
;